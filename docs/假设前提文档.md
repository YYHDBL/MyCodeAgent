# 《像素勇者大冒险》测试假设前提文档

> **文档说明**：本文档列出在测试设计过程中，因需求未明确而基于游戏行业通用规范所做的所有假设。所有假设在后续测试执行中如与实际需求不符，需及时调整测试策略。

---

## 一、游戏引擎与技术架构假设

### 1.1 游戏引擎
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 引擎类型 | 基于Canvas/WebGL的HTML5游戏引擎（如Phaser/Cocos2d-js） | 支持浏览器运行，符合2D横版游戏技术栈 |
| 物理引擎 | 内置物理引擎（AABB碰撞检测+简单重力模拟） | 横版闯关游戏标准物理方案 |
| 渲染模式 | Canvas 2D渲染（低画质模式）/ WebGL渲染（高画质模式） | 主流HTML5游戏渲染策略 |

### 1.2 数据存储
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 存档格式 | JSON格式，本地存储在浏览器localStorage或IndexedDB | 单机HTML5游戏标准存储方案 |
| 存档位置 | `localStorage`中key为`pixelHero_save`或IndexedDB | 浏览器本地存储规范 |
| 存档加密 | 简单Base64编码或无加密 | 单机轻量级游戏常见做法 |
| 存档大小 | 单个存档文件≤10KB | 单局游戏数据量不大 |

## 二、游戏机制与数值设计假设

### 2.1 数值系统
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 血量上限 | 初始100，无上限（可超过100通过恢复道具） | RPG游戏常见机制 |
| 血量下限 | 最小为0，不会出现负数（攻击至≤0即判定死亡） | 游戏数值设计规范 |
| 攻击力倍率 | 暴击药剂攻击力翻倍计算为：基础攻击力×2（非叠加） | 避免数值溢出 |
| 伤害计算 | 伤害公式为：攻击力 - 防御力（敌方防御力为0） | 简化伤害计算逻辑 |

### 2.2 道具系统
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 药水冷却 | 无冷却时间，仅受背包数量限制 | 简化道具使用逻辑 |
| 暴击持续时间 | 10秒从使用时刻开始计时，不可叠加 | 药剂效果常见机制 |
| 防护盾触发 | 抵消伤害后立即消失，无持续时间 | 被动道具触发逻辑 |
| 道具拾取范围 | 角色碰撞箱与宝箱碰撞箱重叠即触发 | 物理碰撞标准判定 |

### 2.3 碰撞与判定
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 伤害判定帧率 | 每帧检测碰撞，单次伤害触发有0.5秒无敌帧 | 避免连续判定伤害过高 |
| 掉落死亡判定 | 角色Y坐标超出屏幕底部边界即触发死亡 | 横版游戏标准做法 |
| 尖刺伤害 | 触碰即扣20血量，无冷却时间 | 即时伤害机制 |
| BOSS AI | 简单AI：定时向玩家移动+近战攻击 | 首次实现BOSS常见策略 |

## 三、音效与特效假设

### 3.1 音效系统
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 音效格式 | MP3或OGG格式，单个文件≤500KB | 浏览器兼容性与加载性能 |
| 音效延迟 | 播放延迟≤50ms | 游戏音频响应标准 |
| 音效重叠 | 允许多个音效同时播放（移动+攻击） | 游戏音频常见行为 |

### 3.2 特效系统
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 特效类型 | 粒子系统或Sprite动画序列 | 2D游戏特效实现方式 |
| 高画质模式 | 开启粒子数量增加、帧率优先 | 性能与画质权衡 |
| 低画质模式 | 禁用部分粒子、简化动画 | 低配设备适配 |

## 四、关卡与难度假设

### 4.1 关卡设计
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 关卡长度 | 每个关卡场景宽度约20-30个屏幕宽度 | 横版闯关游戏标准时长 |
| 检查点机制 | 无检查点，死亡后重新开始当前关卡 | 需求明确要求 |
| 敌方刷新 | 重玩关卡后敌方位置恢复初始状态 | 关卡重置机制 |
| 通关判定 | 击败BOSS（如有）+触碰终点旗帜两者同时满足 | 需求明确要求 |

### 4.2 BOSS设计（关卡3）
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| BOSS血量 | 500，不回血 | 需求明确 |
| BOSS攻击 | 近战攻击，伤害30，攻击间隔1-2秒 | BOSS战斗平衡性 |
| BOSS行为 | 向玩家移动+攻击，无特殊技能 | 首次实现简化逻辑 |

## 五、性能与兼容性假设

### 5.1 性能指标
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 目标帧率 | 60fps（桌面端） | 游戏流畅度标准 |
| 内存泄漏判定 | 1小时连续游戏内存增长≤50MB | HTML5游戏内存规范 |
| 加载时间 | 首次加载≤3s，重玩≤1s | 需求明确 + 行业标准 |

### 5.2 兼容性
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 浏览器支持 | Chrome 120+ / Firefox 115+ / Edge 120+ | 主流浏览器版本 |
| 硬件加速 | 默认开启，支持手动关闭 | 浏览器标准配置 |
| 分辨率适配 | 游戏画面按比例缩放，保持16:9比例 | 响应式游戏设计 |

## 六、操作与输入假设

### 6.1 输入系统
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 输入延迟 | 键盘输入响应延迟≤16.67ms（1帧@60fps） | 游戏输入响应标准 |
| 多键同按 | 支持最多3个按键同时按下（如左+空格+Z） | 键盘硬件限制 |
| 连点判定 | 连续按键均触发对应操作（如连按Z键多次攻击） | 动作游戏常见机制 |
| 长按判定 | 方向键长按为持续移动，其他键无长按效果 | 操作逻辑简化 |

## 七、异常处理假设

### 7.1 错误处理
| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 存档损坏 | 检测到损坏时删除旧存档，使用默认初始状态 | 异常恢复机制 |
| 网络断开 | 不影响游戏运行（单机游戏） | 单机特性 |
| 浏览器崩溃 | 重启后可读取最近一次存档 | 自动存档机制 |
| 内存不足 | 触发低画质模式自动降级或提示用户 | 降级策略 |

---

## 八、测试环境假设

| 假设项 | 假设内容 | 依据 |
|--------|----------|------|
| 测试机器 | Windows 10 64位 / Windows 11 64位，配置≥i5/8G/独立显卡 | 主流配置 |
| 浏览器版本 | Chrome 125 / Firefox 120 / Edge 125 | 稳定版本 |
| 网络环境 | 本地运行，无需网络（除首次加载资源） | 单机特性 |

---

**文档版本**：v1.0  
**创建日期**：2025-01-15  
**负责人**：资深游戏测试工程师
