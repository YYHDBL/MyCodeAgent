var e;function t(){import.meta.url,import("_").catch((()=>1))}import"./modulepreload-polyfill.ml8z251s4abee2a4.js";/* empty css                                        */import{s as i,g as o,a as n,V as a,b as s,m as r}from"./StreamFriendsList.ml8z251s4996a301.js";import{M as d,K as c,R as l,i as p,a as m,t as _,b as u,w as h,A as w,s as g,u as f,c as y}from"./wxwork_hidden.ml8z251saf60dc24.js";import{e as v,j as b,m as x,A as k,P as I,d as S}from"./underline_action.ml8z251sd367f02a.js";import A from"./ext_loading.ml8z251se07b2e50.js";import{o as T}from"./pag.ml8z251s7656fa23.js";import{s as C,i as E}from"./font_size_utils.ml8z251s867fcb1c.js";import{j as R,a as P,u as j,c as D,U as B,L,l as N,b as O,d as M,e as z,g as W}from"./comm_utils.ml8z251s7620aa63.js";import{D as q,s as U,a as H,b as F}from"./private_share.ml8z251s0bf2a397.js";import{L as V}from"./log.ml8z251sa0c8508c.js";import{C as J}from"./class.ml8z251sd1a660bd.js";import{m as $,J as G}from"./core.ml8z251s3002836d.js";import{P as K,W as Q,R as Y,n as X,s as Z,p as ee}from"./event.ml8z251sf20ad829.js";import{p as te,A as ie,I as oe,V as ne,w as ae}from"./page_utils.ml8z251sd16ec28c.js";import{E as se}from"./event_bus.ml8z251sf7643e49.js";import{D as re}from"./event.ml8z251s108f3ea9.js";import{w as de,o as ce,S as le,m as pe,a as me,P as _e,b as ue,c as he,B as we,H as ge,d as fe,R as ye,e as ve,I as be,n as xe,p as ke,s as Ie,_ as Se,f as Ae,g as Te,V as Ce,h as Ee,i as Re,j as Pe,k as je,l as De,M as Be,q as Le,r as Ne,t as Oe}from"./index.ml8z251sa02f8441.js";import{T as Me}from"./tmpl.ml8z251s1af565c1.js";import{d as ze}from"./base64.ml8z251sbb9f2aa8.js";import{p as We,o as qe}from"./page_utils.ml8z251se6294438.js";import{B as Ue,A as He,k as Fe,b as Ve,i as Je,a as $e}from"./lottery.ml8z251s4660b65a.js";import{i as Ge,s as Ke,P as Qe}from"./play_voice.ml8z251sac81abab.js";import{A as Ye,G as Xe,O as Ze,t as et}from"./topic.ml8z251s428c9e7a.js";import{R as tt,i as it}from"./review_image.ml8z251sc30af539.js";import{u as ot}from"./pay_report_utils.ml8z251s7266d07b.js";import{r as nt,a as at,e as st,g as rt}from"./utils.ml8z251s73d734f6.js";import{b as dt,s as lt}from"./set_article_read.ml8z251s58469b87.js";import{t as pt,r as mt,A as _t}from"./appmsgext.ml8z251s45cf2015.js";import{c as ut}from"./report.ml8z251sd26b16c8.js";import{n as ht}from"./_plugin-vue2_normalizer.ml8z251sfc2fb13f.js";import{A as wt,g as gt,h as ft}from"./render_utils.ml8z251sd2444497.js";import{S as yt,B as vt,C as bt}from"./stream_interaction.ml8z251s90a17a74.js";import{i as xt,h as kt}from"./mobile_click.ml8z251s9055589f.js";import{L as It}from"./Loading.ml8z251s88bdb210.js";import St from"./reward_list_dialog.ml8z251sd2359976.js";import{A as At}from"./a_config.ml8z251sae81f865.js";import{L as Tt}from"./like_and_share.ml8z251s8edaa6af.js";import"./wxgspeedsdk.ml8z251sf8eb5e85.js";import{p as Ct}from"./page_cls_ctrl.ml8z251s551deda6.js";import{F as Et,V as Rt,a as Pt,b as jt,T as Dt,P as Bt,c as Lt,d as Nt,e as Ot}from"./cover_next.ml8z251saf0b85a9.js";import{D as Mt,I as zt}from"./indexdb.ml8z251sb5ad6c9c.js";import{P as Wt}from"./product_search.ml8z251sae25a92d.js";import{I as qt,i as Ut}from"./article_bottom_bar.ml8z251s9cb6ff37.js";import{c as Ht}from"./article_bottom_bar.ml8z251sc78c16e8.js";import{B as Ft,V as Vt}from"./background_color.ml8z251sff6e67b0.js";import{s as Jt}from"./sec_performance.ml8z251s41252614.js";import{_ as $t,n as Gt}from"./_plugin-vue2_normalizer-9c6b8b3d.ml8z251sf46dd4c3.js";import{g as Kt,s as Qt}from"./content_font.ml8z251sa6ebbe94.js";import{b as Yt}from"./article_bottom_bar_before.ml8z251s3e19ebb2.js";import"./stream_article_bottom.ml8z251sa1faac0e.js";import"./safe_area_insets.ml8z251s86bfdfdb.js";import{__setStar as Xt}from"./set_star.ml8z251sa2ac9a9f.js";import{s as Zt}from"./Identity.ml8z251s38a6f158.js";import{D as ei,o as ti,i as ii}from"./report_img.ml8z251sc57f6dd6.js";import{i as oi,a as ni,g as ai,b as si,s as ri,c as di,d as ci,f as li}from"./advance.ml8z251s8e1f9e5b.js";import{V as pi,q as mi,k as _i,r as ui,s as hi,a as wi,m as gi,g as fi,i as yi}from"./index.ml8z251sa1bfb3cf.js";import"./tap_highlight.ml8z251sd6518fe6.js";import{i as vi}from"./vote.ml8z251s188ebe62.js";import{W as bi}from"./weapp_common.ml8z251s1608af89.js";import"./intersection-observer.ml8z251se16580c9.js";import{r as xi}from"./pre_loading.ml8z251sc223c161.js";import{s as ki,m as Ii,r as Si,h as Ai,g as Ti,p as Ci}from"./channel_product_utils.ml8z251sb35e42d2.js";import"./set_custom_ele.ml8z251sf7e6f8db.js";import{i as Ei}from"./index.ml8z251sc945c847.js";import{getImmersiveMode as Ri}from"./set_fullscreen_webview.ml8z251s97c5c969.js";import{s as Pi}from"./index.ml8z251s6e3664bb.js";import{i as ji}from"./preview_reload.ml8z251sad22d7af.js";import"./ThanksBtn.ml8z251sfc2f0c62.js";import"./keyboard.ml8z251s8cfd441b.js";import"./textOverflow.ml8z251s9d5cfb76.js";import"./get_page_read_pos.ml8z251s9438760a.js";import"./body_first_observer.ml8z251sa7d0eac4.js";import"./i18n.ml8z251sde033f12.js";import"./rec_report_key.ml8z251sbce05b44.js";import"./localstorage.ml8z251s7f340d11.js";import"./reward_ls.ml8z251sc2ea40b5.js";import"./moment.ml8z251s07db360f.js";import"./search_fixed_bar.ml8z251s2292e806.js";import"./loadscript.ml8z251s2014a786.js";import"./object-73371513.ml8z251saf6c26e7.js";import"./_commonjsHelpers-10dfc225.ml8z251s8600c1d6.js";import"./bind_element.ml8z251s42ec7d5a.js";import"./bind_element.ml8z251saec4e80e.js";import"./bind_element.ml8z251s38d82d69.js";const Di=[];function Bi(){try{!function(){window.location.href.indexOf("clearStorage=1")>=0&&(localStorage.removeItem("max-age-storage-test"),console.log("clear localStorage"));var e=window.user_uin||0;if(0!==e&&Math.floor(e/100)%1e3<1&&(P({type:"GET",url:"/mp/reportcache?type=1&random="+Math.random()}),(new Image).src="/mp/reportcache?type=2&uin="+uin,localStorage&&null==localStorage.getItem("max-age-storage-test"))){console.log("localStorage empty");try{localStorage.setItem("max-age-storage-test",!0),console.log("localStorage set success")}catch(t){}P({type:"GET",url:"/mp/reportcache?type=3&random="+Math.random()})}}(),"undefined"==typeof getComputedStyle&&document.body.currentStyle&&(window.getComputedStyle=function(e){return e.currentStyle}),function(){let e=window.user_uin||0;if(!(0!==e&&Math.floor(e/100)%1e3<10))return;let t=document.getElementsByTagName("img"),i=t.length,o=document.getElementById("img-content"),n=o.offsetWidth,a=0,s=0,r=getComputedStyle(o);a=parseInt(r.paddingLeft)+parseInt(r.paddingRight),n-=a,n||(n=window.innerWidth-30);for(let d=0;d<i;++d){if(!t[d].getAttribute("data-src"))continue;let e=1*t[d].getAttribute("data-w")||n,i=1*t[d].getAttribute("data-ratio");i&&i>0&&e>n&&s++}s>0&&Di.push({idkey:28307,order:22,num:s})}(),function(){for(let e=0,t=Di.length;e<t;++e){let t=Di[e];R.setSum(t.idkey,t.order,t.num)}}()}catch(e){console.error(e)}}let Li=!1;const Ni=navigator.userAgent.match(/MicroMessenger\/(\d+)\.(\d+)\.(\d+)/);if(Ni){const e=Number(Ni[1]),t=Number(Ni[2]),i=Number(Ni[3]);(e>6||6===e&&t>5||6===e&&5===t&&i>=3)&&(Li=!0)}const Oi={tagName:"mp-wxaproduct",isWechat:($.isAndroid||$.isIOS)&&$.isWechat&&!$.isWxWork,isPcWechat:$.isWindowsWechat||$.isMacWechat,screen_height:j.getInnerHeight(),canJumpOnTap:Li,commonReportData:{},minishopDom:[],appmsgType:1*window.appmsg_type||9},Mi=(e={})=>{const t=e.dom,i=e.minishopInfo;re.on(t,"tap",(function(e){e.stopPropagation(),e.preventDefault(),D.report(22042,Object.assign({},Oi.commonReportData,{ActionType:2,toWxaAppId:i.appid,CardType:"large"===i.cardtype?1:0,ProductId:i.productId,isMassSend:Oi.appmsgType})),((e={})=>{Oi.isWechat||Oi.isPcWechat?Oi.canJumpOnTap?Q.jumpUrl({options:{userName:e.username,scene:1058,sceneNote:encodeURIComponent(location.href),relativeURL:e.path},beforeJumpBackupPage:function(){},onJsapiCallback:function(e){"openWeApp:ok"===e.err_msg||console.error(e.err_msg)}}):console.log("cant jumpOnTap"):new K({msg:"请使用微信打开。"})})(i)}),!0),re.on(t,"click",(e=>{e.preventDefault(),e.stopPropagation()}),!0)},zi=()=>{for(let e=0;e<Oi.minishopDom.length;e++){const t=Oi.minishopDom[e];if(1*t.getAttribute("data-hasreport")!=1){const e=document.documentElement.scrollTop||document.body.scrollTop,i=t.getAttribute("data-wxaproduct-productid")||"0",o=t.getAttribute("data-wxaproduct-appid")||"",n=t.getAttribute("data-wxaproduct-cardtype")||"mini";t.clientHeight+t.offsetTop>=e+t.clientHeight/2&&t.clientHeight+t.offsetTop<=e+t.clientHeight/2+Oi.screen_height&&(t.setAttribute("data-hasreport",1),D.report(22042,Object.assign({},Oi.commonReportData,{ActionType:1,toWxaAppId:o,CardType:"large"===n?1:0,ProductId:i,isMassSend:Oi.appmsgType})))}}};re.on(window,"scroll",zi);const Wi=(e={})=>{if(e.node&&e.data&&e.data.headimg){const t=function(e){const t=e.node,i=e.data;return function(){const e=document.createElement("div");e.innerHTML=Me.tmpl('<# if(cardtype === \'mini\') {#>\n<div role="button" class="appmsg_card_context wx_tap_card minishop_card minishop_card_small js_wx_tap_highlight" data-wxaproduct-productid="<#=productId#>" data-wxaproduct-appid="<#=appid#>" data-wxaproduct-cardtype="<#=cardtype#>">\n  <div class="minishop_card_hd">\n    <i aria-label="商品，" class="minishop_card_thumb" style="background-image:url(<#=headimg#>);"></i>\n  </div>\n  <div class="minishop_card_bd">\n    <div class="minishop_main_context">\n      <strong class="minishop_card_title"><#=title#></strong>\n      <# if(avatar && nickname) { #>\n      <div class="minishop_card_profile weui-flex">\n        <img class="minishop_card_profile_avatar" src="<#=avatar#>" alt="">\n        <strong class="minishop_card_profile_nickname"><#=nickname#></strong>\n      </div>\n      <# } #>\n    </div>\n    <div class="minishop_extra_context weui-flex">\n      <em class="minishop_card_price"><#=price#></em>\n      <button class="weui-btn weui-btn_xmini minishop_card_buy_btn" type="button"><i class="icon_minishop_card_buy"></i>购买</button>\n    </div>\n  </div>\n</div>\n<#} else { #>\n<div role="button" class="appmsg_card_context wx_tap_card minishop_card minishop_card_large js_wx_tap_highlight" data-wxaproduct-productid="<#=productId#>" data-wxaproduct-appid="<#=appid#>" data-wxaproduct-cardtype="<#=cardtype#>">\n  <div class="minishop_card_hd">\n    <i aria-label="商品，" class="minishop_card_thumb" style="background-image:url(<#=headimg#>);"></i>\n  </div>\n  <div class="minishop_card_bd weui-flex__item">\n    <div class="minishop_main_context">\n      <strong class="minishop_card_title"><#=title#></strong>\n      <# if(avatar && nickname) { #>\n      <div class="minishop_card_profile weui-flex">\n        <img class="minishop_card_profile_avatar" src="<#=avatar#>" alt="">\n        <strong class="minishop_card_profile_nickname"><#=nickname#></strong>\n      </div>\n      <# } #>\n    </div>\n    <div class="minishop_extra_context weui-flex">\n      <em class="minishop_card_price"><#=price#></em>\n      <button class="weui-btn weui-btn_xmini minishop_card_buy_btn" type="button"><i class="icon_minishop_card_buy"></i>购买</button>\n    </div>\n  </div>\n</div>\n<# } #>',i,!0).replace(/>\s*</g,"><").replace(/^\s+/,"").replace(/\s+$/,"");const o=e.firstChild;t.parentNode.insertBefore(o,t.nextSibling);const n=t.parentNode.querySelector('[data-preloadingid="'+i.productId+'"]');n&&n.parentNode.removeChild(n),Mi({dom:o,minishopInfo:i}),Oi.minishopDom.push(o),zi()}}(e),i=function(){this.onload=null,this.onerror=null,t()},o=new Image;o.onload=i,o.onerror=i,o.src=e.data.headimg}},qi=e=>{P({url:"/mp/wapwxaproduct?action=batch_get_product&product_ids=".concat(JSON.stringify({list:e})),type:"GET",dataType:"json",success(e){e&&e.base_resp&&1*e.base_resp.ret==0&&"[object Array]"===Object.prototype.toString.call(e.product_list)&&((e=[])=>{const t=document.querySelectorAll(Oi.tagName);for(let i=0,o=t.length;i<o;i++){const o=t[i],n=decodeURIComponent(o.getAttribute("data-wxaproduct-productid")||""),a=e.find((e=>e.product_id===n))||{},s={productId:n,title:o.getAttribute("data-wxaproduct-title")||"",price:decodeURIComponent(o.getAttribute("data-wxaproduct-price")||""),headimg:decodeURIComponent(o.getAttribute("data-wxaproduct-headimg")||""),cardtype:decodeURIComponent(o.getAttribute("data-wxaproduct-cardtype")||""),avatar:a.avatar||"",nickname:a.nickname||"",appid:a.appid||decodeURIComponent(o.getAttribute("data-wxaproduct-appid")||""),path:a.path||"",username:a.username||""};Wi({data:s,node:o})}})(e.product_list)},error(t){Oi.retry?(Oi.retry--,qi(e)):console.error(t)}})},Ui=(e={})=>{e.minishopCards&&(Oi.commonReportData={BizUin:1*ze(e.biz),MsgId:window.parseInt(e.mid,10)||0,ItemIdx:window.parseInt(e.idx,10)||0,Scene:window.parseInt(e.source,10)||0,SubScene:window.parseInt(e.subscene,10)||0,EnterId:window.parseInt(e.enterid,10)||0},qi(e.minishopCards.list),zi())},Hi='<span class="qa__card js_qa_card_inner">\n  <# if (qaDeleted) { #>\n    <span class="qa__card-deleted">讨论内容已被删除</span>\n  <# } else { #>\n    <span>\n      <span class="qa__card-hd">\n        <span class="qa__hd-notice"><#=nickname#> 发起了一个读者讨论</span>\n        <span class="qa__hd-question"><#==title#></span>\n      </span>\n      <# if (!answerCount) { #>\n        <# if (isLogin) { #>\n          \x3c!-- <# if (disableAnswerWord) { #>\n            <span class="qa__list-answer qa__list-answer_desc"><#=disableAnswerWord#></span>\n          <# } else { #>\n            <span class="qa__list-answer js_qa_write_answer">参与讨论</span>\n          <# } #> --\x3e\n          <span class="qa__list-answer qa__list-answer_desc">讨论已结束</span>\n        <# } #>\n      <# } else { #>\n        <span>\n          <span class="qa__list-hd">\n            <span class="qa__list-hd-title js_qa_list_head_title">精选讨论内容</span>\n            \x3c!-- <# if (isLogin) { #>\n              <# if (disableAnswerWord) { #>\n                <span class="qa__list-hd-desc"><#=disableAnswerWord#></span>\n              <# } else { #>\n                <span class="qa__list-hd-action js_qa_write_answer">参与讨论</span>\n              <# } #>\n            <# } #> --\x3e\n          </span>\n          <span class="qa__list js_qa_qna_answer_list"><#==answerListStr#></span>\n          <# if (leftAnswerCnt) { #>\n            <p class="qa__list-more js_more_answer_entry" data-count="<#=answerCount#>"><#=leftAnswerCnt#></p>\n          <# } #>\n        </span>\n      <# } #>\n    </span>\n  <# } #>\n</span>',Fi='<div class="qa__list-item js_qa_list_item">\n  \x3c!-- 层主头像 --\x3e\n  <section class="qa__item-avatar">\n    <img src="<#=user_info.headimg#>">\n  </section>\n  <section class="qa__item-bd">\n    <div class="qa__item-info">\n      \x3c!-- 层主昵称 --\x3e\n      <div class="qa__item-nickname">\n        <#=user_info.nickname#>\n      </div>\n      \x3c!-- 点赞 --\x3e\n      <div class="qa__item-action">\n        \x3c!-- span加praised点赞 --\x3e\n        <# if (is_my_answer && canOp) { #>\n          <div class="qa__action js_delete_answer" data-id="<#=answer_id#>"><i class="icon_delete"></i></div>\n        <# } #>\n        \x3c!-- 精选之后的才能点赞 --\x3e\n        <# if (answer_status && isLogin) { #>\n          <div class="qa__action qa__action-praise js_qa_like<# if (my_like_status) { #> praised<# } #>" data-type="1" data-id="<#=answer_id#>">\n            <i class="icon_praise_gray"></i>\n            <span class="js_like_num" data-num="<#=like_num#>">\n              <#=likeNumFormated#>\n            </span>\n          </div>\n        <# } #>\n        <# if (!answer_status) { #>\n          <div class="qa__action qa__action_normal">未精选</div>\n        <# } #>\n      </div>\n    </div>\n\n    \x3c!-- 回答内容 --\x3e\n    <p class="qa__item-content js_qa_item_content"><#=content#></p>\n    \x3c!-- <# if (is_my_answer && canOp) { #>\n    <div class="qa__action qa__action-reply js_write_reply" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>" <# if (replyListHtml) { #>style="display: none;"<# } #>><span>回复</span></div>\n    <# } #> --\x3e\n\n    \x3c!-- 回复 --\x3e\n    <section class="qa__reply">\n      <section class="js_qa_reply_list js_qa_reply_list_<#=answer_id#>">\n        <#=replyListHtml#>\n      </section>\n      <# if (replyListHtml && leftReplyCount) { #>\n        <p class="qa__reply-more js_get_more_reply js_get_more_reply_<#=answer_id#>" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>">\n          <#=leftReplyTips#>\n        </p>\n      <# } #>\n      \x3c!-- <# if (is_my_answer && canOp) { #>\n      <div class="qa__action qa__action-reply js_write_reply" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>" <# if (!replyListHtml) { #>style="display: none;"<# } #>><span>回复</span></div>\n      <# } #> --\x3e\n    </section>\n  </section>\n</div>',Vi='<section class="qa__reply-item js_qa_reply_item<# if (is_my_reply) { #> js_qa_my_reply<# } #>">\n  <div class="qa__reply-hd">\n    <div class="qa__reply-nickname">\n      <# if (is_biz_reply) { #>\n        作者\n      <# } else { #>\n        <#=user_info.nickname#>\n      <# } #>\n    </div>\n    <div class="qa__item-action">\n      <# if (is_my_reply && canOp) { #>\n        <div class="qa__action js_delete_reply" data-id="<#=reply_id#>"><i class="icon_delete"></i></div>\n      <# } #>\n      \x3c!-- 精选之后的才能点赞 --\x3e\n      <# if (replyStatus && isLogin) { #>\n        <div class="qa__action qa__action-praise js_qa_like<# if (my_like_status) { #> praised<# } #>" data-type="2" data-id="<#=reply_id#>">\n          <i class="icon_praise_gray"></i>\n          <span class="js_like_num" data-num="<#=like_num#>">\n            <#=likeNumFormated#>\n          </span>\n        </div>\n      <# } #>\n      <# if (!replyStatus) { #>\n        <div class="qa__action qa__action_normal">未精选</div>\n      <# } #>\n    </div>\n  </div>\n  <p class="qa__reply-content js_qa_reply_content"><#=content#></p>\n</section>',Ji='<div class="qa__modal-reply">\n  <div class="qa__modal-reply-msg js_reply_top_content"></div>\n  <div class="frm_textarea_box_wrp">\n    <span class="frm_textarea_box" style="position: relative; display: block;">\n      <div style="position: relative; height: 9.6em; overflow: hidden; font-size: 17px;">\n        <textarea class="frm_textarea js_qa_input" placeholder="内容被公众号精选后，将对所有人可见。" style="height: 9.6em; width: 100%; border: none; outline: none;"></textarea>\n      </div>\n      <div class="emotion_tool">\n        <span class="emotion_switch" style="display:none;"></span>\n        <span id="js_qa_emotion_switch" class="pic_emotion_switch_wrp">\n          <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n          <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n          <img class="pic_default_primary" src="<#=window.icon_emotion_switch_primary#>" alt="">\n          <img class="pic_active_primary" src="<#=window.icon_emotion_switch_active_primary#>" alt="">\n        </span>\n      </div>\n    </span>\n  </div>\n  <div class="emotion_panel" id="js_qa_emotion_panel">\n    <span class="emotion_panel_arrow_wrp" id="js_qa_emotion_panel_arrow_wrp">\n      <i class="emotion_panel_arrow arrow_out"></i>\n      <i class="emotion_panel_arrow arrow_in"></i>\n    </span>\n    <div class="emotion_list_wrp" id="js_qa_emotion_slide_wrapper"></div>\n    <ul class="emotion_navs" id="js_qa_emotion_navbar"></ul>\n  </div>\n</div>\n<div class="qa__list-wrp">\n  <div class="qa__list-hd js_qa_write_head" style="display: none;">\n    <span class="qa__list-hd-title">我的讨论内容</span>\n  </div>\n  <div class="qa__list js_qa_qna_answer_list"></div>\n</div>\n\n<div class="js_loading_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-loading weui-icon_toast"></i>\n    <p class="weui-toast__content js_loading_content">正在加载</p>\n  </div>\n</div>\n\n<div class="js_sended_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-icon-success-no-circle weui-icon_toast"></i>\n    <p class="weui-toast__content" id="js_toast_msg">已发送</p>\n  </div>\n</div>\n\n<div class="qa__toast-alert js_alert_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class=" qa__icon-alert"></i>\n    <p class="weui-toast__content js_alert_toast_word"></p>\n  </div>\n</div>';function $i(e,t,i=0){return e.getElementsByClassName(t)[i]}const Gi=document.getElementsByTagName("mp-qa")[0];let Ki,Qi,Yi,Xi,Zi,eo;const to={};let io,oo,no,ao,so=0,ro=0,co=0,lo="";const po=10,mo="answerList",_o="myAnswerList",uo="praised",ho="modalWriteAnswerClass",wo="25px",go={__biz:Gi&&Gi.dataset.bizuin,question_id:Gi&&Gi.dataset.id,qna_sn:Gi&&function(e){let t;if(window.qnaCardData)try{t=JSON.parse(window.qnaCardData);const i=t.list;if(i&&i.length)for(let t=0;t<i.length;t++)if(e===i[t].question_id)return i[t].qna_sn}catch(i){console.error(i)}return""}(Gi.dataset.id)},fo={};function yo(e){e&&(e.style.display="none")}function vo(e){e&&(e.style.display="block")}function bo(e,t){de.jsmonitor({id:223326,key:e,value:t})}function xo(){window.weui.topTips("系统错误，请稍后再试")}function ko(e={}){D.report(20883,Object.assign({Device:q.os.ios?1:q.os.android?2:-1,MsgId:1*go.mid,ItemIdx:1*go.idx,BizUin:to.biz,ItemShowType:1*to.itemShowType,SessionId:to.sessionId,EnterId:1*to.enterId,Scene:1*to.scene,SubScene:1*to.subScene,QaId:Gi.dataset.id},e))}function Io(e,t,i){const o={replyListHtml:"",replyList:document.createDocumentFragment()};return e&&e.reply_list&&e.reply_list.length&&(o.leftReplyCount=e.left_reply_cnt,o.leftReplyTips="余下#value#条回复".replace("#value#",e.left_reply_cnt),e.reply_list.forEach((e=>{e.canOp=i,e.content=e.content.htmlEncode(),e.content=v.encode(e.content),e.likeNumFormated=We.formatReadNum(e.like_num),e.replyStatus=void 0===e.reply_status?1:e.reply_status,e.isLogin=Ki;const t=document.createElement("div");t.innerHTML=Me.tmpl(Vi,e,!1),o.replyListHtml+=t.innerHTML,o.replyList.appendChild(t.firstChild)}))),o}function So(e,t,i=""){const o={answerListHtml:"",fragment:document.createDocumentFragment()};return e.forEach((e=>{e.likeNumFormated=We.formatReadNum(e.like_num),e.canOp=t,e.answer_sn=e.answer_sn||"",e.content=e.content.htmlEncode(),e.oriContent=e.content,e.content=v.encode(e.content),e.isLogin=Ki;const i=Io(e.reply_info,e.answer_id,t);Object.assign(e,i);const n=document.createElement("div");n.innerHTML=Me.tmpl(Fi,e,!1),o.answerListHtml+=n.innerHTML,o.fragment.appendChild(n.firstChild)})),i===_o?ro+=po:i===mo&&(so+=po),o}function Ao(e={}){const t=Object.assign({action:e.action,limit:po,offset:e.offset},go);P({url:B.join("/mp/qna",t),dataType:"json",success(t){let i;t&&(i=t.qna_info?t.qna_info.answer_info:t.answer_info,e.successCb(i,t))},complete(){e.complete&&e.complete()}})}function To(e,t){let i=0;for(;e.offsetParent&&e!==t;)i+=e.offsetTop,e=e.offsetParent;return i}function Co(e,t,i){const o=e.dataset.answerid,n=i?To(e,Yi.getScrollEle()):0;P({url:B.join("/mp/qna",Object.assign({action:"get_more_reply",answer_id:o,answer_sn:e.dataset.answersn,limit:10},go)),dataType:"json",success(t){if(t&&t.reply_info&&t.reply_info.reply_list&&t.reply_info.reply_list.length){const o=Io(t.reply_info,0,!0);o.replyListHtml?($i(e.parentNode,"js_qa_reply_list").appendChild(o.replyList),o.leftReplyCount?e.innerHTML=o.leftReplyTips:yo(e),i&&Yi.scrollTo(0,n-48)):yo(e)}}})}function Eo(e){const t=$i(Xi,"js_get_more_reply_".concat(e));t&&Co(t,0,!0)}function Ro(){return $i(eo,"js_qa_input")}function Po(){const e=Ro();return(e.value||e.innerHTML).trim()}function jo(){Po()?Zi.enableBtn():Zi.disableBtn()}function Do(e={}){Ao({action:e.action,offset:e.offset,successCb(t,i){if(t&&t.answer_list&&t.answer_list.length){let i,o;"get_my_answer"===e.action?(i=_o,o=eo,vo($i(eo,"js_qa_write_head"))):(i=mo,o=Xi);$i(o,"js_qa_qna_answer_list").appendChild(So(t.answer_list,!0,i).fragment)}e.cb&&e.cb(t,i)}})}function Bo(){if(!eo)return;const e="回复: #value#".replace("#value#",v.encode(lo)),t=$i(eo,"js_reply_top_content");io?(t.innerHTML=e,vo(t)):yo(t)}function Lo(e){$i(eo,"js_alert_toast_word").innerHTML=e,vo($i(eo,"js_alert_toast")),setTimeout((()=>{yo($i(eo,"js_alert_toast"))}),800)}function No(){let e=0;const t=Xi.getElementsByClassName("js_qa_list_item");for(let i=0;i<t.length&&t[i].getBoundingClientRect().y<j.getInnerHeight();i++)e++;e>co&&(co=e)}function Oo(e,t){if(Yi)return Yi.show(),void(e&&t&&Eo(t));let i;Xi=Gi.firstChild.cloneNode(!0);const o=$i(Xi,"qa__list-more"),n=$i(Xi,"js_qa_write_answer");o&&yo(o),n&&J.addClass(n,ho),$i(Xi,"js_qa_qna_answer_list").innerHTML="",Yi=new Ue(Xi,{title:"读者讨论",extClass:"qa__card",onPullUpLoad(){i>0&&(Yi.showPullUpLoading(),Do({action:"get_more_answer",offset:so,cb(e,t){Yi.hidePullUpLoading(),e.left_answer_cnt||0!==t.base_resp.ret?Yi.finishPullUpLoad():Yi.showEndLine()}}))},cb(){Do({action:"get_more_answer",offset:so,cb(o){if(e&&t)Eo(t);else{const e=Qi.dataset.count,t=To($i(Xi,"js_qa_list_item",e),Yi.getScrollEle());Yi.scrollTo(0,t-96)}i=o.left_answer_cnt,i||Yi.showEndLine()}})},onScroll(){No()},onHide(){No(),ko({EventType:3,Exposure:co}),co=0}}),Yi.show(),re.on(Xi,"tap",".js_get_more_reply",(e=>{Co(e.delegatedTarget)}))}function Mo(e){let t;const i=io?"写回复":"参与讨论";if(Zi)return Bo(),Zi.setTitle(i),e?Zi.setCloseBtnStyle("back"):Zi.setCloseBtnStyle("close"),void Zi.show(!0,Ro());eo=document.createElement("div"),eo.innerHTML=Me.tmpl(Ji,{}),Zi=new Ue(eo,{title:i,top:wo,extClass:"qa__card qa__card_write",hasBtn:!0,disableTransition:!0,onPullUpLoad(){t>0&&(Zi.showPullUpLoading(),Do({action:"get_my_answer",offset:ro,cb(e,t){Zi.hidePullUpLoading(),e.left_answer_cnt||0!==t.base_resp.ret?Zi.finishPullUpLoad():Zi.showEndLine()}}))},onHide(){Ro().blur()},onScroll(e){"up"===e&&Ro().blur()},cb(){Do({action:"get_my_answer",offset:ro,cb(e){t=e.left_answer_cnt,t||Zi.showEndLine()}})},btnClickCb(){Zi.disableBtn();const e=io?"add_reply":"add_answer";vo($i(eo,"js_loading_toast")),P({url:"/mp/qna?action=".concat(e),type:"POST",dataType:"json",data:Object.assign({answer_id:no,answer_sn:ao,content:Po(),my_reply_cnt:oo+1,ignore_tips:1},go),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){if(vo($i(eo,"js_sended_toast")),setTimeout((()=>{yo($i(eo,"js_sended_toast"))}),800),Ro().value="",Zi.disableBtn(),io&&e.reply_info&&e.reply_info.reply_list){const t=Io(e.reply_info,0,!0).replyList,i=$i(eo,"js_qa_reply_list_".concat(no));i.appendChild(t.cloneNode(!0)),vo($i(i.parentNode,"js_write_reply")),yo($i(i.parentNode.parentNode,"js_write_reply"))}else if(!io&&e.answer_info&&e.answer_info.answer_list){const t=$i(eo,"js_qa_qna_answer_list");t.insertBefore(So(e.answer_info.answer_list,!0).fragment,t.firstChild),vo($i(eo,"js_qa_write_head"))}}else Zi.enableBtn(),168003===e.base_resp.ret||168007===e.base_resp.ret?Lo("内容涉嫌违反平台协议或法规政策"):168004===e.base_resp.ret?Lo("关注该公众号才能参与讨论"):168005===e.base_resp.ret?Lo("关注该公众号3天及以上才能参与讨论"):168008===e.base_resp.ret||168009===e.base_resp.ret?Lo("字数不能多于"+(io?140:600)):xo()},error(){xo(),Zi.enableBtn()},complete(){yo($i(eo,"js_loading_toast")),Ro().blur()}})},makeFakeInputEle(){const e=Ro(),t=e.cloneNode();t.id="tmp_input",t.style.top=0,t.style.position="absolute",e.parentNode.insertBefore(t,e),t.value=e.value,t.scrollTop=e.scrollTop},removeInputEle(){const e=document.getElementById("tmp_input");e&&e.parentNode.removeChild(e)},makeInputEleBigger(){const e=Ro(),t="1000px";e.style.borderTop="solid ".concat(t," transparent"),e.style.position="relative",e.style.top="-".concat(t)}}),Bo(),Zi.disableBtn(),e?Zi.setCloseBtnStyle("back"):Zi.setCloseBtnStyle("close"),Zi.show(!0,Ro()),function(){const e=Ro();re.on(eo,"tap",".js_get_more_reply",(e=>{Co(e.delegatedTarget)})),re.on(e,"input",jo),re.on(e,"tap",(()=>{Zi.scrollTo(0,0)}))}(),new v.Emotion({emotionPanel:b("#js_qa_emotion_panel"),inputArea:b(Ro()),emotionPanelArrowWrp:b("#js_qa_emotion_panel_arrow_wrp"),emotionSwitcher:b("#js_qa_emotion_switch"),emotionSlideWrapper:b("#js_qa_emotion_slide_wrapper"),emotionNavBar:b("#js_qa_emotion_navbar"),inputEmotion(){jo()}})}const zo={renderQaCard:function(e={}){Gi&&(go.mid=e.mid,go.idx=e.idx,to.userUin=e.userUin,to.biz=e.biz,to.itemShowType=e.itemShowType,to.enterId=e.enterId,to.scene=e.scene,to.subScene=e.subScene,to.sessionId=e.sessionId,Ki=e.isLogin,Ao({action:"get_qna_info",successCb(e,t){let i,o,n,a;const s=t.base_resp.ret,r=168001===s,d=t.qna_info&&t.qna_info.question_info;r?Gi.innerHTML=Me.tmpl(Hi,{qaDeleted:r}):0===s&&("1"===B.getQuery("js_my_answer")&&(Mo(),bo(4)),e&&e.answer_list&&e.answer_list.length&&(n=So(e.answer_list,!1).answerListHtml,o=e.answer_list.length,e.left_answer_cnt&&(i="余下#value#条讨论内容".replace("#value#",e.left_answer_cnt))),1===d.can_answer_type&&0===t.qna_info.is_fans?a="作者已设置关注后才可参与讨论":2===d.can_answer_type&&0===t.qna_info.is_fans_days&&(a="作者已设置关注7天后才可参与讨论"),Gi.innerHTML=Me.tmpl(Hi,{qaDeleted:r,answerCount:o,leftAnswerCnt:i,answerListStr:n,disableAnswerWord:a,title:v.encode(d.question_title.htmlEncode()),nickname:d.biz_info.nickname,isLogin:Ki}),Qi=$i(Gi,"js_more_answer_entry"),function(){let e;function t(){if(e)return;const t=Gi.firstChild,i=ce.getOffset(t).offsetTop,o=j.getScrollTop();o+j.getInnerHeight()>=i&&o<=i+t.offsetHeight&&(ko({EventType:1}),bo("0"),e=!0)}re.on(Gi,"tap",".js_get_more_reply",(e=>{const t=e.delegatedTarget.dataset.answerid;fo[t]?Oo():(Oo(!0,t),fo[t]=!0)})),re.on(document.body,"click",".js_qa_write_answer",(e=>{io=!1,Mo(J.hasClass(e.delegatedTarget,ho)),bo(2)})),re.on(document.body,"click",".js_write_reply",(e=>{const t=e.delegatedTarget,i=t.parentNode.parentNode;if(no=t.dataset.answerid,ao=t.dataset.answersn,i){const e=i.getElementsByClassName("js_qa_reply_content");oo=i.getElementsByClassName("js_qa_my_reply").length,lo=e.length?e[e.length-1].innerHTML:$i(i,"js_qa_item_content").innerHTML}io=no,io&&(Mo(!0),bo(3))})),re.on(Qi,"click",(()=>{Oo(),ko({EventType:2}),bo(1)})),re.on(document.body,"tap",".js_qa_like",(e=>{const t=e.delegatedTarget,i=J.hasClass(t,uo);J.toggleClass(t,uo);const o=$i(t,"js_like_num");let n=(parseInt(o.dataset.num,10)||0)+(i?-1:1);n=n>=0?n:0,o.innerHTML=We.formatReadNum(n),o.dataset.num=n,bo("2"===t.dataset.type?6:5),P({url:"/mp/qna?action=like",type:"POST",data:Object.assign({like_type:t.dataset.type,op:i?2:1,answer_id:t.dataset.id,reply_id:t.dataset.id},go)})})),re.on(document.body,"tap",".js_delete_answer",(e=>{const t=e.delegatedTarget;bo(7),setTimeout((()=>{window.weui.confirm("确定删除讨论内容吗？",{buttons:[{label:"取消",type:"default"},{label:"删除",type:"primary",onClick(){P({url:"/mp/qna?action=del_answer",type:"POST",dataType:"json",data:Object.assign({answer_id:t.dataset.id},go),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){const e=t.parentNode.parentNode.parentNode.parentNode;e&&J.hasClass(e,"js_qa_list_item")&&e.parentNode.removeChild(e)}else xo()}})}}]})}),50)})),re.on(document.body,"tap",".js_delete_reply",(e=>{const t=e.delegatedTarget;bo(8),setTimeout((()=>{window.weui.confirm("确定删除回复吗？",{buttons:[{label:"取消",type:"default"},{label:"删除",type:"primary",onClick(){P({url:"/mp/qna?action=del_reply",type:"POST",dataType:"json",data:Object.assign({reply_id:t.dataset.id},go),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){const e=t.parentNode.parentNode.parentNode;if(e&&J.hasClass(e,"js_qa_reply_item")){const t=e.parentNode;t.removeChild(e),t.children.length||(yo(t.parentNode),yo($i(t.parentNode,"js_write_reply")),vo($i(t.parentNode.parentNode,"js_write_reply")))}}else xo()}})}}]})}),50)})),j.bindDebounceScrollEvent(t),t()}())}}))}},Wo=function(e,t){let i=!1,o=e;if(e===t)i=!0;else for(;o.parentNode&&(o=o.parentNode,1!==o.nodeType||"body"!==o.tagName.toLowerCase());)if(o===t){i=!0;break}return i},qo=function(e){this.biz=e.biz,this.logid=e.logid,this.baseData=e.baseData,this.isPaySubscribe=e.isPaySubscribe,this.container=e.container,this.totalLength=this.container.innerText.length,this.initEvent()};qo.prototype.initEvent=function(){re.on(document,"copy",(()=>{const e=[].concat(this.baseData),t=this.getContentData().trim();t.length&&(e.push(this.totalLength),e.push(""),e.push(t.length),e.push(this.isPaySubscribe),this.report(e.join(",")))}))},qo.prototype.getContentData=function(){const e=document.getSelection(),t=this.container;let i="";if(e&&e.rangeCount){const o=e.getRangeAt(0);if(!o.collapsed){const n=o.startContainer,a=o.startOffset,s=o.endContainer,r=o.endOffset,d=Wo(n,t),c=Wo(s,t);if(d&&c)i=o.toString();else if(d||c){const e=document.createRange();e.setStart(n,a),e.setEnd(s,r),!c&&e.setEndAfter(t),!d&&e.setStartBefore(t),i=e.toString()}else if(e.containsNode&&e.containsNode(t,!0)){const e=document.createRange();e.setEndAfter(t),e.setStartBefore(t),i=e.toString()}}}return i},qo.prototype.report=function(e){const t=this.biz,i=this.logid;P({url:"/mp/webcommreport?action=report&report_useruin=1&__biz="+t,type:"POST",data:{logid:i,buffer:e},async:!1,timeout:2e3})};let Uo=null;if(window.parent!==window){let e=function(e){let t;console.log("[IFRAME RECEIVE MESSAGE]: ",e),e.origin?t=e.origin:e.originalEvent&&(t=e.originalEvent.origin),/^http(s)?\:\/\/finance\.qq\.com$/.test(t)&&/^http(s)?\:\/\/gu\.qq\.com$/.test(t)&&/^http(s)?\:\/\/wzq\.tenpay\.com$/.test(t)&&e.source&&(e.data,document.getElementsByTagName("body")[0],document.getElementById("activity-name"),document.getElementById("meta_content"),document.getElementById("page-content"))};document.getElementsByTagName("html")[0].style.width="1px",document.getElementsByTagName("html")[0].style.minWidth="100%",document.getElementById("js_content"),document.getElementById("img-content");let t=document.getElementById("page-content");document.getElementsByClassName("rich_media_area_extra")[0].style.display="none",Uo=function(e){if(!t)return;console.info("postPageHeightMessage");let i=getComputedStyle(t);["http://finance.qq.com","https://finance.qq.com","http://gu.qq.com","https://gu.qq.com","https://wzq.tenpay.com","https://www.tentrees.cn/","https://sticker.weixin.qq.com"].forEach((t=>{window.parent.postMessage({name:e,data:parseFloat(i.height)},t)}))},Uo("pageHeight"),window.addEventListener("message",e,!1)}const Ho=Uo,Fo={copyright_top:0};function Vo(e){let t=["/mp/copyrightreport?action=report&biz=",biz,"&scene=",e.scene,"&user_uin=",user_uin,"&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&mid=",window.mid,"&idx=",window.idx,"&source_biz=",window.source_biz,"&source_mid=",window.source_mid,"&source_idx=",window.source_idx,"&card_version=2","&show_appmsg_scene=",window.source,"&session_id=",window.sessionid,"&has_recommend_msg=",window.hasRecommendMsg,"&reprint_type=",window.reprint_type,"&t=",Math.random()].join("");window.isSg&&(t+="&from=sougou"),(new Image).src=t.substr(0,1024)}function Jo(){(window.pageYOffset||document.documentElement.scrollTop)+j.getInnerHeight()>Fo.copyright_top&&(Vo({scene:"1",card_pos:"0"}),re.off(window,"scroll",Jo),Jo=Fo.copyright_top=null)}function $o(e){return document.getElementById(e)}const Go={card_click_report:Vo,card_pv_report:function(){if("2"==__appmsgCgiData.copyright_stat){let e=$o("copyright_info"),t=$o("js_article");for(;e&&t!==e;)Fo.copyright_top+=e.offsetTop,e=e.offsetParent;re.on(window,"scroll",Jo),Jo()}}},Ko=document.getElementById("js_tags_preview_toast");let Qo=null;const Yo={init(e){if(1===window.reprint_style||2===window.reprint_style||3===window.reprint_style||1*e.dataset.len==0)return;const t=e=>{if(window.is_temp_url)Ko&&(Ko.style.display="",Qo&&clearTimeout(Qo),Qo=setTimeout((()=>{Ko.style.display="none",Qo=null}),3e3));else{const t={};let i=e.url;t.scene=window.source,t.subscene=window.subscene,t.sessionid=window.sessionid,t.enterid=window.enterid;let o=0;window.isPayTopic&&(o=0===window.isPaid?1:2),ut({eventType:2,albumId:e.album_id,albumType:0,tagSrc:e.tag_source,canPaid:window.isPayTopic,price:window.isPayTopic?window.payTopicPrice:0,ifPaid:o}),te.goUrl(i,Object.assign({},t,{scene:173,from_msgid:window.mid,from_itemidx:window.idx,count:3,nolastread:1}))}};if(J.hasClass(e,"js_single")){const i=e.querySelector(".js_tag").dataset;re.on(e,"click",(()=>t(i)))}else re.on(e,"click",(i=>{let o=i.target;o&&o!==e&&!J.hasClass(o,"js_tag")&&(o=o.parentNode),o&&J.hasClass(o,"js_tag")&&t(o.dataset)}));const i=t=>{const o=j.getInnerHeight()+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop);e.offsetTop<o?("function"!=typeof t&&re.off(window,"scroll",i),Array.prototype.forEach.call(e.getElementsByClassName("js_tag"),(e=>{const t=e.dataset;let i=0;window.isPayTopic&&(i=0===window.isPaid?1:2),ut({eventType:1,albumId:t.album_id,albumType:0,tagSrc:t.tag_source,canPaid:window.isPayTopic,price:window.isPayTopic?window.payTopicPrice:0,ifPaid:i})}))):"function"==typeof t&&t()};i((()=>{re.on(window,"scroll",i)}))}};const Xo=ht({name:"mp-album",filters:{htmlDecode:e=>"".concat(e).html(!1)},props:{albumTags:{type:Array,default:()=>[]}},computed:{showAlbum(){return this.albumTags.length>0}},mounted(){Yo.init(this.$refs.albumArea)}},(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showAlbum,expression:"showAlbum"}],ref:"albumArea",staticClass:"article-tag__list",attrs:{"data-len":e.albumTags.length}},[t("div",{staticClass:"article-tags"},e._l(e.albumTags,(function(i,o){return t("div",{key:o,staticClass:"article-tag__item-wrp js_tag weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{"data-url":i.link.htmlDecode()||"/mp/publictag?action=get&tag_id=".concat(i.tagId,"&start=0"),"data-tag_id":i.tagId,"data-album_id":i.albumId,"data-tag_source":i.tagSource,role:"link",tabindex:"0"}},[t("span",{staticClass:"article-tag__item"},[t("i",{staticClass:"weui-icon-album"}),e._v(e._s(e._f("htmlDecode")(i.title)))]),i.size>0?t("span",{staticClass:"article-tag__item-num"},[t("span",{attrs:{id:""}},[e._v(e._s(i.size))])]):e._e()])})),0)])}),[],!1,null,null,null,null).exports;G.call("hideToolbar"),G.call("showOptionMenu");const Zo=[2390745668,3099420829,3872121626,3203738065,3072206507,3566970574,3002803029,3099387730,3559965496,3525314097,2390323860,3084276724,3289028514,3003793452,3003972371,2398512110,3071748654,3233018348,3095049467,3076061592,3273032305,3264278949,3086344434,3014829842,3294546013,2058310401,2397841479,2397640820,3282179238,3072107639,3521076442,3554888231,2397274880,2394106525,3077726226,2103095721,3593723769,2395186785,2393698643,3944000110,2397445840,2394144447,3082139483,3070806332,3016714421,3006879186,3213574124,3221398587,3078448935,3591999034,3551390431],en=["testrd","otherrd"],tn="https://res.wx.qq.com/op_res/Fwh9olR917lxUMxpJVM5sCCyrQOJSm68IEt-HfL7vpc5-_etzmyuLg1kPdU6RNRX",on="";let nn={report_action:2,share_type:5},an=0;try{an=1*window.atob(window.biz)}catch(Pd){}let rn=msg_title.htmlDecode(),dn=cdn_url_1_1||msg_cdn_url||ori_head_img_url||round_head_img,cn=dn,ln=msg_link.htmlDecode(),pn=msg_desc.htmlDecode();pn=pn||" ",pn=pn.replace(/<br\/>/g,"\n"),idx>1&&document.getElementById("js_content")&&ct<1446652800&&(pn=document.getElementById("js_content").innerHTML.replace(/<\/?[^>]*\/?>/g,"").htmlDecode().replace(/^(\s*)|(\s*)$/g,"").substr(0,54)),window.isPayTopic&&(pn="收录于付费合集"+window.payTopicTitle||""),dn=dn.compressCDNImgSize(),cn=cn.compressCDNImgSize(),malicious_title_reason_id&&(rn=d.maliciousTitleMap[malicious_content_type][malicious_title_reason_id]||rn,pn=d.maliciousDescMap[malicious_content_type][malicious_title_reason_id]||pn,1!=malicious_content_type&&(dn="https://mmbiz.qlogo.cn/mmbiz_png/cVgP5bCElFiayFgbgEB9iaDt7hLicfz9RrXGM0LpaQ0TUic2gP7lbbqU3jCD8ibonicgIa3p99yjx1f1P26HChraeRUg/0?wx_fmt=png")),("1"==is_limit_user||window.cps_article_data)&&G.call("hideOptionMenu"),window.is_temp_url&&G.invoke("hideMenuItems",{menuList:[...[1,2].indexOf(+B.getQuery("previewtype"))>-1?["menuItem:share:appMessage"]:[],"menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:qzone","menuitem:share:weibo","menuItem:share:WeiboApp","menuItem:share:QZone","menuitem:facebook","menuItem:copyUrl","menuItem:share:email","menuitem:copy_url","menuitem:share:haokan"]},(function(e){}));const mn=(e,t,o)=>{let n="",a="";try{window.tid&&(a="tid=".concat(window.tid,"&aid=54"));let s=(e.split("?")[1]||"").split("#")[0];if(s){const r=[s,"mpshare=1","scene=".concat(t),"srcid=".concat(window.srcid),"sharer_shareinfo=".concat(o)],d=B.getQuery("sharer_shareinfo_first")||B.getQuery("sharer_shareinfo");if(r.push("sharer_shareinfo_first=".concat(d||o)),""!==a&&r.push(a),(1===window.hitProduct||[2,3].includes(i.state.extRes.show_related_search_word)&&i.state.extRes.support_share_related_search_word)&&(s.split("&").map((e=>"hit_product=1"===e?"":e)).filter((e=>""!==e)).join("&"),r.push("hit_product=1")),s=r.join("&"),2===t&&Zo&&Zo.indexOf(an)>-1){const t=Math.floor(Math.random()*en.length),i=en[t];n="".concat(e.split("?")[0],"?").concat(s,"&testtype=").concat(i,"#").concat(e.split("#")[1]||"")}else n="".concat(e.split("?")[0],"?").concat(s,"#").concat(e.split("#")[1]||"")}}catch(Pd){n=""}return n||(n="".concat(location.href,"#wechat_redirect"),R.setLogs({id:28307,key:47,value:1,log:"[share_link][".concat(encodeURIComponent(location.href),"][").concat(encodeURIComponent(e),"][").concat(encodeURIComponent(window.msg_link),"]")})),n},_n=(e,t)=>(e.isCDN()&&(e=B.addWxfrom(e,t)),e),un=(e,t,i,o,n=0)=>{ie.shareReport({link:e,action_type:i,sharer_shareinfo:o,share_source:window.customShareSource||(0===n?1:2)})};function hn(){let e=x(window.user_uin+"_"+Date.now());if(window.is_wash)return{img_url:tn,img_width:"640",img_height:"640",link:mn(ln,2,e),desc:"",title:"原文存在洗稿行为，你可以阅读以下原创作者的内容"};{let t=dn;$.isIOS||(t=_n(dn,"2"));let i={img_url:t,img_width:"640",img_height:"640",link:ln,desc:window.clear_desc_flag?"":pn,title:rn};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(i,window.customShareInfo),"string"==typeof i.forbid_msg){let e=i.forbid_msg.replace("#op#","分享");return void(window.weui||window).alert(e)}return i.link=mn(i.link,2,e),i}}function wn(){const e=function(){let e=x(window.user_uin+"_"+Date.now());if(window.is_wash)return{img_url:tn,img_width:"640",img_height:"640",link:mn(ln,type,e),desc:"你可以阅读以下原创作者的内容",title:"原文存在洗稿行为"};{let t=1,i=_n(dn,"1");1==malicious_content_type&&(i="https://mmbiz.qlogo.cn/mmbiz_png/cVgP5bCElFiayFgbgEB9iaDt7hLicfz9RrXGM0LpaQ0TUic2gP7lbbqU3jCD8ibonicgIa3p99yjx1f1P26HChraeRUg/0?wx_fmt=png");let o={appid:on,img_url:i,img_width:"640",img_height:"640",link:ln,desc:window.clear_desc_flag?"":pn,title:rn};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(o,window.customShareInfo),"string"==typeof o.forbid_msg){let e=o.forbid_msg.replace("#op#","分享");return void(window.weui||window).alert(e)}return o.link=mn(o.link,t,e),o}}();e&&G.invoke("shareCustomContent",{friend:e,timeline:hn()},(t=>{console.info("shareCustomContent res",t);let o=x(window.user_uin+"_"+Date.now());un(ln,0,1,o,2),i.commit("mp-related-article/setSources","share"),e.vid&&(nn=Object.assign(nn,{vid:e.vid,share_type:2}),c.reportKanData(nn)),-1!==((null==t?void 0:t.err_msg)||"").indexOf(":ok")?R.setSum(529503,10,1):(R.setSum(529503,11,1),$.isIOS?R.setSum(529503,12,1):$.isAndroid?R.setSum(529503,13,1):$.isHarmony?R.setSum(529503,14,1):$.isMac?R.setSum(529503,15,1):$.isWindows?R.setSum(529503,16,1):R.setSum(529503,17,1))}))}se.on("shareCustomContent",wn,!0);const gn={"menu:share:appmessage":function(e){var t,o;const n=x("".concat(window.user_uin,"_").concat(Date.now()));let a=1;if(window.is_wash)U({img_url:tn,img_width:"640",img_height:"640",link:mn(ln,a,n),desc:"你可以阅读以下原创作者的内容",title:"原文存在洗稿行为"},(()=>{un(ln,window.fakeid,a,n,e.shareScene)}));else{let s=_n(dn,"1");if(e&&"favorite"==e.scene&&(a=24,s=_n(dn,"4"),i.commit("mp-related-article/setSources",["favorite"]),null==(t=pt)||t.handleAction("kCollect"),$.isWindowsWechat&&"207"===B.getQuery("subscene"))){const e=$.getWindows();if(e&&parseInt(e,16)>=parseInt("0x63090500",16)&&parseInt(e,16)<=parseInt("0x630905FF",16))return void G.invoke("handleMPPageAction",{action:"doFavorite"},(e=>{e.err_msg&&e.err_msg.indexOf("ok")>0?weui.toast("已收藏"):weui.toast("收藏失败")}))}null==(o=pt)||o.handleAction("kShare"),1*window.malicious_content_type==1&&(s="https://mmbiz.qlogo.cn/mmbiz_png/cVgP5bCElFiayFgbgEB9iaDt7hLicfz9RrXGM0LpaQ0TUic2gP7lbbqU3jCD8ibonicgIa3p99yjx1f1P26HChraeRUg/0?wx_fmt=png");const r={appid:on,img_url:s,img_width:"640",img_height:"640",link:ln,desc:window.clear_desc_flag?"":pn,title:rn};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(r,window.customShareInfo),"string"==typeof r.forbid_msg){const t=r.forbid_msg.replace("#op#","favorite"===e.scene?"收藏":"分享");return void(window.weui||window).alert(t)}r.link=mn(r.link,a,n),U(r,(()=>{un(ln,window.fakeid,a,n,0),i.commit("mp-related-article/setSources",[24===a?"favorite":"share"]),r.vid&&(nn=Object.assign(nn,{vid:r.vid,share_type:2}),c.reportKanData(nn))}))}},"menu:share:timeline":function(e){var t;const o=x("".concat(window.user_uin,"_").concat(Date.now()));if(window.is_wash)H({img_url:tn,img_width:"640",img_height:"640",link:mn(ln,2,o),desc:"",title:"原文存在洗稿行为，你可以阅读以下原创作者的内容"},(()=>{un(ln,window.fakeid,2,o,e.shareScene)}));else{let n=dn;$.isIOS||(n=_n(dn,"2"));const a={img_url:n,img_width:"640",img_height:"640",link:ln,desc:window.clear_desc_flag?"":pn,title:rn};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(a,window.customShareInfo),"string"==typeof a.forbid_msg)return(window.weui||window).alert(a.forbid_msg.replace("#op#","分享"));null==(t=pt)||t.handleAction("kShare"),a.link=mn(a.link,2,o),H(a,(t=>{un(ln,window.fakeid,2,o,e.shareScene),i.commit("mp-related-article/setSources",["share"]),a.vid&&(nn=Object.assign(nn,{vid:a.vid,share_type:1}),c.reportKanData(nn)),F&&le.show(t)}))}},"menu:share:weiboApp":function(e){let t=x(window.user_uin+"_"+Date.now());G.invoke("shareWeiboApp",{img_url:dn,link:mn(ln,3,t),title:rn},(function(e){un(ln,fakeid,3,t)}))},"menu:share:facebook":function(e){let t=x(window.user_uin+"_"+Date.now());un(ln,fakeid,7,t),G.invoke("shareFB",{img_url:cn,img_width:"640",img_height:"640",link:mn(ln,43,t),desc:pn,title:rn},(function(e){}))},"menu:share:QZone":function(e){let t=_n(dn,"6"),i=x(window.user_uin+"_"+Date.now());un(ln,fakeid,5,i),G.invoke("shareQZone",{img_url:t,img_width:"640",img_height:"640",link:mn(ln,22,i),desc:pn,title:rn},(function(e){}))},"menu:share:qq":function(e){let t=_n(dn,"7"),i=x(window.user_uin+"_"+Date.now());un(ln,fakeid,5,i),G.invoke("shareQQ",{img_url:t,img_width:"640",img_height:"640",link:mn(ln,23,i),desc:pn,title:rn},(function(e){}))},"menu:share:email":function(){const e=x("".concat(window.user_uin,"_").concat(Date.now()));un(ln,window.fakeid,5,e),G.invoke("sendEmail",{content:mn(ln,5,e),title:rn})},"sys:record":function(e){G.invoke("recordHistory",{link:ln,title:rn,source:nickname,img_url:dn},(function(e){}))}};function fn(){rn=msg_title.htmlDecode(),dn=cdn_url_1_1||msg_cdn_url||ori_head_img_url||round_head_img,cn=dn,ln=msg_link.htmlDecode(),pn=msg_desc.htmlDecode(),pn=pn||" ",pn=pn.replace(/<br\/>/g,"\n"),idx>1&&document.getElementById("js_content")&&ct<1446652800&&(pn=document.getElementById("js_content").innerHTML.replace(/<\/?[^>]*\/?>/g,"").htmlDecode().replace(/^(\s*)|(\s*)$/g,"").substr(0,54)),window.isPayTopic&&(pn="收录于付费合集"+window.payTopicTitle||""),dn=dn.compressCDNImgSize(),cn=cn.compressCDNImgSize(),Object.keys(gn).forEach((e=>{const t=gn[e];G.remove(e,t),G.on(e,t)}))}const yn=ht({name:"mp-pay-btn",props:{buttonText:{type:String,default:"微信豆兑换"}},computed:{...pe(["cgiData"]),...pe("mp-pay-read",["loading","isInMiniProgram"])},methods:{...me("mp-pay-read",["payFunc"])}},(function(){var e=this,t=e._self._c;return t("button",{ref:"payPanelBtn",staticClass:"js_pay_btn js_article_bottom weui-btn weui-btn_loading",class:{btn_disabled:e.isInMiniProgram},on:{click:e.payFunc}},[e.loading?t("div",{staticClass:"js_button_loading"},[e._m(0),e._v(" 加载中 ")]):t("div",[t("i",{staticClass:"pay__icon-wecoin"}),t("span",{staticClass:"price js_pay_fee",attrs:{id:"js_pay_fee_normal"}},[e._v(e._s(e.cgiData.wecoin_amount))]),e._v(" "+e._s(e.buttonText)+" ")])])}),[function(){var e=this._self._c;return e("span",{staticClass:"weui-primary-loading weui-primary-loading_transparent"},[e("i",{staticClass:"weui-primary-loading__dot"})])}],!1,null,null,null,null).exports,vn=8+window.parseInt(window.getComputedStyle(document.documentElement).getPropertyValue("--sab"));let bn=0,xn=0,kn=!1,In=0;const Sn=window.scrollY,An=window.innerHeight/3;const Tn=ht({name:"mp-pay-gift",data:()=>({giftBarTitleText:"可赠送给一位朋友免费阅读"}),computed:{...pe(["cgiData"]),...pe("mp-pay-read",["paySubscribeInfo"])},mounted(){const e=window.localStorage.getItem("paySuc"),t=this.$refs.giftBar.getBoundingClientRect().top;"1"===e&&t>window.innerHeight?(window.localStorage.setItem("paySuc","0"),this.$refs.giftBar.className="pay__gift-send show",this.giftBarTitleText="已兑换，可赠送给一位朋友",_e.reportSend(2),re.on(window,"scroll",this.scrollHandler),re.on(this.$refs.giftBar,"touchstart",this.touchStartHandler),re.on(this.$refs.giftBar,"touchmove",this.touchMoveHandler),re.on(this.$refs.giftBar,"touchend",this.touchEndHandler)):!J.hasClass(this.$refs.giftBar,"show")&&t<=window.innerHeight&&(this.$refs.giftBar.className="pay__gift-send pay__gift-send_static",_e.reportSend(4))},beforeDestroy(){re.off(window,"scroll",this.scrollHandler)},methods:{present(){if(q.os.iphone||q.os.ipad||q.os.android){let e=this.paySubscribeInfo.gift_url.html(),t="";const i=e.indexOf("#");-1!==i&&(t=e.substring(i),e=e.substring(0,i)),J.hasClass(this.$refs.giftBar,"pay__gift-send_static")?_e.reportSend(5):_e.reportSend(3),te.goUrl("".concat(e,"&sessionid=").concat(this.cgiData.sessionid,"&enterid=").concat(this.cgiData.enterid,"&scene=").concat(this.cgiData.source,"&subscene=").concat(this.cgiData.subscene,"&biz=").concat(this.cgiData.biz,"&mid=").concat(this.cgiData.mid,"&idx=").concat(this.cgiData.idx).concat(t))}else window.weui.alert("请使用移动端微信打开")},touchStartHandler(e){J.hasClass(this.$refs.giftBar,"show")&&(kn=!0,In=e.touches[0].clientY,bn=xn)},touchMoveHandler(e){e.preventDefault();const t=e.touches[0].clientY-In;J.hasClass(this.$refs.giftBar,"show")&&kn&&(t+bn>=0&&t+bn<=vn?(this.$refs.giftBar.style.transform="translate3d(0, ".concat(t+bn,"px, 0)"),xn=t+bn):t+bn>vn?(this.$refs.giftBar.style.transform="translate3d(0, ".concat(vn,"px, 0)"),xn=vn):t+bn<0&&(this.$refs.giftBar.style.transform="translate3d(0, 0, 0)",xn=0))},touchEndHandler(){kn=!1,J.hasClass(this.$refs.giftBar,"show")&&xn===vn&&(this.$refs.giftBar.className="pay__gift-send",re.off(this.$refs.giftBar,"touchstart",this.touchStartHandler),re.off(this.$refs.giftBar,"touchmove",this.touchMoveHandler),re.off(this.$refs.giftBar,"touchend",this.touchEndHandler))},scrollHandler(){const e=document.getElementById("js_pay_wall_wrap").getBoundingClientRect();e.top+e.height-48<=window.innerHeight?(this.giftBarTitleText="可赠送给一位朋友免费阅读",this.$refs.giftBar.className="pay__gift-send pay__gift-send_static",this.$refs.giftBar.style.transform="translate3d(0, 0, 0)",re.off(this.$refs.giftBar,"touchstart",this.touchStartHandler),re.off(this.$refs.giftBar,"touchmove",this.touchMoveHandler),re.off(this.$refs.giftBar,"touchend",this.touchEndHandler),re.off(window,"scroll",this.scrollHandler),_e.reportSend(4)):window.scrollY-Sn>An&&(this.$refs.giftBar.className="pay__gift-send")}}},(function(){var e=this,t=e._self._c;return t("div",{ref:"giftBar",staticClass:"pay__gift-send_static pay__gift-send",attrs:{id:"js_pay_gift_bar"}},[t("div",{staticClass:"pay__gift-send-content"},[t("div",{staticClass:"pay__gift-send-title",attrs:{id:"js_pay_gift_bar_title"}},[e._v(" "+e._s(e.giftBarTitleText)+" ")])]),t("div",{staticClass:"pay__gift-send-btn",attrs:{id:"js_send_pay_gift"},on:{click:e.present}},[e._v("去赠送")])])}),[],!1,null,null,null,null).exports;const Cn=ht({name:"mp-pay-read-qrcode",computed:{src(){if(q.os.pc){return"/mp/paysubqrcode?action=get_article_qrcode&__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&sn=").concat(window.sn,"#wechat_redirect")}return""}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"pay__notice-qrcode js_pay_qrcode_wrap js_pay_fee_display"},[t("div",{staticClass:"pay__qrcode-wrp"},[t("img",{staticClass:"js_pay_qrcode",attrs:{src:e.src}})]),t("div",{staticClass:"pay__qrcode-title"},[e._v("微信扫一扫付费阅读本文")])])}),[],!1,null,null,null,null).exports;const En=ht({name:"mp-pay-read-bottom",components:{[Cn.name]:Cn,[yn.name]:yn,[yt.name]:yt},props:{payTopicNoticeText:{type:String,default:""},visible:{type:Boolean}},data:()=>({addLargeFontStyle:!1,bottomHeight:0,showBottomBar:!(!window.user_uin&&!xt)}),computed:{...pe(["cgiData"]),...pe("mp-pay-read",["wecoinText","loading","payReadBottomVisible"]),...pe("mp-stream",["articleFoldStatus"]),...ue("mp-pay-read",["topicLink"]),...ue("mp-stream",["hasInteractData","actRecommendShow","recommendFriendNum","friendSeenInfo","showFriendSeen","streamFriendsLoveStatus","fixedBarHeight"]),payBtnText(){return this.showBottomBar?"读全文":"微信豆兑换"},streamFriendsShow(){return!!(this.actRecommendShow&&this.recommendFriendNum>0)},isPcWechat:()=>$.isWindowsWechat||$.isMacWechat},watch:{articleFoldStatus(e){!e&&this.showBottomBar&&this.$nextTick((()=>{this.judgeHeight("100")}))},hasInteractData(){this.$nextTick((()=>{this.judgeHeight("100")}))},streamFriendsShow(e){e||this.avatarAnimationComplete()}},created(){this.unwatchVisible=this.$watch("visible",(e=>{var t,i,o;if(e){const e=null==(i=null==(t=this.$refs.button)?void 0:t.$el)?void 0:i.getBoundingClientRect().height,n=null==(o=this.$refs.content)?void 0:o.getBoundingClientRect().height;this.addLargeFontStyle=n/e>108/52,this.unwatchVisible()}}))},mounted(){this.showBottomBar&&(G.on("menu:setfont",(e=>{this.judgeHeight(e.fontScale)})),this.$nextTick((()=>{this.judgeHeight("100")})))},methods:{...he("mp-stream",["setStreamFriendsListStatus","setViewRecommendFriendNum","setViewStreamFriendsLoveStatus","setPlayAvatarAnimation"]),...me("mp-pay-read",["goBuyTopic"]),judgeHeight(e="100"){setTimeout((()=>{var t,i,o;let n=!1;if("100"===e){const e=null==(i=null==(t=this.$refs.button)?void 0:t.$el)?void 0:i.getBoundingClientRect().height;n=(null==(o=this.$refs.content)?void 0:o.getBoundingClientRect().height)/e>.7}this.addLargeFontStyle=1*e>=140||n,this.bottomHeight=this.fixedBarHeight}),100)},streamFriendsClick(){this.setStreamFriendsListStatus(!0)},avatarAnimationComplete(){this.setViewRecommendFriendNum(this.recommendFriendNum),this.setViewStreamFriendsLoveStatus(this.streamFriendsLoveStatus),this.setPlayAvatarAnimation(!1)}}},(function(){var e=this,t=e._self._c;return 1!==e.cgiData.isPayTopic?t("div",{staticClass:"pay pay__notice",class:{pay__notice_largeFont:e.addLargeFontStyle,"pay__notice_new pay_new":e.showBottomBar,pay__notice_hiden:e.articleFoldStatus},style:{bottom:e.bottomHeight+"px",padding:(e.isPcWechat,"0px 20px 1px")},attrs:{id:"js_pay_panel_bottom"}},[t("div",{staticClass:"pay__notice-intro"},[e.streamFriendsShow?t("mp-stream-friends",{attrs:{isPayArticle:!0,showFriendSeen:e.showFriendSeen,likeTipsInfo:e.friendSeenInfo,recommendFriendNum:e.recommendFriendNum,streamFriendsLoveStatus:e.streamFriendsLoveStatus,payReadBottomVisible:e.payReadBottomVisible},on:{"stream-friends-click":e.streamFriendsClick,"avatar-animation-complete":e.avatarAnimationComplete}}):e.payReadBottomVisible?t("div",{ref:"content",staticClass:"pay__intro-content"},[t("span",{staticClass:"pay__notice-title"},[e._v(" 可试读"+e._s(e.cgiData.preview_percent)+"% ")]),t("span",{staticClass:"pay__notice-desc",attrs:{id:"js_pay_panel_bottom_wecoin_tips"}},[e._v(" "+e._s(e.wecoinText)+" ")])]):e._e(),e.payReadBottomVisible?t("div",{staticClass:"pay__notice-btn-wrp",style:{width:"".concat(e.streamFriendsShow&&!e.payReadBottomVisible?"0":""),opacity:"".concat(e.streamFriendsShow&&!e.payReadBottomVisible?"0":1)}},[t("mp-pay-btn",{ref:"button",attrs:{"button-text":e.payBtnText}}),t("mp-pay-read-qrcode")],1):e._e()],1)]):t("div",{staticClass:"pay pay__notice pay__topic-notice",class:{"pay_new pay__notice_new":e.showBottomBar,pay__notice_hiden:e.articleFoldStatus},style:{bottom:e.bottomHeight+"px",padding:(e.isPcWechat,"0px 20px 1px")},attrs:{id:"js_pay_topic_panel_bottom"}},[t("div",{staticClass:"pay__notice-intro"},[e.streamFriendsShow?t("mp-stream-friends",{attrs:{isPayArticle:!0,showFriendSeen:e.showFriendSeen,likeTipsInfo:e.friendSeenInfo,recommendFriendNum:e.recommendFriendNum,streamFriendsLoveStatus:e.streamFriendsLoveStatus,payReadBottomVisible:e.payReadBottomVisible},on:{"stream-friends-click":e.streamFriendsClick,"avatar-animation-complete":e.avatarAnimationComplete}}):e.payReadBottomVisible?t("div",{staticClass:"pay__intro-content"},[t("div",{staticClass:"pay__notice-desc"},[e._v(" "+e._s(e.payTopicNoticeText)+" ")]),e.showBottomBar?e._e():t("p",{staticClass:"pay__notice-title"},[e._v(e._s(e.cgiData.payTopicTitle))])]):e._e(),e.payReadBottomVisible?t("div",{staticClass:"pay__notice-btn-wrp",style:{width:"".concat(e.streamFriendsShow&&!e.payReadBottomVisible?"0":""),opacity:"".concat(e.streamFriendsShow&&!e.payReadBottomVisible?"0":1)}},[t("button",{staticClass:"js_pay_topic_btn weui-btn",class:{btn_disabled:e.cgiData.payTopicRemoveFlag>0},attrs:{"data-url":e.topicLink},on:{click:e.goBuyTopic}},[e._v(" 合集详情 ")]),t("mp-pay-read-qrcode")],1):e._e()],1)])}),[],!1,null,null,null,null).exports;const Rn=ht({name:"mp-buy-wecoin-btn",computed:{...pe("mp-pay-read",["wecoinRemain"])}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"pay__wecoin-entry"},[t("i",{staticClass:"pay__icon-wecoin"}),t("span",{staticClass:"price",attrs:{id:"js_wecoin_remain"}},[e._v(e._s(e.wecoinRemain))])])}),[],!1,null,null,null,null).exports;const Pn=ht({name:"mp-pay-edu-tips",components:{[we.name]:we},computed:{...pe(["cgiData"]),...pe("mp-pay-read",["payEduTips"]),top:()=>window.innerHeight-467},methods:{...he("mp-pay-read",["setWecoinRemain","setPayLock","setPayEduTips"]),hideEduTipsCb(){this.$refs.bottomModal.hide(),It.show(),G.invoke("getWCCoinBalance",{},(e=>{It.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1?(this.setWecoinRemain(e.balance),this.$emit("show-confirm")):this.setPayLock(!1)})),this.setPayEduTips({...this.payEduTips,firstWecoinRecharge:0})},show(){this.$refs.bottomModal.show()}}},(function(){var e=this,t=e._self._c;return t("mp-bottom-modal",{ref:"bottomModal",attrs:{"ext-class":"pay__edu-modal","has-header":!1,top:"".concat(e.top,"px")},on:{hide:e.hideEduTipsCb},scopedSlots:e._u([{key:"footer",fn:function(){return[t("a",{staticClass:"weui-btn weui-btn_default",on:{click:e.hideEduTipsCb}},[e._v("我知道了")])]},proxy:!0}])},[t("div",{staticClass:"pay__wecoin-edu-profile"},[t("div",{staticClass:"pay__wecoin-edu-title"},[e._v(" 可在「我>个人信息>微信豆」页面，查看微信豆消费明细。 ")]),t("div",{staticClass:"pay__wecoin-edu-pic"},[t("div",{staticClass:"pay__wecoin-edu-avatar"},[t("img",{attrs:{src:e.payEduTips&&e.payEduTips.userImgUrl}})]),t("div",{staticClass:"pay__wecoin-edu-nic"},[e._v(" "+e._s(e.payEduTips&&e.payEduTips.userNickname)+" ")])])])])}),[],!1,null,null,null,null).exports;const jn=ht({name:"mp-pay-confirm",components:{[we.name]:we,[Pn.name]:Pn,[Rn.name]:Rn},props:{title:{type:String,default:""}},data:()=>({agreeStat:!1}),computed:{...pe(["cgiData"]),...pe("mp-pay-read",["wecoinRemain","payEduTips","encodeRespBuff"]),needTopup(){return this.wecoinRemain<this.cgiData.wecoin_amount},btnDisabled(){return this.needTopup&&!1===this.agreeStat},wecoinTitle(){return this.needTopup?"微信豆不足，兑换全文还需":"兑换全文"},wecoinPrice(){return this.needTopup?this.cgiData.wecoin_amount-this.wecoinRemain:this.cgiData.wecoin_amount},wecoinTips(){return"售价 ".concat(this.wecoinPrice/10,"元")}},methods:{...he("mp-pay-read",["setPayLock","setWecoinRemain"]),...me("mp-pay-read",["paySuc","pollCheck"]),onLinkClick(e){e&&e.preventDefault(),ot.reportPayAppmsg(17),G.invoke("openUrlWithExtraWebview",{url:"https://kf.qq.com/touch/product/WXDB_app.html",openType:1})},onTermClick(e){"A"===e.target.tagName&&G.invoke("openUrlWithExtraWebview",{url:this.cgiData.paySubscribeInfo.agreement_url.htmlDecode(),openType:1})},onTermCheckboxToggle(e){const{footerBtn:t}=this.$refs;e.target.checked?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")},show(){this.$refs.bottomModal.show()},hide(){this.$refs.bottomModal.hide()},onFooterBtnClick(){if(this.$refs.footerBtn.getAttribute("disabled"))return;const{wecoin_amount:e}=this.cgiData;V.log("[Appmsg] pay process 5 wecoinAmountRemain=".concat(this.wecoinRemain," wecoin_amount=").concat(e)),this.needTopup?(this.hide(),setTimeout((()=>{ot.reportPayAppmsg(19),V.log("[Appmsg] pay process 6.1 buyWCCoin");const e=e=>{It.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1&&(this.setWecoinRemain(e.balance),this.needTopup?this.show():this.consumeWCCoin())},t={businessId:2,scene:4,panelShowType:"present",diffWecoinCount:this.cgiData.wecoin_amount>this.wecoinRemain?this.cgiData.wecoin_amount-this.wecoinRemain:0};$.isAndroid&&$.gtVersion("8.0.18",!0)&&(t.mode=2,t.agreementVersion=this.cgiData.paySubscribeInfo.agreement_version,t.customCount=this.cgiData.wecoin_amount-this.wecoinRemain,t.productId=this.cgiData.paySubscribeInfo.recharge_product_id),G.invoke("buyWCCoin",t,(t=>{console.log(t),t&&t.err_msg&&(t.err_msg.indexOf("ok")>-1?$.isIOS&&$.ltVersion("8.0.17")||$.isAndroid&&$.ltVersion("8.0.17")?this.payEduTips.firstWecoinRecharge?this.$refs.eduTipsModal.show():(It.show(),G.invoke("getWCCoinBalance",{},e)):G.invoke("showWCCoinFirstBuyCoinTips",{alwaysDarkMode:!1},(()=>{It.show(),G.invoke("getWCCoinBalance",{},e)})):t.err_msg.indexOf("cancel")>-1&&this.show())}))}),250)):(this.hide(),this.consumeWCCoin())},consumeWCCoin(){const{encodeRespBuff:e}=this;V.log("[Appmsg] pay process 3 can_use_wecoin=".concat(this.cgiData.can_use_wecoin)),V.log("[Appmsg] pay process 4 on payBtn tap"),It.show();const t=Math.round(new Date/1e3);G.invoke("consumeWCCoin",{buff:e,businessId:2},(i=>{console.log("consumeWCCoin res",i),this.setPayLock(!1),i&&i.err_msg&&i.err_msg.indexOf("ok")>-1?(ot.reportPay(t,1,e),this.pollCheck()):i&&i.err_msg&&i.err_msg.indexOf("fail")>-1&&(ot.reportPay(t,3,e,i.err_msg,i.err_code,i.err_domain),window.weui.alert("兑换失败，请稍后再试"))}))},buyWecoin(){this.hide();const e=e=>{It.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1&&(this.setWecoinRemain(e.balance),this.show())};setTimeout((()=>{ot.reportPayAppmsg(14);const t=this.needTopup?this.cgiData.wecoin_amount-this.wecoinRemain:0;G.invoke("buyWCCoin",{businessId:2,scene:3,panelShowType:"present",diffWecoinCount:t},(t=>{console.log(t),t&&t.err_msg&&(t.err_msg.indexOf("ok")>-1?$.isIOS&&$.ltVersion("8.0.17")||$.isAndroid&&$.ltVersion("8.0.17")?this.payEduTips.firstWecoinRecharge?this.$refs.eduTipsModal.show():(It.show(),G.invoke("getWCCoinBalance",{},e)):G.invoke("showWCCoinFirstBuyCoinTips",{alwaysDarkMode:!1},(()=>{It.show(),G.invoke("getWCCoinBalance",{},e)})):t.err_msg.indexOf("cancel")>-1&&this.show())}))}),250)}}},(function(){var e=this,t=e._self._c;return t("div",[t("mp-bottom-modal",{ref:"bottomModal",attrs:{"ext-class":"pay__bottom-modal","has-btn":"","auto-height":""},on:{submit:e.buyWecoin,hide:function(t){return e.setPayLock(!1)}},scopedSlots:e._u([{key:"btn",fn:function(){return[t("mp-buy-wecoin-btn")]},proxy:!0},{key:"footer",fn:function(){return[t("div",[e.needTopup?t("div",{ref:"footerTerm",staticClass:"pay__wecoin-term weui-cells_checkbox",attrs:{id:"js_wecoin_term"},on:{click:e.onTermClick}},[t("label",{attrs:{for:"js_wecoin_term_check"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.agreeStat,expression:"agreeStat"}],ref:"wecoinCheck",staticClass:"weui-check",attrs:{id:"js_wecoin_term_check",type:"checkbox"},domProps:{checked:Array.isArray(e.agreeStat)?e._i(e.agreeStat,null)>-1:e.agreeStat},on:{change:function(t){var i=e.agreeStat,o=t.target,n=!!o.checked;if(Array.isArray(i)){var a=e._i(i,null);o.checked?a<0&&(e.agreeStat=i.concat([null])):a>-1&&(e.agreeStat=i.slice(0,a).concat(i.slice(a+1)))}else e.agreeStat=n}}}),t("i",{staticClass:"weui-icon-checked"}),e._v("同意"),t("a",{attrs:{href:"javascript:;"}},[e._v("《微信豆充值协议》")])])]):e._e(),t("div",{staticClass:"weui-half-screen-dialog__btn-area"},[t("a",{ref:"footerBtn",staticClass:"weui-btn weui-btn_primary",attrs:{disabled:e.btnDisabled},on:{click:e.onFooterBtnClick}},[e._v(e._s(e.needTopup?"去充值":"兑换"))])]),t("div",{staticClass:"weui-half-screen-dialog__attachment-wrp",on:{click:e.onLinkClick}},[t("a",{staticClass:"weui-half-screen-dialog__attachment-link",attrs:{href:"javascript:;"}},[e._v("常见问题")])])])]},proxy:!0}])},[t("div",{staticClass:"pay__wecoin"},[t("div",{staticClass:"pay__wecoin-title",staticStyle:{"font-weight":"normal"},attrs:{id:"js_wecoin_title"}},[e._v(" "+e._s(e.wecoinTitle)+" ")]),t("div",{staticClass:"pay__wecoin-content pay__wecoin-content-price"},[t("i",{staticClass:"pay__icon-wecoin"}),t("span",{staticClass:"price",attrs:{id:"js_wecoin_price"}},[e._v(e._s(e.wecoinPrice))])]),t("div",{ref:"wecoinTipsDom",staticClass:"pay__wecoin-tips",attrs:{id:"js_wecoin_tips"}},[e._v(" "+e._s(e.wecoinTips)+" ")])])]),t("mp-pay-edu-tips",{ref:"eduTipsModal",on:{"show-confirm":function(t){return e.$refs.bottomModal.show()}}})],1)}),[],!1,null,null,null,null).exports;const Dn=ht({name:"mp-wecoin-tips",components:{[we.name]:we},computed:{...pe("mp-pay-read",["wecoinText"]),top:()=>innerHeight-375},methods:{onQuestionClick(e){e&&e.preventDefault(),ot.reportPayAppmsg(17),G.invoke("openUrlWithExtraWebview",{url:"https://kf.qq.com/touch/product/WXDB_app.html",openType:1}),this.$refs.bottomModal.hide()},show(){this.$refs.bottomModal.show()}}},(function(){var e=this,t=e._self._c;return t("mp-bottom-modal",{ref:"bottomModal",attrs:{"ext-class":"pay__wecoin-edu-modal",top:"".concat(e.top,"px")},scopedSlots:e._u([{key:"footer",fn:function(){return[t("a",{staticClass:"pay__wecoin-edu-link",on:{click:e.onQuestionClick}},[e._v("常见问题")])]},proxy:!0}])},[t("div",{staticClass:"pay__wecoin-edu"},[t("div",{staticClass:"pay__wecoin-title"},[t("div",{staticClass:"pay__icon-wecoin"}),t("div",[e._v("付费内容需用微信豆兑换")])]),t("div",{staticClass:"pay__wecoin-edu-desc"},[e._v(" 微信豆是用于兑换微信内虚拟物品和服务的道具。 "),t("span",[e._v(e._s(e.wecoinText))]),e._v(" 微信豆还可用于兑换直播间的虚拟礼物等。 ")])])])}),[],!1,null,null,null,null).exports;const Bn=ht({name:"mp-pay-read",components:{[En.name]:En,[Cn.name]:Cn,[jn.name]:jn,[yn.name]:yn,[Dn.name]:Dn,[Tn.name]:Tn,[ge.name]:ge,[St.name]:St},data:()=>({iapPriceInfo:null,showBottomBar:!!window.is_login}),computed:{...pe(["cgiData","extRes","isAuthorWx"]),...pe("mp-pay-read",["wecoinText","payLock","wecoinRemain","loading","isInMiniProgram","paySubscribeInfo","payReadBottomVisible"]),...ue("mp-stream",["actRecommendShow","recommendFriendNum","showFriendSeen"]),...ue("mp-pay-read",["isPaidLSKey","topicLink"]),cmtStoreBase:()=>$.isNewMpApp?"mp-app-comment":"mp-comment",contentTextLen(){var e;return 1*(null==(e=this.cgiData.payforread_info)?void 0:e.content_plain_text_len)},canGift(){return!!this.paySubscribeInfo&&this.cgiData.payGiftsCount-this.paySubscribeInfo.gifted_count>0},payFee(){var e;return(1*(null==(e=this.cgiData.payforread_info)?void 0:e.fee)/100).toFixed(2)},isPaid(){return this.cgiData.isPaid},previewPercent(){return this.cgiData.preview_percent},payTopicNoticeText(){return 0===this.previewPercent?"兑换合集后可阅读全文":"兑换合集后可阅读剩余".concat(100-this.previewPercent,"%")},payTopicFreqText(){const e=this.cgiData.payTopicCount,t=this.cgiData.payTopicTotalCount;return e<t?"已发表".concat(e,"个")+" "+"计划发表".concat(t,"个"):"已完结 共".concat(e,"个")},payTopicList(){return this.cgiData.payTopicArticleTitles?this.cgiData.payTopicArticleTitles.slice(0,4):[]},previewTipsText:()=>/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"付费后可赠送给一位朋友免费阅读 (1元 = 7微信豆)":"付费后可赠送给一位朋友免费阅读 (1元 = 10微信豆)",tempkey(){return this.cgiData.tempkey},payFeeNormalText(){const{wecoin_amount:e,fee:t}=this.cgiData;return e>0?e:t/10},payTotalSummary(){var e;const t=this.extRes.reward_total_count?"，".concat(te.formatNum(this.extRes.reward_total_count)," 人喜欢"):"";return"".concat(te.formatNum(null==(e=this.paySubscribeInfo)?void 0:e.pay_cnt)," 人付费")+t},avatarList(){return this.paySubscribeInfo?this.cgiData.isPaid&&!this.cgiData.payFreeGift?[Object.assign({},this.paySubscribeInfo.my_head_img_info,{reward_status:this.paySubscribeInfo.my_reward_status}),...this.paySubscribeInfo.pay_head_img_infos||[]]:this.paySubscribeInfo.pay_head_img_infos||[]:[]},payBtnText(){return this.showBottomBar?"读全文":"微信豆兑换"},streamFriendsShow(){return!!(this.actRecommendShow&&this.recommendFriendNum>0)},rewardExt(){return"&sn=".concat(this.cgiData.sn,"&source=1")},payExt(){return"&product_type=".concat(this.cgiData.productPayPackage.product_type,"&product_id=").concat(this.cgiData.productPayPackage.product_id,"&sn=").concat(this.cgiData.sn,"&link=").concat(encodeURIComponent(this.cgiData.msg_link),"&from_scene=").concat(this.cgiData.source,"&from_subscene=").concat(this.cgiData.subscene,"&is_fans=").concat(this.cgiData.isFans,"&author_id=").concat(this.cgiData.author_id)}},watch:{extRes(e){e.pay_subscribe_info&&(this.setPayEduTips({firstWecoinRecharge:1*e.pay_subscribe_info.first_wecoin_recharge,userImgUrl:e.pay_subscribe_info.user_img_url,userNickname:e.pay_subscribe_info.user_nick_name}),this.setPayGlobal({enable_custom_recharge:e.pay_subscribe_info.enable_custom_recharge,agreement_url:e.pay_subscribe_info.agreement_url,agreement_version:e.pay_subscribe_info.agreement_version,agreement_status:e.pay_subscribe_info.agreement_status,recharge_product_id:e.pay_subscribe_info.recharge_product_id,price:e.pay_subscribe_info.price}),e.pay_subscribe_info.wecoin_tips&&($.isIOS||$.isAndroid)&&!$.isWxWork&&this.$refs.wecoinTipsModal.show())},payReadBottomVisible(e){null===e&&this.togglePayPanelBottom()},paySubscribeInfo(e){(null==e?void 0:e.pay_cnt)&&this.$nextTick((()=>{window.showRewardListDialog&&(this.$refs.rewardListDialog.changeTab("reward"),this.$refs.rewardListDialog.show(),window.showRewardListDialog=0)}))}},created(){this.iapPriceInfo=this.cgiData.iapPriceInfo},mounted(){V.log("[Appmsg] pay process 1 isPaySubscribe=".concat(this.cgiData.isPaySubscribe)),G.on("onScreenShot",(()=>{ot.reportPayAppmsg(6),R.setSum(114217,15,1)}));const e=$.isWindows||$.isMac&&!$.isIOS,t=document.getElementById("js_content"),i=e=>{"IMG"===e.target.tagName&&e.preventDefault()};e&&(t.addEventListener("dragstart",i),$.isWechat||t.addEventListener("contextmenu",i)),V.log("[Appmsg] pay process 2 isPaid=".concat(this.isPaid)),this.isPaid||this.initPay()},beforeDestroy(){re.off(this.cgiData,"scroll",this.togglePayPanelBottom)},methods:{...he("mp-pay-read",["setPayEduTips","setPayGlobal","setConfirmModal","setPayReadBottomVisible","setMyHideStatus"]),...me("mp-pay-read",["goBuyTopic"]),setIsReward(...e){return this.$store.commit("".concat(this.cmtStoreBase,"/setIsReward"),...e)},initPay(){const e=document.getElementById("js_pay_panel");$.isAndroid&&"1"===localStorage.getItem(this.isPaidLSKey)&&ot.report110809(30),this.cgiData.jump2pay&&re.on(window,"load",(()=>{window.scrollTo(0,e.getBoundingClientRect().top-j.getInnerHeight()/3)})),this.setConfirmModal(this.$refs.payConfirm),this.togglePayPanelBottom(),re.on(window,"scroll",this.togglePayPanelBottom)},togglePayPanelBottom(){const e=this.$refs.payReadBottom.$el,t=this.cgiData.isPayTopic?document.getElementById("js_pay_topic_btn"):this.$refs.payBtn.$el,{top:i}=t.getBoundingClientRect(),o=window.getComputedStyle(e);if(i+(80+parseInt(o.paddingTop,10)+parseInt(o.paddingBottom,10))>this.cgiData.innerHeight){if(1*this.cgiData.previewPercent==0)return;if(this.cgiData.isRemovedFromPayTopic&&!this.cgiData.isPaid)return;this.setPayReadBottomVisible(!0)}else this.setPayReadBottomVisible(!1),window.is_finished_preview=1},toPayDetail(){this.$refs.rewardListDialog.show()},toggleAvatar(e,t){void 0!==t.rewardHideStatus&&this.setIsReward({identityType:this.extRes.my_identity_info.identity_type,identityName:this.extRes.my_identity_info.identity_name,isReward:t.rewardHideStatus?0:1}),this.setMyHideStatus(e)}}},(function(){var e=this,t=e._self._c;return t("div",[e.isPaid?[e.paySubscribeInfo&&e.paySubscribeInfo.pay_cnt?t("mp-headimg-wall",{staticClass:"pay__detail-wrp",attrs:{type:"pay","total-count":e.paySubscribeInfo.pay_cnt,"total-summary":e.payTotalSummary,"head-imgs":e.avatarList},on:{"click-summary":e.toPayDetail}}):e._e(),e.canGift?t("mp-pay-gift"):e._e()]:[e.previewPercent>0?t("div",{staticClass:"pay__mask_static"}):e._e(),t("div",{staticClass:"pay pay__static",class:{pay_new:e.showBottomBar},attrs:{id:"js_pay_panel"}},[1===e.cgiData.isPayTopic&&e.cgiData.payTopicRemoveFlag>0?t("div",{staticClass:"pay__topic-tips"},[e._v(" "+e._s(1===e.cgiData.payTopicRemoveFlag?"此内容已从合集中移除，不支持付费":"付费合集已被作者删除，不支持付费")+" ")]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:!(1!==e.cgiData.isPayTopic||2===e.cgiData.payTopicRemoveFlag),expression:"!(cgiData.isPayTopic !== 1 || cgiData.payTopicRemoveFlag === 2)"}],staticClass:"pay__topic"},[t("div",{staticClass:"pay__topic-hd"},[e._v(" "+e._s(e.payTopicNoticeText)+" ")]),t("div",{staticClass:"pay__topic-bd"},[t("div",{staticClass:"pay__topic-main"},[t("div",{staticClass:"pay__topic-main-wrp"},[t("div",{staticClass:"pay__topic-title"},[e._v(e._s(e.cgiData.payTopicTitle))]),t("div",{staticClass:"pay__topic-meta"},[t("span",{attrs:{id:"js_pay_topic_freq"}},[e._v(" "+e._s(e.payTopicFreqText)+" ")])])]),t("a",{class:"weui-btn weui-btn_mini ".concat(e.cgiData.payTopicRemoveFlag>0&&!e.isPaid?"weui-btn_disabled":"weui-btn_primary"," weui-wa-hotarea pay__topic-btn"),attrs:{id:"js_pay_topic_btn","data-url":e.topicLink,href:"javascript:;"},on:{click:e.goBuyTopic}},[e._v(" 合集详情 ")])]),t("ul",{staticClass:"pay__topic-list"},e._l(e.payTopicList,(function(i,o){return t("li",{key:i},[e._v(e._s(o+1)+". "+e._s(i))])})),0)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:1!==e.cgiData.isPayTopic,expression:"cgiData.isPayTopic !== 1"}],staticClass:"pay__main"},[e.cgiData.payDesc&&0===e.previewPercent?t("div",{staticClass:"pay__head-notice"},[e._v(" 正文需付费后才可阅读 ")]):e._e(),t("div",{staticClass:"pay__notice-btn-wrp",class:{"pay__notice-btn-lg":e.showBottomBar}},[t("mp-pay-btn",{ref:"payBtn",attrs:{"button-text":e.payBtnText}}),0!==e.cgiData.payGiftsCount?t("div",{staticClass:"pay__preview-tips",attrs:{id:"js_pay_preview_tips"}},[e._v(" "+e._s(e.previewTipsText)+" ")]):t("div",{staticClass:"pay__preview-tips",attrs:{id:"js_pay_wecoin_tips"}},[e._v(" "+e._s(e.wecoinText)+" ")]),e.tempkey?t("div",{staticClass:"pay__preview-tips js_pay_fee_display"},[e._v(" 预览状态下不会扣费 ")]):e._e(),t("mp-pay-read-qrcode")],1)]),e.paySubscribeInfo&&e.paySubscribeInfo.pay_cnt?t("mp-headimg-wall",{staticClass:"pay__detail-wrp",attrs:{type:"pay","total-count":e.paySubscribeInfo.pay_cnt,"total-summary":e.payTotalSummary,"head-imgs":e.avatarList},on:{"click-summary":e.toPayDetail}}):e._e()],1),t("transition",{attrs:{name:"fade"}},[t("mp-pay-read-bottom",{directives:[{name:"show",rawName:"v-show",value:e.payReadBottomVisible||e.streamFriendsShow,expression:"payReadBottomVisible || streamFriendsShow"}],ref:"payReadBottom",attrs:{visible:e.payReadBottomVisible,"pay-topic-notice-text":e.payTopicNoticeText}})],1),t("mp-pay-confirm",{ref:"payConfirm"})],t("mp-wecoin-tips",{ref:"wecoinTipsModal"}),e.paySubscribeInfo&&e.paySubscribeInfo.pay_cnt?t("mp-reward-list-dialog",{ref:"rewardListDialog",attrs:{biz:e.cgiData.biz,mid:e.cgiData.mid,idx:e.cgiData.idx,"is-author":e.isAuthorWx,"reward-num":e.extRes.reward_total_count,"pay-num":e.paySubscribeInfo.pay_cnt,"reward-buffer":e.extRes.reward_head_img_buffer,"pay-buffer":e.extRes.pay_subscribe_info.pay_head_img_buffer,"reward-ext":e.rewardExt,"pay-ext":e.payExt},on:{"toggle-avatar":e.toggleAvatar}}):e._e()],2)}),[],!1,null,"8c6da66a",null,null).exports;const Ln=ht({name:"mp-sponsor-ad",components:{[k.name]:k},data:()=>({posType:At.AD_POS.POS_SPONSOR}),methods:{handleAdFrameMessage(e){e===At.FRAME_READY&&fe.report115849(63)}}},(function(){var e=this;return(0,e._self._c)("mp-ad-frame",{attrs:{"pos-type":e.posType},on:{"ad-frame-message":e.handleAdFrameMessage}})}),[],!1,null,null,null,null).exports,Nn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJDQzA1MTVGNkE2MjExRTRBRjEzODVCM0Q0NEVFMjFBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJDQzA1MTYwNkE2MjExRTRBRjEzODVCM0Q0NEVFMjFBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkNDMDUxNUQ2QTYyMTFFNEFGMTM4NUIzRDQ0RUUyMUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkNDMDUxNUU2QTYyMTFFNEFGMTM4NUIzRDQ0RUUyMUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6p+a6fAAAAD0lEQVR42mJ89/Y1QIABAAWXAsgVS/hWAAAAAElFTkSuQmCC",On=ei.attr,Mn=ei.setProperty;let zn=!1,Wn=!1,qn=!1,Un=0;const Hn={img:function(e,t){const i=this;e.loader.onerror=function(t){Un+=1;const o=!!i.onerror&&i.onerror(this.src,this,e.placeholder,e.type,i.images.length===Un);o&&(this.src=o)},e.loader.onload=function(){if(ti(this,e.placeholder),e.placeholder.getAttribute("data-ratio")&&parseFloat(e.placeholder.getAttribute("data-ratio"),10)!==this.naturalHeight/this.naturalWidth&&(window.__addIdKeyReport&&window.__addIdKeyReport(330742,4),zn||window.__addIdKeyReport&&window.__addIdKeyReport(330742,5),window.create_time&&window.create_time>1682352e3&&(window.__addIdKeyReport&&window.__addIdKeyReport(330742,18),Math.abs(parseFloat(e.placeholder.getAttribute("data-ratio"),10)-this.naturalHeight/this.naturalWidth)*e.placeholder.getBoundingClientRect().width<=1?window.__addIdKeyReport&&window.__addIdKeyReport(330742,6):(!qn&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&Math.random()<.1&&window.WX_BJ_REPORT.BadJs.report("wrong img ratio page",location.href),!qn&&window.__addIdKeyReport&&window.__addIdKeyReport(330742,19),qn=!0)),zn=!0),parseFloat(e.placeholder.getAttribute("data-ratio"),10)||window.__addIdKeyReport&&window.__addIdKeyReport(330742,8),e.placeholder.getBoundingClientRect().width||window.__addIdKeyReport&&($.isIOS&&window.__addIdKeyReport(330742,12),$.isAndroid&&window.__addIdKeyReport(330742,13),$.isWindows&&window.__addIdKeyReport(330742,14),$.isMac&&window.__addIdKeyReport(330742,15)),parseFloat(e.placeholder.getAttribute("data-ratio"),10)!==this.naturalHeight/this.naturalWidth){const t=e.placeholder.getBoundingClientRect().bottom;t<window.innerHeight&&($.isIOS||t>0&&$.isAndroid)&&(window.__addIdKeyReport&&window.__addIdKeyReport(330742,9),!Wn&&window.__addIdKeyReport&&window.__addIdKeyReport(330742,10),Wn=!0)}e.placeholder=this,Un+=1,i.onload&&i.onload(this.src,this,e.type,Un===i.images.length),this.onload=null},i.beforeload&&i.beforeload(t,e.loader,e.type),On(e.loader,"src",t),e.show=!0},bg:function(e,t){const i=this,o=t=>{const o='url("data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==")',n=e.placeholder.style.backgroundImage.replace(o,'url("'.concat(t,'")'));"string"==typeof e.placeholder.dataset.style&&(e.placeholder.dataset.style=e.placeholder.dataset.style.replace(o,'url("'.concat(t,'")'))),e.placeholder.style.backgroundImage=n,e.placeholder.classList.remove("wx_imgbc_placeholder"),window.Darkmode.updateStyle(e.placeholder,{"background-image":n}),Un+=1,i.onload&&i.onload(t,e.placeholder,e.type,Un===i.images.length),e.loader.onload=null};e.loader.onerror=function(){Un+=1;const t=!!i.onerror&&i.onerror(this.src,this,e.placeholder,e.type,i.images.length===Un);t?this.src=t:o(e.src)},e.loader.onload=function(){o(this.src)},i.beforeload&&i.beforeload(t,e.loader,e.type),On(e.loader,"src",t),e.show=!0}};function Fn(){const e=Date.now(),t=window.pageYOffset||document.documentElement.scrollTop,i=new IntersectionObserver((o=>{const n=[];o.forEach((e=>{const{target:t,isIntersecting:o}=e;if(o){const e=this.images.find((e=>e.placeholder===t));if(e){const{type:o}=e;let a=e.src;const s=1*e.placeholder.dataset.secLoadStatus;if(!a||1===s)return;if(e.show||2!==s||(e.show=!0,n.push(a)),$.isWp&&"img"===e.type&&1*e.placeholder.width>window.sw&&(e.placeholder.width=this.sw),e.show)return void i.unobserve(t);this.changeSrc&&(a=this.changeSrc(a,e.loader,e.placeholder,e.type)),"function"==typeof Hn[o]&&Hn[o].call(this,e,a),n.push(a),i.unobserve(t)}}})),n.length>0&&this.detect&&this.detect({time:e,scrollTop:t,loadList:n})}));this.images.forEach((e=>i.observe(e.placeholder)))}function Vn(e){const t=this.images;if(!t||t.length<=0)return!1;const i=window.pageYOffset||document.documentElement.scrollTop,o=window.innerHeight||document.documentElement.clientHeight;let n=this.offset||60,a=0;if("wifi"===window.networkType){const e={bottom:1,top:1};let t;t=window.svr_time?new Date(1e3*window.svr_time):new Date;const i=t.getHours();i>=20&&i<23&&(e.bottom=.5,e.top=0),n=Math.max(e.bottom*o,n),a=Math.max(e.top*o,a)}const s=Date.now(),r=[],d=this.sw,c=this;for(let l=0,p=t.length;l<p;l++){const i=t[l];let s=i.src;const p=1*i.placeholder.dataset.secLoadStatus;if(!s||1===p)continue;if(i.show||2!==p||(i.show=!0,r.push(s)),$.isWp&&"img"===i.type&&1*i.placeholder.width>d&&(i.placeholder.width=d),i.show)continue;const m=c.getImgRect&&c.getImgRect(i.placeholder)||i.placeholder.getBoundingClientRect();let _=a,u=n;(s.match(/\:\/\/[^\/]+\/mmbiz\//)&&s.indexOf("wx_fmt=gif")>-1||s.match(/\:\/\/[^\/]+\/mmbiz_gif\//))&&(_=0,u=60),(m.top<=0&&m.top+m.height+_>=0||m.top>0&&m.top<o+u||1===e||2===e&&"img"===i.type||3===e&&"bg"===i.type)&&(c.inImgRead&&(m.top<=0&&m.top+m.height>=0||m.top>0&&m.top<o)&&c.inImgRead(s,window.networkType),c.changeSrc&&(s=c.changeSrc(s,i.loader,i.placeholder,i.type)),"function"==typeof Hn[i.type]&&Hn[i.type].call(this,i,s),r.push(s))}r.length>0&&this.detect&&this.detect({time:s,loadList:r,scrollTop:i})}function Jn(){const e=document.getElementsByTagName("img"),t=document.querySelectorAll("[data-lazy-bgimg]"),i=[],o=this.container,n=this.attrKey||"data-src",a=o.offsetWidth;let s=0;const r=this.imgOccupied||!1,d=this.crossOrigin||!1;o.currentStyle?s=o.currentStyle.width:"undefined"!=typeof getComputedStyle&&(s=getComputedStyle(o).width),this.sw=1*s.replace("px","");for(let l=0,p=e.length;l<p;l++){const t=e.item(l),o=On(t,n);if(!o)continue;const s=On(t,"src");if(s&&s.indexOf("data:image/svg+xml")<0&&!t.dataset.secLoadStatus)continue;let c=100;if(t.dataset&&t.dataset.ratio){const e=1*t.dataset.ratio;let i=1*t.dataset.w||a;"number"==typeof e&&e>0&&(i=i<=a?i:a,c=i*e,r||(t.style.width&&t.setAttribute("_width",t.style.width),Mn(t,"width",i+"px","important"),Mn(t,"visibility","visible","important"),t.setAttribute("src",Nn)))}r||Mn(t,"height",c+"px","important"),d&&-1===o.indexOf("mmsns.qpic.cn")&&(o.match(/\:\/\/[^\/]+\/mmbiz\//)&&o.indexOf("wx_fmt=gif")>-1||o.match(/\:\/\/[^\/]+\/mmbiz_gif\//)),t.alt||(t.alt="图片"),i.push({type:"img",placeholder:t,loader:t.cloneNode(),src:o,height:c,show:!1})}for(let l=0,p=t.length;l<p;l++){const e=t.item(l),o=On(e,"data-lazy-bgimg");if(!o)continue;const n=e.style.backgroundImage;n&&n.indexOf("data:image/gif;base64")<0&&!e.dataset.secLoadStatus||i.push({type:"bg",placeholder:e,loader:new Image,src:o,show:!1})}window.__lazyload_detected=!0,this.images=i,window.IntersectionObserver&&Fn.call(this);const c=o.querySelector('animate[attributeName="y"]')||o.querySelector('animateTransform[attributeName="transform"]')||o.querySelector("animateMotion");Vn.call(this,c?3:0)}function $n(){this.throttle||(this.throttle=!0,setTimeout((()=>{Vn.call(this),this.throttle=!1}),500))}function Gn(e){(null==e?void 0:e.forceLoadImg)?setTimeout((()=>{Jn.call(e),Vn.call(e,1),console.log("=======forceLoaded",(new Date).getTime())}),0):(setTimeout((()=>Jn.call(e)),0),re.on(window,"scroll",(()=>$n.call(e))),re.on(document,"touchmove",(()=>$n.call(e)))),G.invoke("getUserConfig",{},(t=>{t.isAccessibilityMode?(window.localStorage.setItem("isMpUserAccessibility","1"),Vn.call(e,1)):window.localStorage.removeItem("isMpUserAccessibility")})),$.isIOS&&$.compareHexVersion("18001B00")&&G.on("onScreenShot",(()=>{Vn.call(e,1)}))}const Kn=ht({name:"mp-keyword-ad",components:{[k.name]:k},props:{keywordAdData:{type:Object,default:()=>({})},exPageData:{type:Object,default:()=>({})}},data:()=>({posType:At.AD_POS.POS_AD_KEYWORD}),methods:{handleAdFrameLoad(){this.$emit("ad-load")},handleAdFrameMessage(e){e===At.CHANGE_FRAME_STYLE&&this.$emit("ad-change-frame-style")},onAdDataChange(e){this.$emit("ad-data-change",e)}}},(function(){var e=this;return(0,e._self._c)("mp-ad-frame",{attrs:{"pos-type":e.posType,"keyword-ad-data":e.keywordAdData,"ex-page-data":e.exPageData},on:{"ad-frame-load":e.handleAdFrameLoad,"ad-frame-message":e.handleAdFrameMessage,"ad-data-change":e.onAdDataChange}})}),[],!1,null,null,null,null).exports;const Qn=ht({name:"mp-search-link",props:{keyword:{type:String,default:""}}},(function(){var e=this,t=e._self._c;return t("p",{ref:"footerBox",staticClass:"adv_keyword_search",on:{click:function(t){return e.$emit("click")}}},[t("a",{staticClass:"js_wx_tap_highlight wx_tap_link"},[e._v(e._s("搜索「".concat(e.keyword,"」网络结果")))])])}),[],!1,null,null,null,null).exports;const Yn=ht({name:"mp-ad-keyword-bottom-modal",components:{[we.name]:we,[Kn.name]:Kn,[Qn.name]:Qn},data:()=>({observer:null,topHeight:"".concat(.33*j.getInnerHeight(),"px"),exPageData:{bodyScrollTop:0,screenHeight:0,adOffsetTop:0},debounceScroll:null,isLoading:!1,adRendered:!1}),computed:{...pe("mp-adv-keyword",["show","keywordItem","reportData","keywordAdData","keywordDesc"])},created(){this.$watch("show",(function(e){e&&this.showBottomModal()})),this.debounceScroll=te.debounce(this.handleScroll,100)},mounted(){this.observer=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(nt({eventType:4,keyword:this.keywordItem.keyword,...this.reportData}),t.unobserve(e.target))}))})),this.exPageData.screenHeight=Math.floor(j.getInnerHeight()*(1-.33)-this.calTopBarHeight())},beforeDestroy(){this.observer&&this.observer.disconnect(),this.debounceScroll=null},methods:{...he("mp-adv-keyword",["setShow","setKeywordAdData","setKeywordDescription"]),showBottomModal(){this.getKeywordAd(),this.getKeywordBaikeInfo(this.keywordItem),this.$refs.bottomModal.show(),nt({eventType:3,keyword:this.keywordItem.keyword,...this.reportData})},onHide(){this.setShow(!1),this.adRendered=!1,nt({eventType:6,keyword:this.keywordItem.keyword,...this.reportData})},handleScroll(e,t){var i;const o=null==(i=this.$refs.adCard)?void 0:i.$el;this.exPageData.bodyScrollTop=Math.floor(t.scrollTop),o&&(this.exPageData.adOffsetTop=this.updateAdOffset(o)+this.exPageData.bodyScrollTop,this.postMessageToAdFrame(At.PAGE_SCROLL_ACTION,{hasVideoPlayingInScreen:!1,...this.exPageData},o))},goSouyisou(){nt({eventType:7,keyword:this.keywordItem.keyword,...this.reportData}),setTimeout((()=>{G.invoke("openWXSearchPage",{query:this.keywordItem.keyword})}))},postMessageToAdFrame(e,t,i){const o=i.contentWindow;o&&fe.postMessage(o,e,t,At.AD_FRAME_DOMAIN)},adCardClick(){nt({eventType:5,keyword:this.keywordItem.keyword,...this.reportData})},getKeywordAd(){const e=o(),t=n(),i=this;this.isLoading=!0,P({url:t,data:Object.assign(e,{pos_type_list:JSON.stringify([12]),article_keyword:this.keywordItem.keyword,is_need_ad:1}),type:"POST",dataType:"json",rtId:27613,rtKey:50,rtDesc:mt,async:!0,success(e){V.log("[Appmsg] success get adkeywords data"),0===(null==e?void 0:e.ret)&&(i.setKeywordAdData(e),i.$nextTick((()=>{i.exPageData.adOffsetTop=i.updateAdOffset(i.$refs.adCardDiv)+i.exPageData.bodyScrollTop}))),i.isLoading=!1},error(e){V.log("[Appmsg] get adkeywords data error"),console.error("getappmsgad err",e),i.isLoading=!1}})},getKeywordBaikeInfo(e){const t=this;P({url:"/mp/adkeyword",data:{action:"get_adkeyword_abstract",bizuin:window.biz?parseInt(window.atob(window.biz),10):0,appmsgid:1*window.mid||0,idx:1*window.idx||0,scene:window.source,request_id:Date.now(),keyword:e.keyword,idx_range:e.idx_range_list[0],s1s_stat_info:e.s1s_context_info,s1s_context_info:e.s1s_context_info},usePb:!0,success(e){try{const i=JSON.parse(e);0===i.base_resp.ret&&t.setKeywordDescription(i.abstract_resp)}catch(i){}},error(e){console.log("getKeywordBaikeInfo err",e)}})},adLoad(){this.observer.observe(this.$refs.adCard.$el)},updateAdOffset(e){const t=this.$refs.bottomModal.$el.querySelector("#contentAreaWrp");return Math.floor(e.getBoundingClientRect().top-t.getBoundingClientRect().top)},calTopBarHeight(){const e=this.$refs.bottomModal.$el.querySelector(".weui-half-screen-dialog__hd__wrp");let t=64;return e&&(t=e.getBoundingClientRect().height),t}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"adv_keyword_bottom_modal"},[t("mp-bottom-modal",{ref:"bottomModal",attrs:{top:e.topHeight,"auto-height":!!e.keywordAdData,"hide-when-sideslip":"","close-btn-type":"fold","ext-class":"ad_keyword_bottom_modal_wrap","content-area-class":"bottom_modal_content_area","content-wrap-class":"bottom_modal_content_wrap"},on:{hide:e.onHide,scroll:e.debounceScroll},scopedSlots:e._u([e.isLoading||e.keywordAdData?null:{key:"footer",fn:function(){return[t("mp-search-link",{attrs:{keyword:e.keywordItem.keyword},on:{click:e.goSouyisou}})]},proxy:!0}],null,!0)},[e.isLoading?t("div",{staticClass:"loading-wrapper"},[t("i",{staticClass:"weui-loading"})]):t("div",[t("h1",{staticClass:"adv_keyword_title"},[e._v(e._s(e.keywordItem.keyword))]),t("p",{staticClass:"adv_keyword_desc"},[e._v(e._s(e.keywordDesc.abstract))]),t("div",{ref:"adCardDiv"},[e.keywordAdData?t("mp-keyword-ad",{ref:"adCard",attrs:{"keyword-ad-data":e.keywordAdData,"ex-page-data":e.exPageData},on:{"ad-load":e.adLoad,"ad-change-frame-style":function(t){e.adRendered=!0}}}):e._e()],1),e.adRendered?t("div",{staticClass:"adv_footer_box"},[t("mp-search-link",{attrs:{keyword:e.keywordItem.keyword},on:{click:e.goSouyisou}})],1):e._e()])])],1)}),[],!1,null,"074c4d68",null,null).exports;const Xn=ht({components:{AuthorChangeAlbum:He,[Xo.name]:Xo,[Ye.name]:Ye,[Xe.name]:Xe,[ye.name]:ye,[ve.name]:ve,[Bn.name]:Bn,[Fe.name]:Fe,[Ln.name]:Ln,[Tt.name]:Tt,[Yn.name]:Yn},data:()=>({showBottomBar:!!window.is_login,hasExtLoadDone:!!window.ext_complete_success}),computed:{...pe(["cgiData"]),...pe({statStyle:e=>{var t;return 3===(null==(t=e.extRes.appmsgstat)?void 0:t.style)?1:0}}),...ue("mp-keep-read",["canShowCard"]),reprintStyle(){return this.cgiData.reprint_style},showReward(){return 0===this.cgiData.is_pay_subscribe||1===this.cgiData.isPaid},isPaySubscribe(){return 1*this.cgiData.is_pay_subscribe==1},albumTags(){return this.cgiData.album_info_list},showGongYi(){var e;return!!(null==(e=this.cgiData.yqj_info)?void 0:e.yqj_did)&&(!!this.cgiData.is_login||xt)}},created(){se.on("ext-complete-success",(()=>{this.hasExtLoadDone=!0})),G.on("onScreenShot",(()=>{R.setSum(114217,17,1)}))},mounted(){const e=document.getElementById("js_temp_bottom_area");e&&(e.style.display="none")},methods:{onShare(){wn()}}},(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"content_bottom_area"}},[e.reprintStyle?e._e():[t("mp-sponsor-ad"),e._v(" "),e.showGongYi&&e.showReward?t("mp-gongyi"):e._e()],t("mp-added-info"),e._v(" "),e.reprintStyle?e._e():[e.showReward&&!e.showGongYi?t("mp-reward",{attrs:{"show-author":""}}):e._e(),e._v(" "),e.isPaySubscribe&&!e.reprintStyle?t("mp-pay-read"):e._e()],t("div",{staticClass:"rich_media_tool_area empty_hide"},[e.canShowCard?[t("mp-keep-read"),e._v(" "),t("mp-reward-close-tip")]:[t("mp-reward-close-tip"),e._v(" "),t("mp-keep-read")],t("mp-like-read-area",{attrs:{"stat-style":1,"show-bottom-bar":e.showBottomBar},on:{share:e.onShare}})],2),t("mp-ad-keyword-bottom-modal"),e._v(" "),t("AuthorChangeAlbum")],2)}),[],!1,null,null,null,null).exports,Zn=window.Vue;let ea,ta=!1;try{ea=new Mt("relatedArticle"),ea.version(1).stores({articles:"triplekey, relatedlist, timestamp, showRecReason"})}catch(jd){na("initRelatedArticleDB",jd)}async function ia(){await async function(e=oa){try{return window.navigator&&window.navigator.storage&&window.navigator.storage.estimate?window.navigator.storage.estimate().then((({quota:t,usage:i})=>i>=t||i>=e)):!!(window.navigator&&window.navigator.webkitTemporaryStorage&&window.navigator.webkitTemporaryStorage.queryUsageAndQuota)&&new Promise((t=>{window.navigator.webkitTemporaryStorage.queryUsageAndQuota(((i,o)=>{t(i>o||i>=e)}))}))}catch(jd){return na("getIfCurrentUsageExceed",jd),!1}}()&&await async function(){if(!ta)try{ea.transaction("rw",ea.articles,(async()=>{ta=!0;const e=await ea.articles.count(),t=Math.floor(e/2),i=await ea.articles.orderBy("timestamp").limit(t),o=await i.delete();console.log("clean oldArticles count",o)}))}catch(jd){na("cleanRelatedArticleList",jd)}finally{ta=!1}}()}const oa=1e8;function na(e,t){try{let i="indexDBError-".concat(e,"-");t&&t.message?i+=t.message:t&&(i+=JSON.stringify(t)),R.setLogs({id:110809,key:84,value:1,log:encodeURIComponent(i)}),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("related article err","biz=".concat(window.biz," mid=").concat(window.mid," idx=").concat(window.idx),{mid:"mmbizwap:related_article_db_err",view:"wap_business",_info:{error:t,errorMsg:i}}),console.log(t)}catch(i){console.log(i)}}const aa=j.getInnerHeight(),sa=100*Math.random()<1,ra=[window.biz,window.mid,window.idx].join("_"),da=q.os.ipad||!$.isIOS&&!$.isAndroid;let ca=0;$.isIOS?ca=1:$.isAndroid&&(ca=2);const la=[{name:"内容低质",value:1},{name:"不看此公众号内容",value:2}],pa=(()=>{let e=!1;const t=[],i=o=>{e=!0,P({url:"/mp/relatedarticle?action=expose",type:"POST",dataType:"json",data:o,complete(){t.length?i(t.shift()):e=!1}})};return o=>{e?t.push(o):i(o)}})(),ma=window.matchMedia("(prefers-color-scheme: dark)"),_a=(e="")=>{if(!e)return"";const t=parseInt("0x".concat(e.slice(1,3)),16),i=parseInt("0x".concat(e.slice(3,5)),16),o=parseInt("0x".concat(e.slice(5,7)),16),n=parseInt("0x".concat(e.slice(7,9)),16);return"rgba(".concat(i,", ").concat(o,", ").concat(n,", ").concat(t/255,")")};const ua=ht({name:"mp-related-article",filters:{getRecTagStyle:(e,t)=>e?{color:_a(t?e.dark_mode_text_color:e.text_color)}:{},dateToString(e){const t=(new Date).getTime()/1e3-e,i=(new Date).getFullYear(),o=new Date(1e3*e);return t<60?"".concat(Math.floor(t),"秒前"):t<3600?"".concat(Math.floor(t/60),"分钟前"):t<86400?"".concat(Math.floor(t/60/60),"小时前"):t<172800?"昨天":t<604800?"".concat(Math.floor(t/24/60/60),"天前"):o.getFullYear()===i?"".concat(o.getMonth()+1,"月").concat(o.getDate(),"日"):"".concat(o.getFullYear(),"年").concat(o.getMonth()+1,"月").concat(o.getDate(),"日")}},components:{Intersect:be},data(){const{cgiData:e}=this.$store.state;return{list:[],reason:[],reportInfo:"",showRecReason:!1,showList:!$.isMpapp&&1*e.item_show_type==0&&""!==e.item_show_type,unbindTransition:!1,listStyle:{overflow:"hidden",opacity:1,height:0,margin:0},feedbackIdx:-1,feedbackPos:"bottom",feedbackReasonTacitly:{},feedbackReasonKeyword:{},darkModeMatches:ma.matches,relatedArticleListInfo:null,isCreatePlaceholder:!1,hasDataInDB:0}},computed:{...pe(["extRes"]),...pe("mp-related-article",["notLoad","sources"]),...ue("mp-like-and-share",["hasExtAppmsgStat"]),commonReportData(){const{cgiData:e}=this.$store.state;let t=parseInt(window.enterid,10)||0;return!$.isWp&&-1===navigator.userAgent.indexOf("MicroMessenger")&&document.body.offsetWidth>=1024&&(t=1024,R.setSum(223326,18,1)),{Bizuin_from:e.biz,Msgid_from:parseInt(e.mid,10)||0,Itemidx_from:parseInt(e.idx,10)||0,Scene:parseInt(e.source,10)||0,Subscene:parseInt(e.subscene,10)||parseInt(e.source,10)||0,Sessionid:e.sessionid||"",Enterid:t,ItemShowType:parseInt(e.item_show_type,10)||0}},type(){return this.sources[0]},isPageInit(){return this.sources[1]},isFromPay(){return"pay"===this.type?1:0},loadType(){switch(this.type){case"default":default:return 0;case"favorite":return 1;case"share":return 2;case"praise":return 3;case"like":return 4;case"pay":return 5;case"reward":return 6;case"favorited":return 7;case"shared":return 8;case"praised":return 9;case"liked":return 10;case"paid":return 11;case"rewarded":return 12;case"recommend":return 13;case"force":return 14;case"subscribe":return 15}},hasFeedbackReason(){return!!(Object.keys(this.feedbackReasonTacitly).length+Object.keys(this.feedbackReasonKeyword).length)},isKuaiXun(){return this.relatedArticleListInfo&&(1===this.relatedArticleListInfo.style||2===this.relatedArticleListInfo.style)},hasExtLoadDone(){var e,t;return void 0!==(null==(t=null==(e=this.extRes)?void 0:e.base_resp)?void 0:t.ret)},canShowList(){return!!this.showList&&(this.hasExtLoadDone?!this.notLoad&&(1===this.hasDataInDB||!!this.type):!(!this.list||!this.list.length))}},watch:{sources(){this.$nextTick(this.loadData)}},created(){this.hasReported29433=!1,this.exposeHeight=0,this.loadDataFromDB()},mounted(){if(this.itemHeight=parseFloat(window.getComputedStyle(this.$el).getPropertyValue("--RELATE-ITEM-HEIGHT")),this.itemHeightPx=0,sa&&window.WX_BJ_REPORT){const{cgiData:e}=this.$store.state;window.WX_BJ_REPORT.BadJs.report("relatedArticleFlag","value:".concat(e.relatedArticleFlag),{mid:"mmbizwap:related_monitor",uin:e.user_uin})}ma.addListener((({matches:e})=>{this.darkModeMatches=!!e})),re.on(window,"scroll",this.loadData),re.on(window,"scroll",this.exposeHandler)},beforeDestroy(){this.destroy()},methods:{preloadMoreKuaixun(){G.invoke("onWebPageUrlExposed",{bizType:0,urlList:[{url:this.relatedArticleListInfo.more_url,extInfo:{itemshowType:0,preloadType:0}}]})},async loadData(){if(!this.hasExtLoadDone||!this.canShowList||[0,1].includes(this.hasDataInDB)||this.__lock)return;const e=this.extRes.distance_to_get_related_article_data||-1;e>=0&&j.getElementActualTop(this.$refs.jsRelatedArea)-j.getScrollTop()-aa>aa*e||(this.__lock=!0,this.$nextTick((()=>{if(144===this.commonReportData.Scene)return;const{cgiData:e}=this.$store.state;this.isPageInit&&(this.listStyle.transition="none");this.list&&this.list.length||(R.setSum(110809,81,1),R.setSum(110809,83,1),P({url:"/mp/relatedarticle?action=precheck&article_url=".concat(window.encodeURIComponent(location.href),"&__biz=").concat(e.biz,"&mid=").concat(e.mid,"&idx=").concat(e.idx,"&has_related_article_info=").concat(e.hasRelatedArticleInfo,"&is_pay=").concat(this.isFromPay,"&scene=").concat(this.commonReportData.Scene,"&subscene=").concat(parseInt(e.subscene,10)||0,"&is_open_comment=").concat(this.extRes.comment_enabled).concat("subscribe"===this.type?"&is_from_subscribe=1":""),type:"GET",dataType:"json",success:t=>{t&&t.base_resp&&1*t.base_resp.ret==0&&1*t.empty_scene==0&&(this.__placeholderTimer=setTimeout((()=>{this.isCreatePlaceholder=!0,R.setSum(314064,25,1),this.showCard(3)}),500),P({url:"/mp/relatedarticle?action=directgetlist&article_url=".concat(window.encodeURIComponent(location.href),"&__biz=").concat(e.biz,"&mid=").concat(e.mid,"&idx=").concat(e.idx,"&has_related_article_info=").concat(e.hasRelatedArticleInfo,"&is_pay=").concat(this.isFromPay,"&scene=").concat(this.commonReportData.Scene,"&subscene=").concat(parseInt(e.subscene,10)||0,"&is_open_comment=").concat(this.extRes.comment_enabled).concat("subscribe"===this.type?"&is_from_subscribe=1":""),type:"GET",dataType:"json",success:t=>{if(sa&&t&&1*t.empty_scene!=0&&this.isCreatePlaceholder&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs.report("empty_scene","empty_scene:".concat(t.empty_scene),{mid:"mmbizwap:related_monitor",uin:e.user_uin}),t&&t.base_resp&&1*t.base_resp.ret==0&&t.list&&t.list.length){const i=t.list.map((e=>(e.url=e.url.replace(/#wechat_redirect$/,"&show_related_article=1&subscene=".concat(this.commonReportData[132===this.commonReportData.Scene?"Subscene":"Scene"],"$&")),e.like_num_wording=e.old_like_num?te.formatReadNum(e.old_like_num):"",e.read_num_wording=e.read_num?te.formatReadNum(e.read_num):"",e.pay_cnt_wording=e.pay_cnt?te.formatReadNum(e.pay_cnt):"",e)));sa&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs.report("list.length","list.length:".concat(i.length),{mid:"mmbizwap:related_monitor",_info:{relatedArticleFlag:e.relatedArticleFlag,isPc:da},uin:e.user_uin}),this.list=i,this.$emit("list-data-change",this.list),this.list.forEach((({url:e,ext_info:i})=>{D.report(29139,Object.assign({Bizuin:B.getQuery("__biz",e),Msgid:parseInt(B.getQuery("mid",e),10)||0,Itemidx:parseInt(B.getQuery("idx",e),10)||0,ExtInfo:i,RecInfo:t.report_info},this.commonReportData))})),this.reason=la,this.reportInfo=t.report_info||"",this.showRecReason=1===t.show_rec_reason;const o={list:i,showRecReason:1===t.show_rec_reason,style:t.style,more_url:t.more_url};!async function(e,t){await ia();try{const i=await ea.articles.add({triplekey:e,relatedlist:t.list,timestamp:Date.now(),showRecReason:t.showRecReason,style:t.style,more_url:t.more_url});i&&(console.log("add success",i),await ia())}catch(jd){na("addRelatedArticleListToDB",jd)}}(ra,o),this.relatedArticleListInfo=o,this.showRelatedArticles(t.list.length)}else this.clearPlaceholderTimeout((e=>{!e&&this.setLines(0),this.destroy()}))}}))},error:e=>{console.error(e),this.clearPlaceholderTimeout((e=>{!e&&this.setLines(0),this.destroy()}))}}))})))},async loadDataFromDB(){const e=await async function(e){try{const t=await ea.articles.get({triplekey:e});return ea.articles.update(e,{timestamp:Date.now()}),console.log("getRelatedArticleList",t),t?{list:t.relatedlist,showRecReason:t.showRecReason,style:t.style,more_url:t.more_url}:void 0}catch(jd){na("getRelatedArticleListFromDB",jd)}}(ra);e&&e.list&&e.list.length?(R.setSum(110809,81,1),R.setSum(110809,82,1),this.list=e.list,this.showRecReason=e.showRecReason,this.relatedArticleListInfo=e,this.reason=la,this.hasDataInDB=1,this.getRecReason(),this.showRelatedArticles(this.list.length),this.$emit("list-data-change",this.list)):this.hasDataInDB=2},showRelatedArticles(e){this.clearPlaceholderTimeout((t=>{t?this.showCard(e):this.setLines(e),this.listStyle.opacity=1,this.listStyle.overflow="visible",this.$nextTick((()=>{this.exposeHandler(),window.ipados13_font_scale&&C(this.$refs.jsRelatedArea,window.ipados13_font_scale/100),!this.isPageInit&&this.canShowList&&Ct.setCompRenderInfo({compEle:this.$refs.jsRelatedArea,compType:"mp-related-article",compIdx:1,wrapper:document.querySelector("#page_bottom_area")},this.$refs.jsRelatedArea.offsetHeight+parseInt(getComputedStyle(this.$refs.jsRelatedArea).marginTop,10))}))}))},showCard(e){this.setLines(e),delete this.__placeholderTimer},setLines(e){if(!this.canShowList)return;const t=this.$refs.jsRelatedTitle,i=-1===document.body.className.indexOf("pages_skin_pc")?40:60,o=t?t.getBoundingClientRect().height:i,n=this.$refs.moreNews,a=n?n.offsetHeight:0;let s=0;if(0===e){if(this.isCreatePlaceholder){const e=this.$refs.jsRelatedArea,t=e&&this.isPercentInViewport(e);if(t){let e=0;switch(!0){case t>=1:e=31;break;case t>=.8:e=30;break;case t>=.6:e=29;break;case t>=.4:e=28;break;case t>=.2:e=27;break;default:e=26}R.setSum(314064,e,1),R.setSum(314064,32,1)}}this.listStyle.overflow="hidden",this.listStyle.margin="0",this.unbindTransition=!0}else window.is_like_profile_gray,this.listStyle.margin="8px 0 0",s="calc(".concat(e*this.itemHeight,"em + ").concat(o,"px + ").concat(a,"px)");const r={compEle:this.$refs.jsRelatedArea,compType:"mp-related-article",compIdx:1,wrapper:document.querySelector("#page_bottom_area")};this.setLinesTimes=this.setLinesTimes?this.setLinesTimes+1:1,1!==this.setLinesTimes&&(r.subCompType="setLine-".concat(this.setLinesTimes)),this.isPageInit&&Ct.renderCompSilentlyPreHandler(r),this.listStyle.height=s,this.isPageInit&&this.$nextTick((()=>{Ct.renderCompSilently(r)})),this.isPageInit&&e&&this.transitionEndHandler({propertyName:"height"})},getHeight(e){return this.itemHeightPx||(this.$refs.relatedPlaceholder?this.itemHeightPx=this.$refs.relatedPlaceholder.getBoundingClientRect().height:this.itemHeightPx=te.qs(".js_related_item",this.$refs.jsRelatedList).getBoundingClientRect().height),e*this.itemHeightPx+te.qs(".js_related_title",this.$refs.jsRelatedMain).getBoundingClientRect().height},clearPlaceholderTimeout(e){this.__placeholderTimer?(clearTimeout(this.__placeholderTimer),delete this.__placeholderTimer,"function"==typeof e&&e(!0)):"function"==typeof e&&e(!1)},jumpArticle(e){const t=e.currentTarget,{dataset:i}=t,{url:o}=i;R.setSum(110809,23,1),D.report(18832,Object.assign({LoadType:this.loadType,Actiontype:2,Type:1,Bizuin:B.getQuery("__biz",o),Msgid:parseInt(B.getQuery("mid",o),10)||0,Itemidx:parseInt(B.getQuery("idx",o),10)||0,Sendtimestamp:parseInt(i.time,10)||0,Pos:(1*i.index||0)+1,Recalltype:1*i.recalltype,Isreaded:1*i.isreaded,Mmversion:ca,ExpType:i.exptype,ExtInfo:i.ext_info,RecInfo:i.report_info},this.commonReportData)),$.isOnlyWechat&&!$.isMpapp?G.invoke("openWebViewUseFastLoad",{url:o,item_show_type:i.item_show_type,scene:132,subscene:this.commonReportData[132===this.commonReportData.Scene?"Subscene":"Scene"],openType:0},(e=>{console.log("openWebViewUseFastLoad res: ",e),e&&e.err_msg&&-1===e.err_msg.indexOf("ok")&&qe(o.replace(/#wechat_redirect$/,"&scene=132$&"))})):location.href=o.replace(/#wechat_redirect$/,"&scene=132$&")},goKuaixunFeed(){G.invoke("openUrlWithExtraWebview",{url:this.relatedArticleListInfo.more_url,openType:1})},exposeHandler(){if(!this.canShowList)return;const{jsRelatedArticleItem:e}=this.$refs;if(!e)return;const{top:t,bottom:i}=this.$refs.jsRelatedArea.getBoundingClientRect();if(!(t>aa||i<0)){let o=0;o=t<0?i:i>aa?aa-t:i-t,this.exposeHeight=Math.max(this.exposeHeight,o);const n=[];for(let t=0;t<e.length;t++){const i=e[t];if(1*i.dataset.hasreport!=1){const e=i.clientHeight/2,o=i.getBoundingClientRect().bottom;o>=e&&o<=e+aa&&((e,t)=>{const{dataset:i}=e,{url:o}=i;i.hasreport=1,R.setSum(110809,21,1);const a={LoadType:this.loadType,Actiontype:1,Type:1,Bizuin:B.getQuery("__biz",o),Msgid:parseInt(B.getQuery("mid",o),10)||0,Itemidx:parseInt(B.getQuery("idx",o),10)||0,Sendtimestamp:parseInt(i.time,10)||0,Pos:t+1,Recalltype:1*i.recalltype,Mmversion:ca,Isreaded:1*i.isreaded,ExpType:i.exptype,ExtInfo:i.ext_info,RecInfo:i.report_info};D.report(18832,Object.assign(a,this.commonReportData)),pa({bizuin:i.bizuin,mid:i.mid,idx:i.idx}),n.push({item_show_type:i.item_show_type,url:o})})(i,t)}}n.length&&G.invoke("downloadPageDataForFastLoad",{itemList:n},(e=>{console.log("downloadPageDataForFastLoad",e)})),this.report29433()}},transitionEndHandler(e){this.unbindTransition||"height"!==e.propertyName||(this.unbindTransition=!0)},destroy(){this.showList=!1,re.off(window,"scroll",this.loadData),re.off(window,"scroll",this.exposeHandler)},showFeedback(e){const{jsRelatedArticleItem:t}=this.$refs,i=t[e];this.feedbackIdx=e,this.feedbackPos=aa-i.getBoundingClientRect().bottom<268?"top":"bottom",this.$nextTick((()=>{this.$refs.feedbackBd[e].focus()})),xe.show({alpha:.3,onClick:()=>{this.hideFeedback()}})},hideFeedback(){this.feedbackIdx=-1,this.feedbackPos="bottom",this.feedbackReasonTacitly={},this.feedbackReasonKeyword={},xe.hide()},submitFeedback(e){if(this.hasFeedbackReason){const t={tacitly:Object.keys(this.feedbackReasonTacitly).map((e=>1*e)),keyword:Object.keys(this.feedbackReasonKeyword)},{cgiData:i}=this.$store.state,o={biz_from:i.biz,mid_from:i.mid,idx_from:i.idx,recommended_biz:B.getQuery("__biz",e.url),mid:B.getQuery("mid",e.url),idx:B.getQuery("idx",e.url),reason:JSON.stringify(t)};P({type:"POST",url:"/mp/relatedarticle?action=dislike",dataType:"json",data:o,success:t=>{if(console.log(t),t&&t.base_resp&&0===t.base_resp.ret){this.hideFeedback();const t=this.list.indexOf(e);t>-1&&(this.list.splice(t,1),this.setLines(this.list.length),async function(e,t){try{ea.transaction("rw",ea.articles,(async()=>{await ea.articles.get(e);const i=await ea.articles.update(e,{relatedlist:t.list});console.log("updatedResult",i)}))}catch(jd){na("updateRelatedArticleList",jd)}}(ra,{list:this.list}))}else window.weui.alert("系统错误，请稍后再试")}})}},chooseFeedbackReason(e){const t=e.currentTarget,i=J.hasClass(t,"js_reason")?this.feedbackReasonTacitly:this.feedbackReasonKeyword,{value:o}=t.dataset;i[o]?this.$delete(i,o):this.$set(i,o,1)},report29433(){if(this.hasReported29433)return;this.hasReported29433=!0;const{cgiData:e}=this.$store.state,t={bizuin_from1:e.biz,msgid_from1:parseInt(e.mid,10)||0,Itemidx_from:parseInt(e.idx,10)||0,ItemShowType:parseInt(e.item_show_type,10)||0};D.report(29433,Object.assign({Type:0},t)),D.leaveReport(29433,(()=>Object.assign({Type:1,Pos_Height:Math.round(this.exposeHeight),Is_article_exposed:Array.prototype.some.call(this.$refs.jsRelatedArticleItem,(e=>1*e.dataset.hasreport==1))?1:0},t)))},getRecReason(){if(!this.list||!this.list.length)return;const e=[],t=[];this.list.forEach((i=>{const o={};o.bizuin=i.bizuin,o.mid=i.mid,o.idx=i.idx,e.push(o),t.push([i.bizuin,i.mid,i.idx].join("_"))}));const i=encodeURIComponent(JSON.stringify({appmsg_list:e}));P({type:"GET",url:"/mp/getrecreason?appmsg_list=".concat(i),dataType:"json",success:e=>{if(e&&e.base_resp&&0===e.base_resp.ret){const i=e.appmsg_list;i&&i.length&&i.forEach((e=>{const i=[e.bizuin,e.mid,e.idx].join("_"),o=t.indexOf(i);if(o>=0&&this.list[o]){const{rec_reason:t}=e;t&&t.wording&&(this.list[o].rec_reason=t)}}))}}})},isPercentInViewport(e){const t=We.getId("js_article_bottom_bar"),i=t?t.offsetHeight:0,o=e.getBoundingClientRect(),n=Math.min(o.bottom,ke.height-i)-Math.max(o.top,0);return n<=0?0:n/o.height}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"related_container"},[e.canShowList?t("div",{ref:"jsRelatedArea",staticClass:"relate_mod_transition function_mod js_related_area",style:e.listStyle,on:{transitionend:e.transitionEndHandler}},[t("div",{ref:"jsRelatedMain",staticClass:"function_mod_index js_related_main"},[e.isKuaiXun?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title",staticStyle:{display:"flex","justify-content":"space-between"}},[e._v(" 相关快讯 "),1===e.relatedArticleListInfo.style?t("Intersect",{attrs:{threshold:[1]},on:{"~enter":function(t){return e.preloadMoreKuaixun.apply(null,arguments)}}},[t("span",{staticStyle:{color:"#576b95","font-weight":"500"},on:{click:e.goKuaixunFeed}},[e._v("更多")])]):e._e()],1):"share"===e.type||"shared"===e.type?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title"},[e._v(" 分享此内容的人还喜欢 ")]):"favorite"===e.type||"favorited"===e.type?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title"},[e._v(" 收藏此内容的人还喜欢 ")]):"subscribe"===e.type?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title"},[e._v(" 关注此账号的人还喜欢 ")]):e.list.length?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title"},[e._v(" 喜欢此内容的人还喜欢 ")]):e._e(),t("div",{staticClass:"function_bd"},[e.list.length?t("div",{ref:"jsRelatedList",staticClass:"relate_article_index_list relate_article_list js_related_list",staticStyle:{height:"auto"}},[e._l(e.list,(function(i,o){return t("div",{key:o,ref:"jsRelatedArticleItem",refInFor:!0,staticClass:"weui-media-box weui-media-box_appmsg js_related_item js_wx_tap_highlight wx_tap_cell",attrs:{"data-index":o,"data-url":i.url,"data-time":i.send_time,"data-recalltype":i.recall_type,"data-isreaded":i.is_readed,"data-bizuin":i.bizuin,"data-mid":i.mid,"data-idx":i.idx,"data-item_show_type":i.item_show_type,"data-exptype":i.exptype,"data-ext_info":i.ext_info,"data-report_info":e.reportInfo},on:{click:e.jumpArticle}},[t("div",{staticClass:"weui-media-box__bd"},[t("div",{class:["ellipsis_relate_title mask_ellipsis_wrp mask_ellipsis_auto_height",i.is_pay_subscribe?i.is_paid?"relate_article_paid":"relate_article_pay":"relate_article_default",e.showRecReason?"relate_article_tag_before":""],attrs:{role:"link",tabindex:"0","aria-labelledby":"relate_article_title_"+i.mid+"_"+i.idx+" js_a11y_comma relate_article_tag_"+i.mid+" js_a11y_comma0 relate_article_nickname_"+i.mid+"_"+i.idx+" js_a11y_comma1 relate_article_num_"+i.mid+"_"+i.idx}},[t("div",{staticClass:"mask_ellipsis_text",attrs:{"aria-hidden":"true"}},[e._v(" "+e._s(i.title)+" "),i.is_pay_subscribe&&i.is_paid?t("span",{staticClass:"pay__tag"},[e._v(" 已付费 ")]):i.is_pay_subscribe?t("span",{staticClass:"unpay__tag"},[e._v(" 付费 ")]):e._e()]),t("div",{staticClass:"mask_ellipsis",attrs:{"aria-hidden":"true"}},[t("div",{staticClass:"mask_ellipsis_text",attrs:{id:"relate_article_title_"+i.mid+"_"+i.idx}},[e._v(" "+e._s(i.title)+" "),i.is_pay_subscribe&&i.is_paid?t("span",{staticClass:"pay__tag"},[e._v(" 已付费 ")]):i.is_pay_subscribe?t("span",{staticClass:"unpay__tag"},[e._v(" 付费 ")]):e._e()]),t("div",{staticClass:"mask_ellipsis_placeholder"}),t("div",{staticClass:"mask_ellipsis_extra"},[i.is_pay_subscribe&&i.is_paid?t("span",{staticClass:"pay__tag"},[e._v(" 已付费 ")]):i.is_pay_subscribe?t("span",{staticClass:"unpay__tag"},[e._v(" 付费 ")]):e._e()])])]),t("div",{staticClass:"weui-media-box__info weui-flex"},[t("div",{staticClass:"weui-media-box__info__inner weui-flex weui-flex_align-center weui-flex__item"},[e.showRecReason&&i.rec_reason&&i.rec_reason.wording?t("div",{staticClass:"weui-media-box__info__meta relate_profile_tag",attrs:{"aria-hidden":"true",id:"relate_article_tag_"+i.mid+"_"+i.idx}},[t("span",{staticClass:"icon_appmsg_tag",style:e._f("getRecTagStyle")(i.rec_reason,e.darkModeMatches)},[e._v(" "+e._s(i.rec_reason.wording)+" ")])]):e._e(),t("div",{staticClass:"js_profile relate_profile_nickname weui-media-box__info__meta",attrs:{"aria-hidden":"true",id:"relate_article_nickname_"+i.mid+"_"+i.idx,"data-username":i.username}},[e._v(" "+e._s(i.nickname)+" ")]),e.isKuaiXun?t("div",{staticClass:"js_profile relate_profile_nickname weui-media-box__info__meta",attrs:{"aria-hidden":"true",id:"relate_article_nickname_"+i.mid+"_"+i.idx}},[e._v(" "+e._s(e._f("dateToString")(i.send_time))+" ")]):e._e(),e.showRecReason?e._e():t("div",{staticClass:"weui-media-box__info__meta",attrs:{"aria-hidden":"true",id:"relate_article_num_"+i.mid+"_"+i.idx}},[i.old_like_num>=10?[e._v("赞 "+e._s(i.like_num_wording))]:i.is_pay_subscribe&&i.pay_cnt?[e._v(" 付费 "+e._s(i.pay_cnt_wording)+" ")]:i.read_num?[e._v("阅读 "+e._s(i.read_num_wording))]:e._e()],2)]),t("div",{staticClass:"relate_article_opr"},[t("button",{ref:"feedbackBtn",refInFor:!0,staticClass:"reset_btn dislike_btn js_feedback_btn weui-wa-hotarea",attrs:{type:"button"},on:{touchstart:function(e){e.stopPropagation()},touchend:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.showFeedback(o)}}},[e._v(" 不喜欢 ")])]),t("div",{ref:"feedbackBd",refInFor:!0,class:["feedback_dialog_wrp js_feedback_dialog",e.feedbackIdx===o?"feedback_dialog_show":""],attrs:{role:"dialog","aria-modal":"true",tabindex:"0","aria-hidden":e.feedbackIdx!==o?"true":"false"},on:{click:function(e){e.stopPropagation()},touchstart:function(e){e.stopPropagation()},touchmove:function(e){e.preventDefault()},touchend:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()}}},[t("div",{staticClass:"weui-mask js_mask",attrs:{role:"button","aria-label":"关闭"},on:{click:e.hideFeedback}}),t("div",{class:["feedback_dialog js_dialog_wrp","top"===e.feedbackPos?"feedback_dialog_pos_top":""]},[t("div",{staticClass:"feedback_dialog_hd weui-flex"},[t("div",{staticClass:"weui-flex__item feedback_dialog_title"},[e._v("不看的原因")]),t("button",{class:["weui-btn weui-btn_primary weui-btn_mini js_submit",e.hasFeedbackReason?"":"weui-btn_disabled"],attrs:{type:"button"},on:{click:function(t){return e.submitFeedback(i)}}},[e._v(" 确定 ")])]),t("div",{staticClass:"feedback_dialog_bd"},[t("ul",{staticClass:"feedback_tag_list"},[e._l(e.reason,(function(i){return t("li",{key:i.value,class:["feedback_tag_item js_reason js_tag_item",e.feedbackReasonTacitly[i.value]?"feedback_tag_selected":""],attrs:{role:"checkbox","aria-checked":!!e.feedbackReasonTacitly[i.value],"data-value":i.value},on:{click:e.chooseFeedbackReason}},[e._v(" "+e._s(i.name)+" ")])})),e._l(i.keyword,(function(i,o){return[o<2?t("li",{key:i,class:["feedback_tag_item js_keyword js_tag_item",e.feedbackReasonKeyword[i]?"feedback_tag_selected":""],attrs:{role:"checkbox","aria-checked":!!e.feedbackReasonKeyword[i],"data-value":i},on:{click:e.chooseFeedbackReason}},[e._v(" 对"+e._s(i)+"不感兴趣 ")]):e._e()]}))],2)])])])])]),t("div",{staticClass:"weui-media-box__ft"},[t("img",{directives:[{name:"wxpic-src",rawName:"v-wxpic-src",value:i.cover,expression:"item.cover"}],staticClass:"relate_article_cover",attrs:{alt:"相关阅读封面"}})])])})),e.relatedArticleListInfo&&2===e.relatedArticleListInfo.style?t("Intersect",{attrs:{threshold:[1]},on:{"~enter":function(t){return e.preloadMoreKuaixun.apply(null,arguments)}}},[t("div",{ref:"moreNews",staticClass:"more_news weui-media-box",on:{click:e.goKuaixunFeed}},[e._v(" 更多快讯 "),t("svg",{attrs:{width:"10",height:"20",viewBox:"0 0 10 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.04504 5.48386L2.92893 4.59998L7.74467 9.41572C8.06978 9.74083 8.07266 10.265 7.74467 10.593L2.92893 15.4088L2.04504 14.5249L6.56556 10.0044L2.04504 5.48386Z"}})])])]):e._e()],2):[e._m(0),t("div",{staticClass:"relate_article_list relate_article_placeholder"},[t("div",{ref:"relatedPlaceholder",staticClass:"weui-media-box weui-media-box_appmsg"},[t("div",{staticClass:"weui-media-box_placeholder"})])])]],2)])]):e._e()])}),[function(){var e=this._self._c;return e("div",{staticClass:"relate_list_loading"},[e("span",{staticClass:"weui-primary-loading",attrs:{role:"img"}},[e("span",{staticClass:"weui-primary-loading__dot"})])])}],!1,null,"9872e98e",null,null).exports,ha="--appmsgExtra-BG";const wa=ht({components:{[ua.name]:ua,[qt.name]:qt,[vt.name]:vt,[bt.name]:bt,cmtComplaint:Ht,ProductSearch:Wt,secPerformance:Jt},data:()=>({isNewMpApp:$.isNewMpApp,bottomBounceColor:ha,hasExtLoadDone:!1,hasBottomAd:!1,hasRelatedArticle:!1,fetchBeforeExtResp:!window.__immersiveListMode,commentStatus:{showPreComment:!1,isShowComment:!1,isLoading:!1,isInitial:!1,isEmpty:!0},adObserver:null,onlyComment:"1"===B.getQuery("only_comment")}),computed:{cmtStoreBase:()=>$.isNewMpApp?"mp-app-comment":"mp-comment",...pe("mp-product-searchwords",["productList","productSearchLoading"]),...pe(["extRes","cgiData"]),...pe({fansMsgEnabled(e,t){return t["".concat(this.cmtStoreBase,"/fansMsgEnabled")]},commentEnabled(e,t){return t["".concat(this.cmtStoreBase,"/commentEnabled")]},commentId(e,t){return t["".concat(this.cmtStoreBase,"/commentId")]},writeCommentEntry(e,t){return t["".concat(this.cmtStoreBase,"/writeCommentEntry")]}}),hasExtraCnt(){return this.fansMsgEnabled||1===this.commentEnabled&&1*this.commentId!=0||this.hasBottomAd||this.hasRelatedArticle},showRelatedArticle(){return!!this.extRes&&(this.showProductSearch?!this.cgiData.isRefutedAppmsg&&!this.productSearchLoading&&!this.productList.length:!this.cgiData.isRefutedAppmsg)},showProductSearch(){return this.extRes&&[2,3].includes(this.extRes.show_related_search_word)||1===window.hitProduct},cmtFold:()=>"1"===B.getQuery("newsflash_single_card")&&B.getQuery("aggr_url")&&!$.isPC},watch:{bottomBounceColor(e){this.setBottomBounceColor(e)}},created(){this.setBottomBounceColor(this.bottomBounceColor),se.on("ext-complete-success",(()=>{this.hasExtLoadDone=!0,this.updateBgColor()}))},mounted(){},beforeDestroy(){this.adObserver&&this.adObserver.disconnect()},methods:{loadBottomAd(){var e;const t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const{target:i}=e;"js_bottom_opr_right"===i.id?(R.setSum(364569,0,1),t.unobserve(i)):i.classList.contains("mpda_bottom_container")&&(R.setSum(364569,1,1),t.unobserve(i))}}))}),{root:null,rootMargin:"0px",threshold:.05}),i=document.getElementById("js_bottom_opr_right"),o=document.querySelector(".mpda_bottom_container");i&&t.observe(i),o&&t.observe(o),this.adObserver=t,this.hasBottomAd=!0,this.updateBgColor(),!q.os.pc&&(null==(e=window.appmsg_bar_data)?void 0:e.is_show_newsflash_feeds)&&R.setSum(530135,30,1)},onRelatedArticleListDataChange(e){this.hasRelatedArticle=e.length>0,this.updateBgColor()},commentStatusChange(e,t){this.commentStatus[e]=t,this.updateBgColor()},updateBgColor(){this.hasExtLoadDone?this.commentStatus.isShowComment&&!this.commentStatus.isEmpty||this.commentStatus.isShowComment&&this.commentStatus.isInitial&&!this.fansMsgEnabled&&this.writeCommentEntry?this.bottomBounceColor="":this.hasBottomAd||this.hasRelatedArticle||this.commentStatus.isShowComment&&(!this.commentStatus.isShowComment||!this.commentStatus.isEmpty||this.commentStatus.isLoading||this.commentStatus.isInitial)?this.commentStatus.isEmpty||(this.bottomBounceColor=ha):this.bottomBounceColor="":this.commentStatus.showPreComment&&(this.bottomBounceColor="")},setBottomBounceColor(e){Ft.set(e?{bottom:Vt.get(e)}:void 0),document.body.classList[e?"remove":"add"]("wx_wap_page_primary")},scrollToComment(){const e=this.$refs.comment.$refs.comment.$el.getBoundingClientRect();Ie.start({y:e.y+window.scrollY})},submitComment(e){this.__submitingComment||(this.__submitingComment=!0,this.$refs.comment.$refs.comment.sendComment({content:e,successEnd:this.scrollToComment,complete:()=>{this.__submitingComment=!1}}))},showAccessComment(e){this.$refs.comment.$refs.comment.showCmtInput(e)},onRenderComment(e){},onShowMoreRepliesSuccess(){},beforeHidePercomment(){document.scrollingElement.style.minHeight||(document.scrollingElement.style.minHeight=document.scrollingElement.scrollHeight+"px",this.__hasSetTmpMinHeight=!0)},afterHidePercomment(){this.__hasSetTmpMinHeight&&(document.scrollingElement.style.minHeight="",this.__hasSetTmpMinHeight=!1)},async cmtScrollPosFix({cmtEl:e,expandHeight:t}={}){await this.$nextTick();const i=e.getBoundingClientRect(),o=(window.immersiveMode?window.normalTopInset||91:0)-i.top;o>0&&(document.scrollingElement.scrollTop-=o)}}},(function(){var e=this,t=e._self._c;return t("div",{class:{has_extra_cnt:e.hasExtraCnt},staticStyle:{position:"relative"},attrs:{id:"page_bottom_area"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.onlyComment,expression:"!onlyComment"}],ref:"cmtTop"},[t("div",{staticStyle:{"font-size":"0",height:"0"},attrs:{"aria-hidden":"true"}},[e._v("​")]),e.showProductSearch?t("ProductSearch"):e._e(),t("mp-bottom-ad",{on:{"ad-load":e.loadBottomAd}}),e.showRelatedArticle?t("mp-related-article",{on:{"list-data-change":e.onRelatedArticleListDataChange}}):e._e()],1),t("mp-appmsg-comment",{ref:"comment",attrs:{"lazy-show":!0,"fetch-before-ext-resp":e.fetchBeforeExtResp,"comment-scene":"bottomComment",fold:e.cmtFold},on:{"per-comment-status":t=>e.commentStatusChange("showPreComment",t),"show-comment-change":t=>e.commentStatusChange("isShowComment",t),"loading-change":t=>e.commentStatusChange("isLoading",t),"initial-change":t=>e.commentStatusChange("isInitial",t),"empty-change":t=>e.commentStatusChange("isEmpty",t),"render-comment":e.onRenderComment,"show-more-replies-success":e.onShowMoreRepliesSuccess,"before-hide-percomment":e.beforeHidePercomment,"after-hide-percomment":e.afterHidePercomment,"scroll-pos-fix":e.cmtScrollPosFix}}),t("cmtComplaint"),e.isNewMpApp?t("mp-interaction-bar",{on:{"submit-comment":e.submitComment,"scroll-to-comment":e.scrollToComment,"show-access-comment":e.showAccessComment}}):e._e(),t("secPerformance")],1)}),[],!1,null,null,null,null).exports,ga=window.Vue;const fa=navigator.userAgent,ya=/(iPhone|iPad|iPod|iOS)/i.test(fa),va=/Windows\sPhone/i.test(fa),ba=/(Android)/i.test(fa),xa=/MicroMessenger\/([\d\.]+)/i.test(fa),ka=(/mac\sos/i.test(fa),/windows\snt/i.test(fa),/MPAPP\/([\d\.]+)/i.test(fa),/iPad/i.test(fa),/WindowsWechat/i.test(fa),/MacWechat/i.test(fa)||/wechat.*mac os/i.test(fa),xa&&window.WeixinPrefecherJSBridge,/SAAASDK/i.test(fa),/OpenHarmony|ArkWeb/i.test(fa)),Ia=(/Linux\s/i.test(fa),fa.match(/XWEB\/([\d.]+)/i));Ia&&Ia[1]&&parseInt(Ia[1],10),/UnifiedPC\w+Wechat/i.test(fa),ba&&/miniprogram/.test(fa.toLowerCase())||window.__wxjs_environment,/wxwork/i.test(fa);function Sa(){const e=fa.match(/MicroMessenger\/([\d\.]+)/i);return!(!e||!e[1])&&e[1]}function Aa(){const e=fa.match(/MacWechat\/([\d\.]+)/i);return!(!e||!e[1])&&e[1]}function Ta(){const e=fa.match(/wxwork\/([\d\.]+)/i);return!(!e||!e[1])&&e[1]}function Ca(){let e=[2,4,5];const t=navigator.userAgent.match(/MPAPP\/(\d+(\.\d+)*)/);return t&&(e=t[1].split(".").map((e=>Number(e)))),e.join(".")}function Ea(e){return Number(Number("0x".concat(e)).toString(10))}function Ra(){const e=fa.match(/MicroMessenger\/[\d\.]+\(0x(.+?)\)/i);if(e&&e[1]&&null!=e[1])return e[1];if(!e&&/MicroMessenger\/[\d\.]+/i.test(fa)){const e=function(){const e=location.search.substring(1).split("&"),t={};for(const i of e){const e=i.split("="),o=decodeURIComponent(e[0]);void 0===t[o]&&(t[o]=decodeURIComponent(e[1]))}return t}();if(e.version)return e.version}return!1}const Pa={"cp-1":(e,t)=>e<t,cp0:(e,t)=>e===t,cp1:(e,t)=>e>t};function ja(e,t,i,o){let n=!1;switch(o){case"mac":n=Aa();break;case"windows":n=function(){const e=navigator.userAgent.match(/WindowsWechat\(0x(\w+?)\)/);if(e&&2===e.length){const t=e[1];return[Ea(t.slice(1,2)),Ea(t.slice(2,4)),Ea(t.slice(4,6))].join(".")}return!1}();break;case"wxwork":n=Ta();break;case"mpapp":n=Ca();break;case"unifiedpc":n=function(){const e=navigator.userAgent.match(/UnifiedPC\w+Wechat\(0xf\w{2}(\w+?)\w{2}\)/);if(e&&2===e.length){const t=e[1];return[Ea(t.slice(0,1)),Ea(t.slice(1,2)),Ea(t.slice(2,3))].join(".")}}();break;default:n=Sa()}if(!n)return;const a=n.split("."),s=e.split(".");/\d+/g.test(a[a.length-1])||a.pop();for(let r=0,d=Math.max(a.length,s.length);r<d;++r){const e=a[r]||"",i=s[r]||"",o=parseInt(e,10)||0,n=parseInt(i,10)||0;if(Pa.cp0(o,n))continue;return(0,Pa["cp".concat(t)])(o,n)}return i||0===t}let Da=!1;const Ba=Ra();if(ba&&Ba){const e="0x".concat(Ba.substr(-2));parseInt(e)>=64&&parseInt(e)<=79&&(Da=!0)}ka&&xa&&ja("1.0.0",1,!0);const La=window.Vue;function Na(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
Na=function(){return t};var e,t={},i=Object.prototype,o=i.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",r=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(j){c=function(e,t,i){return e[t]=i}}function l(e,t,i,o){var a=t&&t.prototype instanceof g?t:g,s=Object.create(a.prototype),r=new R(o||[]);return n(s,"_invoke",{value:A(e,i,r)}),s}function p(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(o){return{type:"throw",arg:o}}}t.wrap=l;var m="suspendedStart",_="suspendedYield",u="executing",h="completed",w={};function g(){}function f(){}function y(){}var v={};c(v,s,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(P([])));x&&x!==i&&o.call(x,s)&&(v=x);var k=y.prototype=g.prototype=Object.create(v);function I(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(n,a,s,r){var d=p(e[n],e,a);if("throw"!==d.type){var c=d.arg,l=c.value;return l&&"object"==Te(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){i("next",e,s,r)}),(function(e){i("throw",e,s,r)})):t.resolve(l).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,r)}))}r(d.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){i(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function A(t,i,o){var n=m;return function(a,s){if(n===u)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw s;return{value:e,done:!0}}for(o.method=a,o.arg=s;;){var r=o.delegate;if(r){var d=T(r,o);if(d){if(d===w)continue;return d}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===m)throw n=h,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=u;var c=p(t,i,o);if("normal"===c.type){if(n=o.done?h:_,c.arg===w)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(n=h,o.method="throw",o.arg=c.arg)}}}function T(t,i){var o=i.method,n=t.iterator[o];if(n===e)return i.delegate=null,"throw"===o&&t.iterator.return&&(i.method="return",i.arg=e,T(t,i),"throw"===i.method)||"return"!==o&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+o+"' method")),w;var a=p(n,t.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,w;var s=a.arg;return s?s.done?(i[t.resultName]=s.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,w):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,w)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var i=t[s];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function i(){for(;++n<t.length;)if(o.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}throw new TypeError(Te(t)+" is not iterable")}return f.prototype=y,n(k,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:f,configurable:!0}),f.displayName=c(y,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,d,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},I(S.prototype),c(S.prototype,r,(function(){return this})),t.AsyncIterator=S,t.async=function(e,i,o,n,a){void 0===a&&(a=Promise);var s=new S(l(e,i,o,n),a);return t.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},I(k),c(k,d,"Generator"),c(k,s,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),i=[];for(var o in t)i.push(o);return i.reverse(),function e(){for(;i.length;){var o=i.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=P,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(o,n){return r.type="throw",r.arg=t,i.next=o,n&&(i.method="next",i.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],r=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var d=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(d&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(d){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,w):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),E(i),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var o=i.completion;if("throw"===o.type){var n=o.arg;E(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,o){return this.delegate={iterator:P(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=e),w}},t}var Oa=new L("font-scale"),Ma=new zt({dbName:"font-scale-db",version:2,tables:[{tableName:"content-font-scale",schema:"triplekey, fontScale, lastUpdateTime, clientFontScale"}]}),za=[.9,1,1.1,1.2,1.3,1.4,1.5],Wa=za[0],qa=za[za.length-1];function Ua(e){var t=Math.round(10*e)/10;if(t<=za[0])return 0;if(t>=za[za.length-1])return za.length-1;var i=za.indexOf(t);return-1!==i?i:1}const Ha=Gt({name:"mp-font-pannel",components:$t({},we.name,we),data:function(){return{fontScale:1,SMALLEST_SCALE:Wa,LARGEST_SCALE:qa,clientFontScale:100}},created:function(){var e=this;this._event={},["fontSizeChange","hide"].forEach((function(t){e._event[t]={_id:0,_once:{}}}))},mounted:function(){var e=this,t=window,i=t.biz,o=t.mid,n=t.idx;this.clientFontScale=window.clientFontScale?window.clientFontScale:Kt(!0),window.lastFontScale&&(this.fontScale=window.lastFontScale,this.setFontScale(i,o,n,this.fontScale)),G.on("onClickMenuSetFontScale",(function(t){e.show()})),this._handleBeforeUnload=function(){e.updateLastUpdateTime()},window.addEventListener("beforeunload",this._handleBeforeUnload),window.addEventListener("pagehide",this._handleBeforeUnload),N.addReport((function(){return e.setUnloadTime()}))},beforeDestroy:function(){this._handleBeforeUnload&&(window.removeEventListener("beforeunload",this._handleBeforeUnload),window.removeEventListener("pagehide",this._handleBeforeUnload))},methods:{show:function(){this.$refs.bottomModal.show(),this.$nextTick((function(){document.body.classList.remove("page_no_scroll")})),this._addTouchListeners()},hide:function(){this.$refs.bottomModal.hide(),this._removeTouchListeners()},onHide:function(){this._removeTouchListeners(),this._emit("hide",[])},_addTouchListeners:function(){var e=this;this._touchStartOutside=!1,this._hasTouchMoved=!1,this._handleTouchStart=function(t){var i,o,n=null===(i=e.$refs.bottomModal)||void 0===i||null===(o=i.$refs)||void 0===o?void 0:o.contentArea;e._touchStartOutside=n&&!n.contains(t.target),e._hasTouchMoved=!1},this._handleTouchMove=function(){e._hasTouchMoved=!0,e._touchStartOutside&&e.hide()},this._handleTouchEnd=function(){e._touchStartOutside&&!e._hasTouchMoved&&e.hide()},this._handleContainerTouchMove=function(e){e.preventDefault()},this.$nextTick((function(){e._containerEl=e.$refs.fontPannelContainer,e._containerEl&&e._containerEl.addEventListener("touchmove",e._handleContainerTouchMove,{passive:!1})})),document.addEventListener("touchstart",this._handleTouchStart),document.addEventListener("touchmove",this._handleTouchMove),document.addEventListener("touchend",this._handleTouchEnd)},_removeTouchListeners:function(){this._handleTouchStart&&(document.removeEventListener("touchstart",this._handleTouchStart),this._handleTouchStart=null),this._handleTouchMove&&(document.removeEventListener("touchmove",this._handleTouchMove),this._handleTouchMove=null),this._handleTouchEnd&&(document.removeEventListener("touchend",this._handleTouchEnd),this._handleTouchEnd=null),this._containerEl&&this._handleContainerTouchMove&&(this._containerEl.removeEventListener("touchmove",this._handleContainerTouchMove),this._containerEl=null,this._handleContainerTouchMove=null),this._touchStartOutside=!1,this._hasTouchMoved=!1},increaseFontSize:function(){var e=window,t=e.biz,i=e.mid,o=e.idx;null==G||G.invoke("vibrateShort",{style:"medium"});var n=Ua(this.fontScale);n<za.length-1&&(this.fontScale=za[n+1]),this.setFontScale(t,i,o,this.fontScale),this._emit("fontSizeChange",["increase",this.fontScale])},decreaseFontSize:function(){var e=window,t=e.biz,i=e.mid,o=e.idx;null==G||G.invoke("vibrateShort",{style:"medium"});var n=Ua(this.fontScale);n>0&&(this.fontScale=za[n-1]),this.setFontScale(t,i,o,this.fontScale),this._emit("fontSizeChange",["decrease",this.fontScale])},bind:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._event.hasOwnProperty(e)){if("function"==typeof t){var o=this._event[e];return(i?o._once:o)[o._id]=t,o._id++}console.error("[FontPannel bind error]: handler should be a function")}else console.error("[FontPannel bind error]: event `".concat(e,"` is not support"))},unbind:function(e,t){var i=this._event[e];i.hasOwnProperty(t)&&delete i[t]},_emit:function(e,t){var i=this._event[e],o=Object.keys(i);o.length>2&&o.forEach((function(e){return/\d+/.test(e)&&i[e].apply(i,Se(t))}));var n=Object.keys(i._once);n.length&&(n.forEach((function(e){var o;return(o=i._once)[e].apply(o,Se(t))})),i._once={})},setFontScale:function(e,t,i,o){var n=this;return Ae(Na().mark((function a(){var s,r,d,c,l;return Na().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=e+"-"+t+"-"+i,r=Date.now(),d=r+31536e6,c=Kt(),Oa.set(s,{fontScale:o,lastUpdateTime:r,clientFontScale:c},d),a.next=7,Ma.put("content-font-scale",{triplekey:s,fontScale:o,lastUpdateTime:r,clientFontScale:c});case 7:!0,l=o*(n.clientFontScale||Kt(true)),Qt(l);case 10:case"end":return a.stop()}}),a)})))()},updateLastUpdateTime:function(){var e=this;return Ae(Na().mark((function t(){var i,o,n,a,s,r,d;return Na().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=window,o=i.biz,n=i.mid,a=i.idx,o&&n&&a){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,s=o+"-"+n+"-"+a,r=Oa.get(s),d=(null==r?void 0:r.fontScale)||1,t.next=9,e.setFontScale(o,n,a,d);case 9:console.log("========lastUpdateTime updated"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log("updateLastUpdateTime error",t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,12]])})))()}}},(function(){var e=this,t=e._self._c;return t("mp-bottom-modal",{directives:[{name:"max-font-scale",rawName:"v-max-font-scale",value:1.18,expression:"1.18"}],ref:"bottomModal",attrs:{"auto-height":"","hide-when-scroll-down":"","hide-when-sideslip":"","close-btn-type":"fold","no-mask":!0,"ext-class":"font-pannel-modal","max-height":194},on:{hide:e.onHide},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"font-pannel-title"},[e._v("调整当前正文文字大小")])]},proxy:!0},{key:"default",fn:function(){return[t("div",{ref:"fontPannelContainer",staticClass:"font-pannel-container"},[t("div",{staticClass:"font-pannel-btn-group"},[t("div",{staticClass:"font-pannel-btn",class:{disabled:e.fontScale==e.SMALLEST_SCALE},on:{click:e.decreaseFontSize}},[t("span",{staticClass:"reduce-icon font-pannel-icon"})]),t("span",{staticClass:"font-pannel-size-num"},[e._v(e._s(Math.round(100*e.fontScale))+"%")]),t("div",{staticClass:"font-pannel-btn",class:{disabled:e.fontScale==e.LARGEST_SCALE},on:{click:e.increaseFontSize}},[t("span",{staticClass:"increase-icon font-pannel-icon"})])])])]},proxy:!0}])})}),[],!1,null,null,null,null).exports;var Fa=null;function Va(){return Fa||(Fa=new La({render:function(e){return e(Ha)}}).$mount("#font_pannel_area").$children[0]),Fa}!function(e,t){try{if("undefined"!=typeof document&&!document.getElementById(t.styleId)){var i=document.createElement("style");i.setAttribute("id",t.styleId);for(const e in t.attributes)i.setAttribute(e,t.attributes[e]);i.appendChild(document.createTextNode(".flex-center{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.flex-column-fill{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex:1;flex:1}.font-pannel-modal .weui-half-screen-dialog{background-color:var(--weui-BG-5);padding-bottom:0;box-shadow:0 -11px 32px #00000012}.font-pannel-modal .weui-half-screen-dialog__hd{min-height:56px}.font-pannel-modal .weui-half-screen-dialog__bd{padding:0;-ms-flex:1;flex:1;overflow:hidden}.font-pannel-title{font-size:15px;font-weight:500;background-color:var(--weui-BG-5);color:var(--weui-FG-0)}.font-pannel-container{padding-top:47px;width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;background-color:var(--weui-BG-5)}.font-pannel-btn-group{margin:0 auto;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.font-pannel-border{height:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.02)}@media (prefers-color-scheme: dark){.font-pannel-border{background:rgba(255,255,255,.03)}}.font-pannel-border span{width:.4px;height:28px;background:var(--weui-FG-3);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0}.font-pannel-size-num{font-size:15px;font-family:SF Pro,Arial;font-weight:400;color:var(--weui-FG-2);margin:0 20px;width:70px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;text-align:center}.font-pannel-btn-group:has(.font-pannel-btn:not(.disabled):active) .font-pannel-border{background:var(--weui-FG-3)}.font-pannel-btn{position:relative;font-size:40px;width:1em;height:1em;-ms-flex-negative:0;flex-shrink:0;background:rgba(0,0,0,.03);border-radius:4px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}@media (prefers-color-scheme: dark){.font-pannel-btn{background:rgba(255,255,255,.03)}}.font-pannel-btn:before{content:\"\";position:absolute;top:-10px;right:-10px;bottom:-10px;left:-10px}.font-pannel-btn:not(.disabled):active{background:var(--weui-FG-3)}.font-pannel-btn.disabled{pointer-events:none}.font-pannel-btn .icon{font-size:20px;width:1em;height:1em;background-color:var(--weui-FG-0);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-position:center;mask-position:center}.font-pannel-btn.disabled .font-pannel-icon{background-color:var(--weui-FG-2)}.font-pannel-btn .reduce-icon{font-size:20px;width:1em;height:1em;background-color:var(--weui-FG-0);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-position:center;mask-position:center;-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.25002 9.24988H10.75L17.0834 9.24989V10.7499H10.75L9.25002 10.75L2.91669 10.7499V9.24989L9.25002 9.24988Z' fill='black' fill-opacity='0.9'/%3E%3C/svg%3E%0A\");mask-image:url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.25002 9.24988H10.75L17.0834 9.24989V10.7499H10.75L9.25002 10.75L2.91669 10.7499V9.24989L9.25002 9.24988Z' fill='black' fill-opacity='0.9'/%3E%3C/svg%3E%0A\")}@media (prefers-color-scheme: dark){.font-pannel-btn .reduce-icon{background-color:#ffffffe6}}.font-pannel-btn .increase-icon{font-size:20px;width:1em;height:1em;background-color:var(--weui-FG-0);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-position:center;mask-position:center;-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.1 11.1V3.5H12.9V11.1H20.5V12.9H12.9V20.5H11.1V12.9H3.5V11.1H11.1Z' fill='black'/%3E%3Cscript xmlns=''/%3E%3C/svg%3E\");mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.1 11.1V3.5H12.9V11.1H20.5V12.9H12.9V20.5H11.1V12.9H3.5V11.1H11.1Z' fill='black'/%3E%3Cscript xmlns=''/%3E%3C/svg%3E\")}@media (prefers-color-scheme: dark){.font-pannel-btn .increase-icon{background-color:#ffffffe6}}.font-pannel-btn .font-pannel-btn-text{font-size:14px}")),document.head.appendChild(i)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}}(0,{styleId:"mp-common-components-0.808574628013085"});function Ja(e){J.removeClass(e,"rich_media_meta_link"),J.removeClass(e,"js_wx_tap_highlight")}const $a={initAuthorName:(e,t)=>{const i=document.getElementById("js_author_name");t.reward_entrance_enable_for_preview?$.isInMiniProgram&&i&&Ja(i):!$.isInMiniProgram&&($.isWindowsWechat||$.isMacWechat||$.isIOS||$.isAndroid||$.isHarmony)?(i&&e.rewardsn&&e.timestamp&&(i.setAttribute("data-rewardsn",e.rewardsn),i.setAttribute("data-timestamp",e.timestamp),i.setAttribute("data-canreward",e.can_reward)),i&&!e.can_reward&&Ja(i)):i&&Ja(i)}},Ga={tagName:"mp-common-cpslink",componentIdPropName:"data-link-component-id",clickReportPropName:"data-click-report-url",exposureReportPropName:"data-exposure-report-url",banPropName:"data-ban-status"},Ka={};function Qa(e){const t=Number(decodeURIComponent(e.getAttribute(Ga.banPropName)));return 1===t||0===t||-1===t}function Ya(e){P({url:"/mp/cps_product_info?action=UrlGet&product_type=1&url=".concat(encodeURIComponent(e)),type:"GET"})}function Xa(e){re.on(e,"click",(()=>{const t=decodeURIComponent(e.getAttribute("data-jump-url")),i=decodeURIComponent(e.getAttribute(Ga.clickReportPropName)||"");Qa(e)&&t&&(i&&Ya(i),qe(t))}))}function Za(){const e=document.getElementsByTagName(Ga.tagName);for(const t of e){const e=t.getAttribute(Ga.componentIdPropName);if(Ka[e])continue;const i=t.getBoundingClientRect();if(i.bottom>0&&i.top<window.innerHeight){const i=decodeURIComponent(t.getAttribute(Ga.exposureReportPropName)||"");if(!Qa(t)||!i)continue;Ya(i),Ka[e]=!0}}}const es={initCpslink:function(){const e=document.getElementsByTagName(Ga.tagName);for(const t of e)t.classList.add("js_wx_tap_highlight"),Xa(t);re.on(window,"scroll",Za)},updateCpslinkStatus:function(e){for(const t of e){if(!t||!t.component_id)continue;const e=t.component_id,i=document.querySelector("".concat(Ga.tagName,"[").concat(Ga.componentIdPropName,'="').concat(e,'"]'));i&&(i.setAttribute(Ga.clickReportPropName,t.click_url),i.setAttribute(Ga.exposureReportPropName,t.exp_url),i.setAttribute(Ga.banPropName,t.merge_status))}Za()}},ts='<div id="page-content">\n  \x3c!--S 全屏播放 full_screen_mv--\x3e\n  <div id="js_mpvedio_wrapper_<#=vid#>" style="position:relative;height:100%">\n    <div class="add_bg_color appmsg_video">\n      <div id="js_video_tail_panel_<#=vid#>" class="video_tail_module video_screen_half" style="display: none;">\n        <div class="video_tail_module__hd" id="js_video_tail_hd">\n          <div class="account_info_wrp">\n            <div class="profile_info_wrp js_go_profile">\n              <img class="account_avatar" src="" alt="" id="js_tail_panel_account_avatar">\n                <div class="account_name" id="js_tail_panel_account_name"></div>\n                <div class="subscription_info subscription_success">\n                  <div class="account_subscription_tips js_subscription_success" id="js_subscription_success"\n                    style="display: none;">已关注</div>\n                  <i class="account_link_icon js_profile_icon" id="js_profile_icon"></i>\n                </div>\n            </div>\n            <div class="btn_account_subscription js_btn_account_subscription" id="js_btn_account_subscription" style="display: none;">\n              关注</div>\n          </div>\n          <div class="opr_wrp">\n            <span class="opr_item_wrp js_replay" id="js_replay">\n              <i class="opr_item refresh_icon"></i>\n              <span class="opr_item_text">重播</span>\n            </span>\n            <span class="opr_item_wrp share_item_wrp js_share_button" id="js_tail_share_button"\n              style="display: none;">\n              <i class="opr_item share_icon"></i>\n              <span class="opr_item_text">分享</span>\n            </span>\n            \x3c!--点赞后 加className selected--\x3e\n            <span class="opr_item_wrp like_item_wrp" id="js_tail_like_button" style="display: none;">\n              <i class="opr_item like_icon"></i>\n              <span class="opr_item_text">赞</span>\n            </span>\n            \x3c!-- <span class="opr_item_wrp recommend_item_wrp" id="js_tail_channel_button"\n              style="display: none;">\n              <i class="opr_item video-logo_icon"></i>\n              <span class="opr_item_text">随便看看</span>\n            </span> --\x3e\n          </div>\n        </div>\n\n        \x3c!-- 有拓展内容 --\x3e\n        <div class="have_expand" id="js_expand_area">\n        </div>\n\n        \x3c!-- 广告内容 --\x3e\n        <div class="ad_area" id="js_tail_video_ad_area">\n        </div>\n      </div>\n    </div>\n    <div id="js_vue_player_<#=index#>"></div>\n  </div>\n  \x3c!--E 视频播放器--\x3e\n  \x3c!-- S 视频社交--\x3e\n  <div id="bottom_bar" class="interact_video" style="display:none;height: 35px;">\n    <div class="inter_opr">\n      <a id="video_detail_btn" href="javascript:;" target="_blank" class="access_original">\n        视频详情\n      </a>\n    </div>\n  </div>\n</div>';function is(){const e={hasShowBotbar:!1,mpVideoBotH:37,showComment:!0,loverCount:{}};let t={};function i(e,t){const i=t||window.location.search,o=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=i.substr(i.indexOf("?")+1).match(o);return null!=n?n[2]:""}function o(t){return document.querySelector("#js_mp_video_container_".concat(e.iframeIdx," #").concat(t))}function n(){!function(){let i=e.ratio;t.vw&&t.vh&&(i=t.vw/t.vh);const n=t.vw||e.dom.js_mpvedio.offsetWidth,s=Math.ceil(n/i),r=[Pt];$.isWechat&&!$.isNewMpApp&&(q.os.iphone||q.os.android)&&new Date(1e3*window.ct)>new Date("2022/01/12 19:00:00 GMT+0800")&&r.push(jt);const d={cgiData:t,preview:!(1*t.preview!=1),isInIframe:!0,hitBizuin:t.hit_bizuin,hitVid:t.hit_vid,fromid:e.scene,oriStatus:e.ori_status,isMpVideo:t.txvideo_vid?0:t.is_mp_video,plugins:r,oriVid:e.vid,vid:t.txvideo_vid?t.txvideo_vid:e.vid,ckey:t.txvideo_vid?"":e.ckey,ckey_ad:e.ckey_ad,width:+n,height:+s,__biz:e.__biz,uin:e.uin,mid:e.mid,idx:e.idx,coverFit:"contain",vtitle:window.msg_title,videoTitle:window.msg_title,useFeFullscreen:!0,comment_id:e.comment_id,scene_type:0,autoplay:e.autoplay,videoMd5:t.video_md5,headImgUrl:window.round_head_img,canShareVideo:!t.isPaySubscribe,bizUserName:window.user_name,bizNickName:window.nickname,profileTabType:1,leaveReport12710Type:1,storeFactory:e=>{const t=new Ce.Store({modules:{[Ee.name]:Ee},state:{...Re(),cgiData:e},mutations:Pe()});return t.registerModule([Ee.name,je.name],je),t.registerModule([Ee.name,De.name],De),t}},c=Et();e.myPlayer=new Rt({el:"#js_vue_player_"+e.iframeIdx,opt:d,store:c}),e.myPlayer.$on("player-ready",(()=>{if(e.dom.js_mpvedio.style.height="100%",a.showReprint()&&!e.hasShowBotbar){const i=o("bottom_bar");i&&(i.style.display="",e.hasShowBotbar=!0,oe.postMessage({type:"addVideoIframeHeight",data:{vid:t.txvideo_vid||e.id,height:e.mpVideoBotH}}))}oe.postMessage({type:"videoInited",data:{vid:e.id,ori_status:e.ori_status,hit_bizuin:t.hit_bizuin,hit_vid:t.hit_vid}})})),e.myPlayer.$on("video-ready",(()=>{oe.postMessage({type:"removeVideoLoading",data:{vid:e.vid}})})),e.myPlayer.$on("fullscreenchange",(t=>{"frontend"===t.type&&(t.state&&e.dom.js_mpvedio.parentNode!==document.body?(e.dom.js_mpvedio.style="position: fixed; top: 0; width: 100%; height: 100%",e.dom.js_mpvedio.style.zIndex=510,e.dom.js_article.style.opacity=0,window.requestAnimationFrame((()=>{document.body.appendChild(e.dom.js_mpvedio),t.supportSwipeBack||(e.dom.js_article.style.transition="opacity .1s")}))):t.state||e.dom.js_mpvedio.parentNode===e.dom.page_content||(e.dom.page_content.appendChild(e.dom.js_mpvedio),t.supportSwipeBack?(e.dom.js_mpvedio.style="position: relative; height: 100%",e.dom.js_article.style.opacity=1):(e.dom.js_mpvedio.style="",setTimeout((()=>{e.dom.js_article.style.opacity=1}),150))))}))}()}function s(a){const{vid:s,vh:r,vw:d,ratio:c,index:l,is_mp_video:p}=a,m=(window.__videoPageInfos||[]).find((({video_id:e})=>e===s))||{};new Promise((e=>{p?e():P({url:"/mp/videoplayer?action=tx_video&biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&vid=").concat(s,"&source=").concat(window.source),type:"GET",dataType:"json",f:"json",success:t=>{t&&t.base_resp&&0===t.base_resp.ret?e(t.ckey):e()},error:()=>e()})})).then((a=>{t={hit_bizuin:m.hit_bizuin,hit_vid:m.hit_vid,ori_status:m.ori_status,hit_username:m.hit_username,is_mp_video:/^wxv/.test(m.hit_vid)||m.is_mp_video,vh:r,vw:d,vid:s,ckey:a,ratio:c,iframeIdx:l,biz:window.biz,mid:window.mid,idx:window.idx,uin:window.uin,__biz:window.biz,video_title:window.cgiData.title||"",is_login:window.is_login,user_uin:window.user_uin,username:window.user_name,nick_name:window.nickname,preview:!!window.is_temp_url,create_time:window.create_time,source_encode_biz:window.source_encode_biz,comment_id:window.comment_id,show_comment:window.show_comment,isPaySubscribe:1*window.isPaySubscribe||0,bizNickname:window.nickname,roundHeadImg:window.round_head_img,subscene:window.subscene,enterid:1*window.enterid,sessionid:window.sessionid,channel_session_id:window.channel_session_id,real_item_show_type:window.real_item_show_type,item_show_type:window.item_show_type,clientversion:window.clientversion,devicetype:window.devicetype,isprofileblock:window.isprofileblock,sn:window.sn||i("sign",window.location.href)||"",scene:window.source||window.scene||i("scene",window.location.href)||0},1*t.ori_status==1?e.ori_status=1:1*t.ori_status==2?e.ori_status=2:e.ori_status=3,e.showComment=1*t.show_comment==1,e.comment_id=t.comment_id,e.vid=t.vid,e.ckey=t.ckey,e.ckey_ad=t.ckey_ad,e.__biz=t.__biz,e.uin=t.uin,e.mid=t.mid,e.idx=t.idx,e.scene=t.scene||i("scene",window.location.href)||0,e.autoplay=!!e.container.getAttribute("__sec_open_auto_play__"),e.iframeIdx=t.iframeIdx,e.dom={js_article:document.getElementById("js_article"),js_mpvedio:o("js_mpvedio_wrapper_"+e.vid),page_content:o("page-content")},n(),function(){const n=o("h5_profile_btn");n&&2===t.ori_status&&re.tap(n,(()=>{const e="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz="+t.source_encode_biz+"&scene=111#wechat_redirect";$.isWindowsWechat||$.isMacWechat?location.href=e:G.invoke("openUrlWithExtraWebview",{url:e,openType:1},(t=>{-1===t.err_msg.indexOf("ok")&&(location.href=e)}))}));const a=o("video_detail_btn");a&&/^wxv_/.test(t.vid||"")&&re.tap(a,(()=>{const o=["https://mp.weixin.qq.com/mp/video?t=pages/video_detail_new","&vid=",e.vid,"&mid=",e.mid,"&__biz=",e.__biz,"&idx=",e.idx,"&sn=",window.sn||i("sign",window.location.href)||"","&vidsn=",t&&t.vidsn?t.vidsn:"","&scene=100#wechat_redirect"];e.myPlayer&&e.myPlayer.extendMpReportData({detail_click:1}),window.location.href=o.join("")}))}()}))}return{createMpVideoDom:function(t,i,o){const n=B.getQuery("vid",o),a=t.getAttribute("data-vw"),r=t.getAttribute("data-vh"),d=t.getAttribute("data-ratio"),c=document.createElement("span"),l=t.attributes;for(let e=l.length-1;e>=0;e--)c.setAttribute(l[e].name,l[e].value);c.id="js_mp_video_container_"+i,c.setAttribute("vid",n),c.classList.add("video_iframe"),c.style.cssText=t.style.cssText,c.style.display="none";const p=Me.tmpl(ts,{vid:n,index:i,video_h:r},!1);c.innerHTML=p;const m=t.parentNode;return m?(m.lastChild===t?m.appendChild(c):m.insertBefore(c,t.nextSibling),m.removeChild(t),e.container=c,s({iframe:c,vid:n,vh:r,vw:a,ratio:d,index:i,is_mp_video:/^wxv_.+$/.test(n||"")}),c):null}}}function os(){const e={txVideoReg:/^http(s)*\:\/\/v\.qq\.com\/iframe\/(preview|player)\.html\?/,mpVideoReg:/^http(s)*\:\/\/mp\.weixin\.qq\.com\/mp\/readtemplate\?t=pages\/video_player_tmpl/,video_iframe:[],video_top:[]};function t(e){console.info("iframe_onload");let t=0;try{const i=document.getElementsByTagName("html").item(0).style["-webkit-text-size-adjust"],o=e.contentDocument;if(o){const e=o.getElementsByTagName("html").item(0);e&&(e.style["-webkit-text-size-adjust"]=i)}G.on("menu:setfont",(()=>{const t=function(e){let t=0;return e.contentDocument&&e.contentDocument.body.offsetHeight?t=e.contentDocument.body.offsetHeight:e.Document&&e.Document.body&&e.Document.body.scrollHeight?t=e.Document.body.scrollHeight:e.document&&e.document.body&&e.document.body.scrollHeight&&(t=e.document.body.scrollHeight),t}(e);e.parentElement&&0!==t&&(e.style.height="".concat(t,"px"))})),e.contentDocument&&e.contentDocument.body.offsetHeight?t=e.contentDocument.body.offsetHeight:e.Document&&e.Document.body&&e.Document.body.scrollHeight?t=e.Document.body.scrollHeight:e.document&&e.document.body&&e.document.body.scrollHeight&&(t=e.document.body.scrollHeight);if(e.parentElement&&(e.style.height=t+"px"),/MSIE\s(7|8)/.test(navigator.userAgent)&&e.contentWindow&&e.contentWindow.document){const t=e.contentWindow.document.getElementsByTagName("html");t&&t.length&&(t[0].style.overflow="hidden")}const n=e.contentWindow.document,a=n.querySelectorAll(".vote_option_title .img_panel img"),s="data-prevent-longtap";for(const e of a){if("1"===e.getAttribute(s))continue;e.setAttribute(s,"1"),e.style["pointer-events"]="none",e.addEventListener("touchstart",(e=>e.preventDefault()));const t=e.parentNode,i=t.parentNode,o=n.createElement("div");o.setAttribute("style","\n          position: absolute;\n          left: 0;\n          top: 0;\n          width: 100%;\n          height: 100%;\n        "),i.style.position="relative",i.removeChild(t),o.appendChild(t),i.appendChild(o),o.addEventListener("touchstart",(()=>e.dispatchEvent(new MouseEvent("click"))),!0)}Ho&&Ho.postPageHeightMessage&&Ho.postPageHeightMessage("updatePageHeight"),console.log("financeUtils done"),Ct.emitRenderNewHeightEvt()}catch(Pd){}}const i=[].slice.call(document.getElementsByTagName("iframe")),o=[],n=Math.ceil(1e4*Math.random());window.reportVid=[];for(let a=0,d=i.length;a<d;++a){const r=i[a],d=a;let c=r.getAttribute("data-src")||"";const l=r.className||"";let p=r.getAttribute("src")||c;if(!c||"#"===c){let e=r.getAttribute("data-display-src");if(e&&(0==e.indexOf("/cgi-bin/readtemplate?t=vote/vote-new_tmpl")||0==e.indexOf("https://mp.weixin.qq.com/cgi-bin/readtemplate?t=vote/vote-new_tmpl"))){e=e.replace(/&amp;/g,"&");const t=e.split("&"),i=["/mp/newappmsgvote?action=show"];t.forEach((e=>{0!=e.indexOf("__biz=")&&0!=e.indexOf("supervoteid=")||i.push(e)})),i.length>1&&(c=i.join("&")+"#wechat_redirect")}}if(p&&(e.txVideoReg.test(p)||e.mpVideoReg.test(p))||r.getAttribute("data-mpvid")&&r.getAttribute("data-mpvid").startsWith("wxv_")){const t=B.getQuery("vid",c)||r.getAttribute("data-mpvid"),i=(window.__videoPageInfos||[]).find((e=>e.video_id===t)),o=i&&i.hit_vid;if(s.isShowMpVideo()||e.mpVideoReg.test(p)||"".concat(o).startsWith("wxv_")){if(!t)return;const i=r.getAttribute("data-vw"),o=r.getAttribute("data-vh");"qq.com"==document.domain&&((new Image).src="https://badjs.weixinbridge.com/badjs?id=139&level=4&from="+window.encodeURIComponent(window.location.host)+"&msg="+window.encodeURIComponent(window.location.href),R.setLogs({id:27302,key:100,value:1,log:"[beforeD]"+window.encodeURIComponent(window.location.href)})),window.reportVid.push(t),p=["/mp/videoplayer?video_h=",o,"&video_w=",i,"&scene=",window.source,"&random_num=",n,"&article_title=",encodeURIComponent(window.msg_title.htmlDecode()),"&source=4&vid=",t,"&mid=",appmsgid,"&idx=",itemidx||idx,"&__biz=",biz,"&nodetailbar=",window.is_temp_url?1:0,"&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&version=",version,"&devicetype=",window.devicetype||"","&wxtoken=",window.wxtoken||"","&sessionid=",window.sessionid||"","&preview=",window.is_temp_url?1:0,"&is_in_pay_subscribe=",window.isPaySubscribe,"&nickname=".concat(window.nickname),"&roundHeadImg=".concat(window.round_head_img),"&enterid=".concat(window.enterid),"&subscene=".concat(window.subscene)].join("");const a=is().createMpVideoDom(r,d,p);e.video_iframe.push({dom:a,vid:t})}}else if(c&&(c.indexOf("newappmsgvote")>-1&&(l.indexOf("js_editor_vote_card")>=0||l.indexOf("vote_iframe")>=0)||0==c.indexOf("http://mp.weixin.qq.com/bizmall/appmsgcard")&&(l.indexOf("card_iframe")>=0||l.indexOf("js_editor_card")>=0)||c.indexOf("appmsgvote")>-1||c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")>-1)){if(window.is_transfer_msg&&!window.reprint_ticket&&c.indexOf(window.biz)<0)return void o.push(r);if(window.__second_open__||(c=c.replace(/^http:/,location.protocol)),l.indexOf("card_iframe")>=0||l.indexOf("js_editor_card")>=0){-1===l.indexOf("card_iframe")&&(r.className+=" card_iframe"),-1===l.indexOf("res_iframe")&&(r.className+=" res_iframe");let e=c.replace("#wechat_redirect",["&pass_ticket=",pass_ticket,"&scene=",source,"&msgid=",appmsgid,"&msgidx=",itemidx||idx,"&version=",version,"&devicetype=",window.devicetype||"","&child_biz=",biz,"&wxtoken=",window.wxtoken||""].join(""));reprint_ticket&&(e+=["&mid=",mid,"&idx=",idx,"&reprint_ticket=",reprint_ticket,"&source_mid=",source_mid,"&source_idx=",source_idx].join("")),window.__second_open__?P({url:e,type:"GET",f:"html",success:function(i){r.setAttribute("src",e),r.contentWindow.document.open("text/html","replace"),r.contentWindow.document.write(i),r.contentWindow.document.close(),r.contentWindow.history.replaceState(null,null,e),-1==c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(r.onload=function(){t(r)})}}):(r.setAttribute("src",e),-1==c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(r.onload=function(){t(r)}))}else{let e=c.indexOf("#wechat_redirect")>-1,i=["&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&wxtoken=",window.wxtoken||""].join("");reprint_ticket?i+=["&mid=",mid,"&idx=",idx,"&reprint_ticket=",reprint_ticket,"&source_mid=",source_mid,"&source_idx=",source_idx,"&appmsg_token=",appmsg_token].join(""):(l.indexOf("vote_iframe")>=0||l.indexOf("js_editor_vote_card")>=0)&&(i+=["&mid=",mid,"&idx=",idx,"&appmsg_token=",appmsg_token].join(""),-1===l.indexOf("vote_iframe")&&(r.className+=" vote_iframe"));let o=e?c.replace("#wechat_redirect",i):c+i;window.__second_open__?P({url:o,type:"GET",f:"html",success:function(e){r.contentWindow.Ajax=P,r.setAttribute("src",o),r.contentWindow.document.open("text/html","replace"),r.contentWindow.document.write(e),r.contentWindow.document.close(),r.contentWindow.history.replaceState(null,null,o),-1==c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(r.onload=function(){t(r)})}}):(r.setAttribute("src",o),-1==c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(r.onload=function(){t(r)}))}r.appmsg_idx=a}}function r(){const t=window.pageYOffset||document.documentElement.scrollTop,i=e.video_top.length,o=t+j.getInnerHeight();let n=0;for(let s=0;s<i;s++){const t=e.video_top[s];t.reported?n++:o>=t.start&&o<=t.end&&(t.reported=!0,setTimeout(function(e,t,i){return function(){const o=ne.getVideoInfo();let n="",s="",r=3;o[e]&&(o[e].hit_bizuin&&(n=o[e].hit_bizuin),o[e].hit_vid&&(s=o[e].hit_vid),o[e].ori_status&&(r=o[e].ori_status)),a.report({step:1,hit_vid:s,hit_bizuin:n,ori_status:r,vid:e,screen_num:Math.ceil(t/i),screen_height:i})}}(t.vid,o,j.getInnerHeight()),1e4))}n==i&&(re.off(window,"scroll",r),e.video_top=null,e.video_iframe=null,r=null)}if(o.forEach((e=>e.parentNode.removeChild(e))),window.iframe_reload=function(){i.forEach((e=>{const i=e.getAttribute("src");i&&(i.indexOf("newappmsgvote")>-1||i.indexOf("appmsgvote")>-1)&&t(e)}))},"getElementsByClassName"in document){const e=document.getElementsByClassName("video_iframe");for(let t,i=0;t=e.item(i++);)t.setAttribute("scrolling","no"),t.style.overflow="hidden"}e.video_iframe.length>0&&setTimeout((()=>{const t=e.video_iframe,i=document.getElementById("js_article");for(let o=0,n=t.length;o<n;o++){const n=t[o];if(!n||!n.dom)return;let a=n.dom;const s=parseFloat(getComputedStyle(a).getPropertyValue("height"));let r=0;for(;a&&i!==a;)r+=a.offsetTop,a=a.offsetParent;e.video_top.push({start:r+s/2,end:r+s/2+j.getInnerHeight(),reported:!1,vid:n.vid})}r(),re.on(window,"scroll",r)}))}const ns=[],as='<span class="original_img_wrp">\n<span class="tips_global">来自: <#=source_nickname#></span>\n</span>';function ss(e){let t=e.getAttribute("data-src")||e.getAttribute("src"),i=B.getQuery("vid",t),o=e.getAttribute("data-vw"),n=e.getAttribute("data-vh"),a=e.getAttribute("data-ratio"),s=document.createElement("span");s.setAttribute("data-ratio",a),s.id="js_tx_video_container_"+Math.random(),s.className="js_tx_video_container",s.style.cssText=e.style.cssText,s.style.display="none";let r=e.parentNode;if(r)return r.lastChild===e?r.appendChild(s):r.insertBefore(s,e.nextSibling),Dt.createTxVideo({containerId:s.id,vid:i,width:o,height:n,autoplay:!1,allowFullScreen:!0,onSuccess:function(e){s.playerObj=e.player,function(e,t){if(!t||!e)return;let i=e.parentNode;if(!i)return;let o=[];for(let n=0,a=i.children.length;n<a;n++){let e=i.children[n];e.className.indexOf("js_img_placeholder")>=0&&e.getAttribute("data-vid")==t&&o.push(e)}for(let n=0,a=o.length;n<a;n++)i.removeChild(o[n]);e.style.display="block"}(s,i),s.style.display="block"},onError:function(){}}),r.removeChild(e),s}function rs(){let e="27613";const t=te.getHeadimgTotalCount();_t.getData({biz:biz,appmsg_type:appmsg_type,mid:mid,sn:sn,idx:idx,scene:source,subscene:window.subscene||0,ascene:1*window.ascene||0,title:msg_title,ct:ct,abtest_cookie:abtest_cookie,devicetype:devicetype,version:window.clientversion,is_need_ticket:ns&&ns.length>0?1:0,is_need_ad:0,comment_id:comment_id,is_need_reward:is_need_reward,both_ad:0,reward_uin_count:is_need_reward?t:0,send_time:window.send_time||"",msg_daily_idx:msg_daily_idx,item_show_type:window.item_show_type,is_original:0,is_only_read:is_only_read,req_id:window.req_id||"",pass_ticket:pass_ticket,is_temp_url:window.is_temp_url||0,rtId:e,rtKey:"50",appmsg_like_type:window.appmsg_like_type,is_pay_subscribe:window.isPaySubscribe,pay_subscribe_uin_count:window.isPaySubscribe?t:0,has_red_packet_cover:window.__appmsgCgiData.has_red_packet_cover,export_key:B.getQuery("exportkey"),export_key_extinfo:"",segment_comment_id:window.segment_comment_id,show_related_article:window.show_related_article,onSuccess:function(t){if(t)try{if(window.__second_open__&&t&&1*!!t.bizfile_ret==1&&(window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem("isBanned-".concat(window.biz,"-").concat(window.mid,"-").concat(window.idx),"1"),window.location.href.indexOf("?")>-1?window.location.href=window.location.href+"&r="+Math.random()+"#wechat_redirect":window.location.href=window.location.href+"?r="+Math.random()+"#wechat_redirect"),i.commit("SET_EXT_RES",t),i.commit("mp-identity/setCurIdentity",{scene:"setRecordIdentity",identity:{type:t.identity_type,name:t.identity_name,nickname:t.nick_name||"",headImg:t.logo_url,bizattrServiceType:t.bizattr_servicetype}}),window.__second_open__&&t.pay_subscribe_info&&1*t.pay_subscribe_info.is_paid!=isPaid)return ot.report110809(11),(new Image).src="https://badjs.weixinbridge.com/badjs?id=244&level=4&from="+window.encodeURIComponent(window.location.host)+"&msg="+window.encodeURIComponent(window.location.href),void G.invoke("handleMPPageAction",{action:"paySuccess",fullUrl:window.location.href,itemShowType:window.item_show_type,url:location.href},(e=>{e.err_msg.indexOf("ok")>-1?ot.report110809(19):ot.report110809(20),window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem("isPaid-".concat(window.biz,"-").concat(window.mid,"-").concat(window.idx),"1"),window.location.href=window.location.href+"&r="+Math.random()+"#wechat_redirect"}));if(t&&t.base_resp&&t.base_resp.wxtoken&&(window.wxtoken=t.base_resp.wxtoken),window.fromWeixinCached&&os(),function(e){if(!e||!e.img_copy_info||!e.img_copy_info.list)return;let t={},i=e.img_copy_info.list,o=window.__appmsgCgiData.copyright_stat,n=window.__appmsgCgiData.source_biz;for(let s=0,r=i.length;s<r;s++){let e=i[s];if(2==e.type){if(2==o&&n==e.source_uin)continue;t[e.img_url]={source_nickname:e.source_nickname,source_uin:e.source_uin,source_encode_biz:e.source_encode_biz||""}}}let a=document.getElementsByTagName("img");for(let s=0,r=a.length;s<r;s++){let e=a[s],i=e.getAttribute("data-src")||e.getAttribute("data-backsrc")||"";if(t[i]){let o=document.createElement("div");o.innerHTML=Me.tmpl(as,t[i],!1);let n=o.children[0],a=e.parentNode.insertBefore(n,e),s=a.children[0];!function(e,t){re.on(t,"click",(function(t){let i="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz="+e.source_encode_biz+"&scene=112#wechat_redirect";return $.isWindowsWechat||$.isMacWechat?(location.href=i,!1):(G.invoke("openUrlWithExtraWebview",{url:i,openType:1},(function(e){-1==e.err_msg.indexOf("ok")&&(location.href=i)})),!1)}))}(t[i],s),a.insertBefore(e,s)}}}(t),t.ret)return;if(t.red_packet_cover_data&&t.red_packet_cover_data.cover_uri_data&&t.red_packet_cover_data.cover_uri_data.length>0&&(Y.init(),Y.render({list:t.red_packet_cover_data.cover_uri_data})),t.link_component_list&&t.link_component_list.length&&es.updateCpslinkStatus(t.link_component_list),window.lastText=t.effective_content_last_html_node||[],I.setLastTextNode(),I.setLastTextMsg(),I.checkEffectiveContentHeight(),window.isFans=t.is_fans,void 0!==t.watermark_setting){const e=[1,2].indexOf(t.watermark_setting)>-1;Zt.currentMpInfo({enableShareImageWatermark:e,imageWatermarkType:e?t.watermark_setting:0})}!function(e){let t=e.appmsgstat||{};const o=e.appmsgact||{},n=e.paySubscribeInfo||{};window.paySubscribeInfo=n,window.isFans=e.is_fans,window.appmsgstat||(window.appmsgstat=t),dt(),$a.initAuthorName(e.reward,{reward_entrance_enable_for_preview:e.reward_entrance_enable_for_preview}),window.isPaySubscribe&&_e.init(n,i);const a=document.querySelector("#js_star");if(a){const e=localStorage.getItem("star_info");let i=1*t.star_num||0;if(e){const t=JSON.parse(e);Number(t.mid)===Number(window.mid)&&Number(t.idx)===Number(window.idx)&&t.has_star&&0===i&&(i=1)}Xt(a,i,t.star_status)}let s=[];const{old_liked_before:r,seen_before:d,favorite_before:c,share_before:l,reward_before:p,pay_before:m}=o,{old_liked:_,liked:u}=t;(_||r)&&s.push("like"),(u||d)&&s.push("zaikan"),c&&s.push("collect"),l&&s.push("share"),p&&s.push("reward"),m&&s.push("pay"),window.is_like_profile_gray=e.show_biz_banner,window.is_like_profile_gray&&s.push("gray"),s.length>0&&i.commit("mp-like-profile/setSources",s),e.open_related_read_after_interaction&&i.commit("mp-related-article/setShowAfterInteraction",!0),e.close_related_article&&i.commit("mp-related-article/setNotLoad",!0),t.old_liked||o.old_liked_before?i.commit("mp-related-article/setSources",["praised",!0]):t.liked||o.seen_before?i.commit("mp-related-article/setSources",["liked",!0]):o.favorite_before?i.commit("mp-related-article/setSources",["favorited",!0]):o.share_before?i.commit("mp-related-article/setSources",["shared",!0]):e.show_related_article?i.commit("mp-related-article/setSources",["force",!0]):o.reward_before?i.commit("mp-related-article/setSources",["rewarded",!0]):o.pay_before&&i.commit("mp-related-article/setSources",["paid",!0])}({show_biz_banner:t.show_biz_banner,appmsgstat:t.appmsgstat,appmsgact:t.appmsgact,comment_enabled:t.comment_enabled,comment_count:t.comment_count,only_fans_can_comment:t.only_fans_can_comment,only_fans_days_can_comment:t.only_fans_days_can_comment,is_fans_days:t.is_fans_days,fans_days:t.fans_days||0,reward:{reward_total:t.reward_total_count,is_reward_total_count_cut:t.is_reward_total_count_cut,reward_head_img_infos:t.reward_head_img_infos||[],can_reward:t.can_reward,user_can_reward:t.user_can_reward,timestamp:t.timestamp,reward_author_head:t.reward_author_head,rewardsn:t.rewardsn,scene:source,is_need_reward:is_need_reward,title:msg_title,author_id:author_id,appmsgextRtId:e,appmsgextRtKey:"50",can_whisper:t.can_whisper},reward_entrance_enable_for_preview:t.reward_entrance_enable_for_preview,reward_wording:t.reward_wording,reward_author_head:t.reward_author_head,comment_entrance_enable_for_preview:t.comment_entrance_enable_for_preview,share_redirect_url:t.share_redirect_url||"",logo_url:t.logo_url,nick_name:t.nick_name,is_fans:t.is_fans,paySubscribeInfo:t.pay_subscribe_info,share_flag:t.share_flag,test_flag:t.test_flag,show_related_article:t.show_related_article,open_related_read_after_interaction:t.open_related_read_after_interaction,close_related_article:t.close_related_article,related_article_fast_close:t.related_article_fast_close,hit_bizrecommend:t.hit_bizrecommend}),window.ext_complete_success=!0,se.emit("ext-complete-success")}catch(Pd){return V.log("[Appmsg] error parse async data, biz="+biz+", mid="+mid),R.setLogs({id:24729,key:1,value:1,log:"biz:".concat(biz,",mid:").concat(mid,",uin:").concat(uin,",[key1]").concat(encodeURIComponent(Pd.toString())).substring(0,1024)}),console&&console.error(Pd),void(void 0!==window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.onError(Pd))}},onError:function(){R.setLogs({id:24729,key:2,value:1,log:"biz:".concat(biz,",mid:").concat(mid,",uin:").concat(uin,",[key2]ajax_err")})},onComplete:function(){window.ext_complete=!0,$.isOnlyWechat||(console.warn("window.ext_complete_success:",window.ext_complete_success),window.ext_complete_success=!0),se.emit("ext-complete")}})}function ds(){!function(){let e=document.getElementsByTagName("iframe"),t=[];for(let n=0,a=e.length;n<a;++n)t.push(e[n]);e=null;let i=document.getElementById("js_content").offsetWidth,o=i/a.getRatio();window.logs.video_cnt=0;for(let n=0,a=t.length;n<a;++n){let e=t[n],a=e.getAttribute("data-src")||"",r=e.getAttribute("src")||a;if(r)if(0==r.indexOf("http://z.weishi.com/weixin/player.html"))r=r.replace(/width=\d+/g,"width="+i),r=r.replace(/height=\d+/g,"height="+o),e.width=i,e.height=o,e.style.setProperty&&(e.style.setProperty("width",i+"px","important"),e.style.setProperty("height",o+"px","important")),e.setAttribute("src",r),window.__addIdKeyReport&&window.__addIdKeyReport("28307",10),window.logs.video_cnt++;else{if(/http(s)*\:\/\/v\.qq\.com\/iframe\/(preview|player)\.html\?/.test(r)){const t=B.getQuery("vid",a)||e.getAttribute("data-mpvid"),i=(window.__videoPageInfos||[]).find((e=>e.video_id===t)),o=i&&i.hit_vid;if(!s.isShowMpVideo()&&!"".concat(o).startsWith("wxv_")){const t=ss(e);t&&ns.push(t),"function"==typeof window.__addIdKeyReport&&(window.__addIdKeyReport("28307",10),$.isWechat&&$.isWindowsWechat?window.__addIdKeyReport("110644",0):$.isWechat&&$.isMacWechat&&window.__addIdKeyReport("110644",1))}window.logs.video_cnt++;continue}/^http(s)*\:\/\/mp\.weixin\.qq\.com\/mp\/readtemplate\?t=pages\/video_player_tmpl/.test(r)&&window.logs.video_cnt++}}ns.length>0&&"function"==typeof window.__getVideoWh&&re.on(window,"resize",(function(){try{for(let e=0,t=ns.length;e<t;e++){let t=ns[e],i=t.playerObj;if(i){let e=window.__getVideoWh(t);t.style.width=e.w+"px",t.style.height=e.h+"px",i.resize({width:e.vw,height:e.vh})}}}catch(Pd){}}),!1)}(),rs()}document.querySelectorAll("mp-common-product"),$.gtVersion("8.0.56",!0)&&$.isIOS&&!window.__second_open__&&(window.__offlineCacheScheme="mpfastloadimage");const cs=window.user_uin||0,ls=Math.floor(cs/100)%1e3,ps=0!==cs&&ls<1001,ms=.075,_s="517345",us=e=>/^[^:]+:\/\/mmecoa\.qpic\.cn/.test(e),hs=window.isCartoonCopyright||window.is_care_mode;function ws(e,t){window.logs.img={download:{},read:{},load:{}};const i=document.getElementById("js_cover");if(i){let e=i.getAttribute("data-src");e&&(e.isCDN()&&(e=e.imgChange640(),t&&(e=ai(e)),e=M(e,5),is_https_res||ps?e=e.http2https():"http:"!=location.protocol&&-1==navigator.userAgent.indexOf("MicroMessenger")||(e=e.https2http())),setTimeout((function(){i.onload=function(){ei.setProperty(i,"height","auto","important"),ei.setProperty(i,"visibility","visible","important")},i.setAttribute("src",e)}),0),window.logs.img.read[e]=!0,window.logs.img.load[e]=!0,i.removeAttribute("data-src"))}function o(e){return parseInt(e,10)||0}window.logs.outer_pic=0;const n=document.getElementsByTagName("img");for(let l=0,p=n.length;l<p;l++){const e=n[l].getAttribute("data-src");e&&e.isGif()&&n[l].classList.add("__bg_gif"),X(e)&&Z(n[l])}const a=document.getElementsByClassName("__bg_gif");for(let l=0,p=a.length;l<p;++l)a[l].setAttribute("data-order",l);const s=function(e){try{let t=e.childNodes,i=getComputedStyle(e);(i.backgroundImage.match(/https\:\/\/mmbiz\.qpic\.cn/)||i.backgroundImage.match(/http\:\/\/mmbiz\.qpic\.cn/))&&window.__addIdKeyReport("111535",2);for(let e=0;e<t.length;e++)"a"!=t[e].tagName.toLowerCase()&&s(t[e])}catch(Pd){}};try{const e=document.getElementsByTagName("a");for(let t=0;t<e.length;t++){const i=e.item(t);null!=(i.getAttribute("href")||"").match(/^http/)&&s(i)}}catch(Pd){}let r=!1;if(hs)return;const d=new URLSearchParams(window.location.search).has("for_export_screenshot"),{lazyLoadImgLoaded:c}=function(e){const t=document.getElementById("js_content"),i=t?t.querySelectorAll("img"):[];let o=0,n=!1;const a=i.length,s=new Set;if(0===a)return e(!0),{lazyLoadImgLoaded:()=>{}};const r=t=>{const i=(null==t?void 0:t.target)||t;s.has(i)||(s.add(i),o+=1,o===a&&n&&e(!0))};i.forEach((e=>{if(e.complete)r({target:e});else{const t=i=>{r(i),e.removeEventListener("load",t),e.removeEventListener("error",t)};e.addEventListener("load",t),e.addEventListener("error",t)}}));const d=()=>{n=!0,o===a&&n&&e(!0)};return{lazyLoadImgLoaded:d}}((()=>{console.log("======all-img-loaded"),window.dispatchEvent(new CustomEvent("all-img-loaded"))}));new Gn({attrKey:"data-src",imgOccupied:!0,crossOrigin:!0,forceLoadImg:d,inImgRead(e){e&&(window.logs.img.read[e]=!0)},changeSrc(i,o,n,a){if(!i)return"";if(window.__offlineCacheScheme)return o.removeAttribute("crossorigin"),i.canHevc()&&!i.isGif()?z(i.offline(),"tp","wxpic",!0):i.offline();let s=i;if(i.isCDN())s=s.imgChange640(),e&&s.canHevc()?(s=si(s,!1),window.__addIdKeyReport("28307",91),us(i)&&window.__addIdKeyReport(_s,3)):t?(s=ai(s),window.__addIdKeyReport("28307",84),us(i)&&window.__addIdKeyReport(_s,4)):s=z(s,"tp","nowebp",!0),s=M(s,"img"===a?5:15),is_https_res||ps?(s=s.http2https(),window.__addIdKeyReport("28307",77),us(i)&&window.__addIdKeyReport(_s,1)):"http:"!=location.protocol&&-1==navigator.userAgent.indexOf("MicroMessenger")||(s=s.https2http(),window.__addIdKeyReport("28307",70),us(i)&&window.__addIdKeyReport(_s,2));else try{new RegExp("^http(s)?://((mmbiz.qpic.cn/.*)|(m.qpic.cn/.*)|(mmsns.qpic.cn/.*)|(shp.qpic.cn/.*)|(puui.qpic.cn/.*)|(wx.qlogo.cn/.*)|(mmbiz.qlogo.cn/.*)|((a|b)[0-9]*.photo.store.qq.com/.*)|(mp.weixin.qq.com/.*)|(res.wx.qq.com/.*))").test(i)||(window.__addIdKeyReport("28307",9),window.logs.outer_pic++)}catch(Pd){}return s=s.replace(/^http\:\/\/(a|b)(\d)+\.photo\.store\.qq\.com/g,"http://m.qpic.cn"),/^http(s)?:\/\/m\.qpic\.cn([\/?].*)*$/i.test(s)&&!t&&(s=z(s,"t","",!0)),s=z(s,"wx_lazy","1",!0),console.log(s,a,s.isJpg(),i),!ri()||"img"!==a&&!s.isJpg()||s.isGif()||(o.removeAttribute("crossorigin"),s=di(s)),"anonymous"==o.crossOrigin&&(s=z(s,"wx_co","1",!0)),ci(s)&&(window.__addIdKeyReport("28307",106),us(s)&&window.__addIdKeyReport(_s,5)),window.logs.img.load[s]=!0,V.log("[Appmsg] image_load_event_change_src. originsrc:"+i+"  ^^^ newsrc : "+s),o.start_load_time=+new Date,s},onerror(e,t,i,n){let a,s=t&&t.__retryload||0;if("img"===n&&s>=2&&function(e,t,i){const n=i;!n||(n.width<40||n.height<40)&&(o(n.style.width)<40||o(n.style.height)<40)||n.classList.contains("wx_img_placeholder_err")||(n.classList.add("wx_img_placeholder_err"),n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",window.__addIdKeyReport("28307",51),n.bindRetry||(n.bindRetry=!0,re.on(n,"click",(()=>(window.__addIdKeyReport("28307",66),n.classList.remove("wx_img_placeholder_err"),e=e.https2http(),t.__retryload++,t.src=z(e,"retryload",t.__retryload,!0),!1)))))}(e,t,i),!e||s>2)return;if(!e.isCDN()){if(!ri())return;if(!ci(e)&&!e.isOffline())return}const r=0==e.indexOf("https://")?7:0;window.__addIdKeyReport("28307",72+r),us(e)&&window.__addIdKeyReport(_s,10+r),s<=1&&window.__addIdKeyReport("28307",75+1*s+r),s<=1&&us(e)&&window.__addIdKeyReport(_s,14+1*s+r),e.isWxpic()?(window.__addIdKeyReport("28307",93),us(e)&&window.__addIdKeyReport(_s,24),window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError:hevc",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),s<=1&&window.__addIdKeyReport("28307",96+1*s),s<=1&&us(e)&&window.__addIdKeyReport(_s,27+1*s)):e.isWebp()?(window.__addIdKeyReport("28307",86),us(e)&&window.__addIdKeyReport(_s,34),window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError:webp",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),s<=1&&window.__addIdKeyReport("28307",89+1*s),s<=1&&us(e)&&window.__addIdKeyReport(_s,37+1*s)):window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),ci(e)&&(window.__addIdKeyReport("28307",108),us(e)&&window.__addIdKeyReport(_s,31)),"img"===n&&s<2&&(s++,t.__retryload=s,1==s&&e.indexOf("http://")>-1?(e=e.http2https(),window.__addIdKeyReport("28307",60),us(e)&&window.__addIdKeyReport(_s,16),window.__addIdKeyReport("28307",77),us(e)&&window.__addIdKeyReport(_s,2)):1==s&&(e.indexOf("https://")>-1||e.isOffline())?(e.isOffline()&&(e=e.offline2https()),window.__addIdKeyReport("28307",61),us(e)&&window.__addIdKeyReport(_s,23),window.__addIdKeyReport("28307",77),us(e)&&window.__addIdKeyReport(_s,1)):2==s&&e.indexOf("mmbiz.qpic.cn")>-1&&(e=e.replace("mmbiz.qpic.cn","mmbiz.qlogo.cn")).indexOf(!1)&&(e=e.http2https()),ci(e)&&(e=li(e)),t.start_load_time=+new Date,a=e=z(e,"retryload",s,!0)),window.__has_imgfailed||(window.__has_imgfailed=!0,window.__addIdKeyReport("28307",65)),V.log("[Appmsg] image_load_event_on_error. src:"+e),t.setAttribute("data-fail",1);try{if("[object Array]"==Object.prototype.toString.call(t.lazyLoadOnerror))for(let e=0,i=t.lazyLoadOnerror.length;e<i;e++)"function"==typeof t.lazyLoadOnerror[e]&&t.lazyLoadOnerror[e].call(t)}catch(Pd){}let d=10;return/tp\=webp/.test(e)&&(d=11),R.setLogs({id:24729,key:d,value:1,log:encodeURIComponent(e)+"["+uin+"]"}),a},beforeload(e,t,i){try{e.isWxpic()&&t.setAttribute("data-before-load-time",Date.now())}catch(Pd){console.error(Pd)}},onload(e,t,i,o){var n;if(o&&c(),!window.__second_open__&&!r){const e=window.performance||window.msPerformance||window.webkitPerformance;if(!e||!e.timing)return;const t=window.location.protocol;de.saveSpeeds({uin:uin,pid:"https:"==t?462:417,speeds:{sid:35,time:Date.now()-e.timing.navigationStart}}),de.send(),r=!0}"img"===i&&(null==(n=null==t?void 0:t.classList)||n.remove("wx_img_placeholder_err"),t.gray&&!t.loadGif&&((t.width||t.naturalWidth)<120||(t.height||t.naturalHeight)<120?t.autoTap&&t.autoTap():t.span&&t.span.children&&t.span.children.item(0)&&(t.span.children.item(0).style.display="")),ii(t));let a=t&&t.__retryload||0;if(a>2)return;if(V.log("[Appmsg] image_load_event_onload_image. src:"+e+"  ^^^  retryloadtimes: "+a),e.isWxpic()&&a<=0&&Math.random()<=ms&&t.getAttribute("data-before-load-time")){const e=Date.now()-t.getAttribute("data-before-load-time");de.saveSpeeds({uin:uin,pid:2986,speeds:{sid:21,time:e}}),de.send()}t.setAttribute("data-fail",0),"img"===i&&function(e){try{const t=e.getAttribute("data-src");if(!/^https?\:\/\/mmbiz\.qpic\.cn/.test(t))return;let i=e.parentNode,o=!1;J.hasClass(i,"js_jump_icon")&&(o=!0);let n=!1;for(;i.tagName&&"body"!=i.tagName.toLowerCase();){if("a"==i.tagName.toLowerCase()){null!=(i.getAttribute("href")||"").match(/^http/)&&(n=!0);break}i=i.parentNode}if(o&&!n){let t=e.parentNode,i=t.parentNode;if(i){let e=document.createDocumentFragment();for(;t.firstChild;)e.appendChild(t.firstChild);i.insertBefore(e,t),i.removeChild(t)}}else if(!o&&n){let t=document.createElement("span"),i=getComputedStyle(e);"static"!=i.positon&&(t.style.position=i.positon),t.style.left=i.left,t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.margin=i.margin,J.addClass(t,"js_jump_icon"),J.addClass(t,"h5_image_link"),e.style.position="static",e.style.margin="0px",e.parentNode.insertBefore(t,e),t.appendChild(e),window.__addIdKeyReport("111535",0)}}catch(Pd){}}(t);try{if("[object Array]"==Object.prototype.toString.call(t.lazyLoadOnload))for(let e=0,i=t.lazyLoadOnload.length;e<i;e++)"function"==typeof t.lazyLoadOnload[e]&&t.lazyLoadOnload[e].call(t)}catch(Pd){}const s=0==e.indexOf("https://")?7:0;window.__addIdKeyReport("28307",71+s),a<=1&&window.__addIdKeyReport("28307",73+1*a+s),us(e)&&window.__addIdKeyReport(_s,11+s),us(e)&&a<=1&&window.__addIdKeyReport(_s,12+1*a+s),e.isWxpic()?(window.__addIdKeyReport("28307",92),a<=1&&window.__addIdKeyReport("28307",94+1*a),us(e)&&window.__addIdKeyReport(_s,29),us(e)&&a<=1&&window.__addIdKeyReport(_s,25+1*a)):e.isWebp()&&(window.__addIdKeyReport("28307",85),a<=1&&window.__addIdKeyReport("28307",87+1*a),us(e)&&window.__addIdKeyReport(_s,39),us(e)&&a<=1&&window.__addIdKeyReport(_s,35+1*a)),ci(e)&&(window.__addIdKeyReport("28307",107),us(e)&&window.__addIdKeyReport(_s,30)),window.__has_imgsucceed||(window.__has_imgsucceed=!0,window.__addIdKeyReport("28307",64)),1==a&&e.indexOf("http://")>-1&&(window.__addIdKeyReport("28307",50),us(e)&&window.__addIdKeyReport(_s,45)),1==a&&e.indexOf("https://")>-1&&(window.__addIdKeyReport("28307",52),us(e)&&window.__addIdKeyReport(_s,46));const d=Math.random(),l=+new Date-t.start_load_time;l&&0==e.indexOf("https://")&&d<.5?(window.__addIdKeyReport("27822",121,l),window.__addIdKeyReport("27822",122)):l&&d<5e-4&&(window.__addIdKeyReport("27822",124,l),window.__addIdKeyReport("27822",125)),"img"!==i||""===t.style.filter||"none"===t.style.filter||/translate(Z|3d)\(/.test(t.style.transform)||(t.style.transform+=" translateZ(0)",t.style.webkitTransform+=" translateZ(0)")},detect(e){if(!e||!e.time||!e.loadList)return;const t=e.time,i=e.loadList;window.logs&&window.logs.img&&window.logs.img.download&&(window.logs.img.download[t]=i)},container:document.getElementById("page-content")})}function gs(){const e=document.getElementById("js_read_container"),t={player:null,srcId:"__wxtag__".concat(window.biz,"-").concat(window.mid,"-").concat(window.idx),mediaId:"",tag:"===mediaId-sep===",playDuration:0,playTime:0,maxNum:5,curNum:0,format:"",type:6,speed:100,voiceInfo:{title:"",nickname:"",appmsgUrl:"",duration:0},voiceOpt:null,lock:!1,status:"stop",currentTime:0,beginTime:0,leaveNeedReport:!1,pause2PlayNeedReport:!1,isSeek:!1,loadingTimer:null},i=e=>"".concat(e,"&uin=").concat(window.uin,"&key=").concat(window.key,"&pass_ticket=").concat(encodeURIComponent(window.pass_ticket)),o=()=>{if(t.curNum>10)return(e=>{if(!e&&null!==t.loadingTimer)return clearTimeout(t.loadingTimer),void(t.loadingTimer=null);G.invoke("handleMPPageAction",{action:"showToast",status:e?"loading":"dismissloading"})})(!1),t.lock=!1,void window.weui.alert("系统繁忙，请稍后再试");t.curNum++;const e=t.curNum>t.maxNum?5e3:1e3;P({url:"/mp/msgvoice?action=getvoiceinfo&__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&sn=").concat(window.sn,"&type=").concat(t.type,"&speed=").concat(t.speed),type:"GET",dataType:"json",async:!0,success:a=>{if(a&&a.base_resp&&0===a.base_resp.ret)if(a.mediaid){t.mediaId=a.mediaid;const e=encodeURIComponent("__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx)),o=t.voiceInfo;t.voiceOpt={protocol:2===a.format?"hls":"",src:i("https://mp.weixin.qq.com/mp/msgvoice?action=get_voice&mediaid=".concat(a.mediaid,"&devicetype=").concat(window.devicetype,"&_type=").concat(t.type,"&speed=").concat(t.speed,"&encodeurl=").concat(e)),lowbandUrl:i("https://mp.weixin.qq.com/mp/msgvoice?action=get_voice&mediaid=".concat(a.mediaid,"&devicetype=").concat(window.devicetype,"&_type=").concat(t.type,"&speed=").concat(t.speed,"&encodeurl=").concat(e)),title:o.title,epname:"来自文章",singer:o.nickname?"".concat(o.nickname,"的语音"):"公众号语音",srcId:t.srcId+t.tag+t.mediaId,coverImgUrl:"",webUrl:o.appmsgUrl,musicbar_url:"https://mp.weixin.qq.com/mp/msgvoice?action=ttspage&__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&sn=").concat(window.sn,"&type=").concat(t.type,"#wechat_redirect"),needStartMusicUI:0},n()}else setTimeout(o,1e3);else console.log("getvoiceinfo err",a),setTimeout(o,e)},error:t=>{console.log("getvoiceinfo err",t),setTimeout(o,e)}})},n=()=>{t.player=pi.init({protocal:"hls",wxIndex:t.voiceOpt.srcId,type:7,comment_id:"",src:t.voiceOpt.src,jsapi2Src:t.voiceOpt.src+"&voice_type=1",allowPause:!0,duration:t.voiceInfo.duration,title:t.voiceOpt.title,singer:t.voiceOpt.singer,epname:t.voiceOpt.epname,coverImgUrl:t.voiceOpt.coverImgUrl,playingCss:"share_audio_playing",playCssDom:e.getElementsByClassName("js_read_main")[0],playArea:e.getElementsByClassName("js_read_play")[0],progress:e.getElementsByClassName("js_read_progress")[0],fileSize:0,playtimeDom:e.getElementsByClassName("js_read_playtime")[0],bufferDom:e.getElementsByClassName("js_read_buffer")[0],playdotDom:e.getElementsByClassName("js_read_playdot")[0],seekRange:e.getElementsByClassName("js_read_seekRange")[0],seekContainer:e.getElementsByClassName("js_read_main")[0],loadingDom:e.getElementsByClassName("js_read_loading")[0],detailArea:"",detailUrl:t.voiceOpt.musicbar_url,webUrl:t.voiceOpt.musicbar_url})};P({url:"/mp/msgvoice?action=ttspage&__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&sn=").concat(window.sn,"&type=").concat(t.type,"&f=json"),type:"GET",dataType:"json",async:!0,success:i=>{i&&i.base_resp&&0===i.base_resp.ret?(t.voiceInfo={title:i.title,nickname:i.nickname,appmsgUrl:i.appmsg_url,duration:1*i.voice_info.duration},o(),e.getElementsByClassName("js_read_duration")[0].innerHTML=(e=>{const t=e=>e>=10?e:"0".concat(e);return"".concat(t(Math.floor(e/60)),":").concat(t(e%60))})(1*i.voice_info.duration)):window.weui.alert("系统繁忙，请稍后再试")},error:e=>{console.log("ttspage err: ",e),window.weui.alert("网络不可用，请检查网络设置")}})}const fs=!$.isWechat||$.isNewMpApp||$.isPcWechat&&!Ge,ys=$.isAndroid&&window.clientversion<"28002A00"||$.isIOS&&window.clientversion<"18002824",vs=$.isAndroid&&window.clientversion<"28002800"||$.isIOS&&window.clientversion<"18002831",bs=e=>e?pi.encodeStr(e).replace(/^\s/,"").replace(/\s$/,""):"";class xs{constructor(){this.validTagLen=0,this.adapter={1:mi,2:_i},this.tagMap={qqmusic:{eles:[],isClMusic:!1,watchAttrs:[],renderTag:"mp-common-qqmusic"},"mp-common-qqmusic":{eles:[],isClMusic:!1,watchAttrs:["musicid"],renderTag:"mp-common-qqmusic"},"mp-common-clmusic":{eles:[],isClMusic:!0,type2Wording:{1:"音乐",2:"专辑",3:"歌单"},renderTag:"mp-common-clmusic",watchAttrs:["listenid","categoryid"]}},this.tagNameList=Object.keys(this.tagMap),this.validateEnv()&&(this.renderTag(),console.log("➜ music tag",this.tagMap),this.renderCard())}validateEnv(){try{const e=document.querySelector("#js_content");return this.tagNameList.forEach((t=>{this.tagMap[t].eles=Array.from(e.querySelectorAll(t))})),this.validTagLen=this.tagNameList.reduce(((e,t)=>e+this.tagMap[t].eles.length),0),!!this.validTagLen}catch(e){return console.error("validateEnv err",e),!1}}renderTag(){this.tagNameList.forEach((e=>{const t=this.tagMap[e],{renderTag:i,eles:o}=t;o.forEach(((t,n)=>{if(i!==e){const e=((e,t)=>{const i=document.createElement(t);for(const o of e.attributes)i.setAttribute(o.name,o.value);return i.innerHTML=e.innerHTML,e.parentNode.replaceChild(i,e),i})(t,i);this.tagMap[i].eles.push(e),o.splice(n,1,null)}})),t.eles=o.filter((e=>e))}))}renderCard(){this.batchGetClMusicInfo().then((()=>{this.tagNameList.forEach((e=>{const t=this.tagMap[e],{eles:i,watchAttrs:o,isClMusic:n}=t;i.forEach(((e,t)=>{J.addClass(e,"js_wx_tap_highlight");let i={isClMusic:n,posIndex:t,media_id:bs(e.getAttribute("mid"))||"",singer:bs(e.getAttribute("singer"))||"",albumid:bs(e.getAttribute("albumid"))||"",otherid:bs(e.getAttribute("otherid"))||"",musicid:bs(e.getAttribute("musicid"))||"",albumurl:bs(e.getAttribute("albumurl"))||"",audiourl:bs(e.getAttribute("audiourl"))||"",listenId:bs(e.getAttribute("listenid"))||"",clMusicType:parseInt(e.getAttribute("type"))||"",musictype:parseInt(e.getAttribute("musictype"))||1,music_name:bs(e.getAttribute("music_name"))||"",jumpurlkey:bs(e.getAttribute("jumpurlkey"))||"",categoryId:bs(e.getAttribute("categoryid"))||"",duration:parseInt(e.getAttribute(n?"duration":"play_length")||0,10)};if(i.musictype>2&&(i.musictype=2),!i.singer){const t=e.getAttribute("src")||"",o=decodeURIComponent(B.getQuery("singer",t)||"");i.singer=bs(o)||""}n?(i.type=11,i.pauseCss="",i.allowPause=!1):this.adapter[i.musictype]&&"function"==typeof this.adapter[i.musictype].initData&&(i=this.adapter[i.musictype].initData(i,{scene:0}),e.setAttribute("albumurl",i.albumurl)),e.setAttribute("posindex",t),this.reRenderCard(e,o),n&&!e.isErrStatus?1!==i.clMusicType||ys||fs?this.bindEvent(e,i):this.renderPlayer(e,i):n||this.renderPlayer(e,i)}))}))}))}reRenderCard(e,t=[]){e&&t.forEach((t=>{const i=e.getAttribute(t);i&&(e.removeAttribute(t),e.setAttribute(t,i))}))}renderPlayer(e,t){setTimeout((()=>{V.log("[Music] init "+t.detailUrl);const i="".concat(t.musicid||t.listenId,"_").concat(t.posIndex);var o;t.player=pi.init({epname:"音乐",mid:t.media_id,singer:t.singer,songId:t.musicid,type:t.type||0,otherid:t.otherid,albumid:t.albumid,wxIndex:t.posIndex,duration:t.duration,listenId:t.listenId,webUrl:t.webUrl||"",isClMusic:t.isClMusic,coverImgUrl:t.albumurl,jumpurlkey:t.jumpurlkey,playingCss:"share_audio_playing",pauseCss:t.pauseCss||"",allowPause:!!t.allowPause,title:(o=t.music_name,o?pi.decodeStr(o):""),detailUrl:t.detailUrl||"",playArea:e.shadowRoot.querySelector("#music_play_".concat(i)),playCssDom:e.shadowRoot.querySelector("#music_main_".concat(i)),detailArea:e.shadowRoot.querySelector("#music_home_".concat(i))})}),0)}bindEvent(e,t){setTimeout((()=>{const i=t.clMusicType,o="".concat(t.listenId||t.categoryId,"_").concat(t.posIndex),n=e.shadowRoot.querySelector("#music_main_".concat(o)),a=e.shadowRoot.querySelector("#music_play_".concat(o));n&&re.on(n,"click",(()=>{if(fs)(window.weui||window).alert("请在手机微信内操作");else if(1===i&&ys||(2===i||3===i)&&vs)G.invoke("confirmDialog",{title:"当前版本暂不支持，请更新至微信最新版本",confirmText:"去更新",cancelText:"取消"},(e=>{-1!==e.err_msg.indexOf(":ok")?location.href=$.isIOS?"https://itunes.apple.com/cn/app/id414478124?mt=8&ls=1":"https://support.weixin.qq.com/update/":-1!==e.err_msg.indexOf("system:")&&(window.weui||window).alert("当前版本暂不支持，请更新至微信最新版本")}));else{const t=bs(e.getAttribute("categoryid"))||"";G.invoke("openTingView",{action:"openCategory",category_id:t,sync_get:!0},(e=>{console.log("["+t+"], res: "+JSON.stringify(e))}))}})),a&&(re.on(a,"mousedown",(e=>e.stopPropagation())),re.on(a,"touchstart",(e=>e.stopPropagation())))}),0)}batchGetClMusicInfo(){return new Promise(((e,t)=>{const i=this.tagMap["mp-common-clmusic"],o=i.eles;if(!o.length)return void e();const n=this,a={count:o.length};o.forEach(((e,t)=>{const i=1*e.getAttribute("type");a["type".concat(t)]=i,a["source".concat(t)]=1*e.getAttribute("music_source"),a["username".concat(t)]=e.getAttribute("username")||"",a["id".concat(t)]=e.getAttribute(1===i?"listenid":"categoryid")||""})),P({url:"/mp/finder_music_appmsg?action=get",type:"POST",async:!0,dataType:"json",data:a,success(t){var a;if(0===(null==(a=null==t?void 0:t.base_resp)?void 0:a.ret)){const e=t.music_info_list||[];o.forEach((t=>{const o=1*t.getAttribute("type"),a=t.getAttribute(1===o?"listenid":"categoryid")||"",s=e.find((e=>e.id===a));if(s){const{flag:e}=s;switch(1*e!=0&&(t.isErrStatus=!0),1*e){case 0:n.updateClMusicCardInfo(t,s),t.setAttribute("verify_err","");break;case 1:t.setAttribute("verify_err","".concat(i.type2Wording[o],"暂时无法播放"));break;case 2:t.setAttribute("verify_err","".concat(i.type2Wording[o],"已被作者删除"));break;case 3:t.setAttribute("verify_err","".concat(i.type2Wording[o],"已被设置为私密"));break;case 4:t.setAttribute("verify_err","因作者隐私设置，暂时无法查看该内容")}}}))}e()},error:e})}))}updateClMusicCardInfo(e,t){const{type:i}=t,o=t.user_info||{};let n={};switch(1*i){case 1:n=t.music;break;case 2:n=t.album;break;case 3:n=t.playlist}e.setAttribute("count",n.item_num||0);try{const t=new URL(e.getAttribute("albumurl")||""),i=new URLSearchParams(t.search);i.delete("picformat");const o=new URL(n.cover||"");"".concat(t.origin).concat(t.pathname,"?").concat(i.toString())!=="".concat(o.origin).concat(o.pathname).concat(o.search)&&e.setAttribute("albumurl",n.cover||"")}catch(a){console.error(a)}e.setAttribute("singer",o.nickname||n.author||""),e.setAttribute("duration",n.duration||""),e.setAttribute("avatar",o.headimg_url||""),e.setAttribute("music_name",n.name||n.title||"")}}const ks=$.isWechat&&!$.isWindowsWechat&&!$.isMacWechat&&!$.isNewMpApp,Is={getTingIsOpenPromise:null,getListenLaterIsOpenPromise:null,musicLen:0,musicList:{},isTingOpen:-1,isSupportListenLater:ks?1:0,srcRoot:"".concat(location.protocol,"//res.wx.qq.com/voice/getvoice?mediaid=#meidaid#"),inWechat:ks,channelsInfo:[]};function Ss(e){return document.getElementById(e)}async function As(e,t){let i=0;for(let o=0;o<Is.musicLen;o++){const n=Is._oElements[o],a={};let s=n.getAttribute("voice_encode_fileid")||"";try{s=decodeURIComponent(s)}catch(Pd){}if(t&&(a.audioPanelVue=t),a.voiceid=pi.encodeStr(s)||n.getAttribute("listen_id"),a.voiceid=a.voiceid.replace(/&#61;/g,"=").replace(/^\s/,"").replace(/\s$/,""),a.isaac=1*n.getAttribute("isaac2")||0,a.src=Is.srcRoot.replace("#meidaid#",a.voiceid),a.hasAddedListenLater=0,n.setAttribute("has-added-listen-later",0),1===a.isaac&&(a.jsapi2Src=a.src+"&voice_type=1"),a.voiceid&&"undefined"!=a.voiceid){if(a.albumLink="",e&&e.length>0&&e.forEach((e=>{if(e.voice_id===s)return e.appmsgalbuminfo&&(a.albumTitle=e.appmsgalbuminfo.title||"",a.albumLink=e.appmsgalbuminfo.link.html(!1).replace("#wechat_redirect","")+"#wechat_redirect",a.albumNum=e.appmsgalbuminfo.tag_content_num||0,a.albumid=e.appmsgalbuminfo.album_id||0),!1})),n.setAttribute("data-verify_state",3),n.setAttribute("data-trans_state",1),musicMap.set(n,{_oMusic:a,num:i}),Cs(n,a,i),"undefined"!=typeof voiceid&&s&&window.voiceid&&s===window.voiceid){const e=n.offsetTop+122-40;setTimeout((()=>{window.scrollTo(0,e)}),0)}i++}}(function(){const e=[...Ss("js_content").getElementsByTagName("mp-common-claudio")];return new Promise((t=>{if(!e.length)return void t(e);const i={video_snap_num:e.length};e.forEach(((e,t)=>{i["exportid_".concat(t)]=e.dataset.id,i["username_".concat(t)]=e.dataset.username,i["listen_id".concat(t)]=e.getAttribute("listen_id")})),P({url:"/mp/appmsg_video_snap?action=batch_get_video_snap",type:"POST",dataType:"json",async:!0,data:i,success(i){i&&i.base_resp&&0===i.base_resp.ret&&(Is.channelsInfo=i.video_snap_info),t(e)},error(){t(e)}})}))})().then((e=>{if(!Is.channelsInfo.length)return;let t=null;e.forEach((e=>{const{flag:i,added_in_playlist:o,nonce_id:n,tid:a}=Is.channelsInfo.find((t=>t.export_id===e.dataset.id));e.setAttribute("has-added-listen-later",o);const s=e.getAttribute("data-nonceid")!==n&&n,r=e.getAttribute("data-tid")!==a&&a;switch(s&&e.setAttribute("data-nonceid",n),r&&e.setAttribute("data-tid",a),i){case 1:e.setAttribute("err_tips","当前音频已被作者删除");break;case 2:case 4:e.setAttribute("err_tips","当前音频暂时无法播放");break;case 3:e.setAttribute("err_tips","当前音频已被设置私密")}if(s||r){const i=musicMap.get(e);if(i&&i._oMusic){const e=Is.musicList[i._oMusic.voiceid+"_"+i.num];e&&e.player&&(e.player._o&&(e.player._o.finderInfo={nonceId:n,tid:a}),e.player.player&&e.player.player._o&&(e.player.player._o.finderInfo={nonceId:n,tid:a})),t=i._oMusic.audioPanelVue}}})),t&&"function"==typeof t.updateCardList&&t.updateCardList()}))}function Ts(e,t){e.setAttribute("play_length",t.play_length||1),e.setAttribute("data-verify_state",void 0===t.voice_verify_state?3:t.voice_verify_state),e.setAttribute("data-trans_state",void 0===t.voice_trans_state?1:t.voice_trans_state)}function Cs(e,t,i){t.duration=parseInt((1*e.getAttribute("play_length")||0)/1e3,10),t.posIndex=i;let o=e.getAttribute("name")||"";try{o=decodeURIComponent(o)}catch(Pd){}if(t.title=pi.encodeStr(o).replace(/^\s/,"").replace(/\s$/,""),t.fileSize=1*e.getAttribute("high_size")||0,t.cover=(e.getAttribute("cover")||"").html(!1),t.nickname=window.nickname,t.voiceTag="v",J.addClass(e,"js_wx_tap_highlight"),Is.getTingIsOpenPromise.then((()=>async function(e,t){if(t.isShowListenLater=1===Is.isSupportListenLater&&!window.tts_is_ban,e.setAttribute("show-listen-later",t.isShowListenLater?1:0),t.playArea=e.shadowRoot.querySelector(".js_voice_play"),t.progress=e.shadowRoot.querySelector(".js_audio_card_progress_inner"),t.bufferDom=e.shadowRoot.querySelector(".js_audio_card_progress_buffer"),t.loadingDom=e.shadowRoot.querySelector(".js_audio_card_progress_loading"),t.playdotDom=e.shadowRoot.querySelector(".js_audio_card_progress_handle"),t.seekRange=e.shadowRoot.querySelector(".js_audio_card_progress_wrp"),t.audioProgressBarDom=e.shadowRoot.querySelector(".js_audio_progress_bar"),t.playpercent=e.shadowRoot.querySelector(".js_voice_percent"),t.playpercentDesc=e.shadowRoot.querySelector(".js_voice_percent_desc"),t.listenLaterDom=e.shadowRoot.querySelector(".js_audio_listen_later"),t.albumDom=e.shadowRoot.querySelector(".js_voice_album"),t.playtimeDom=e.shadowRoot.querySelector(".js_duration"),"MP-COMMON-CLAUDIO"===e.tagName&&!function(e){const t=e=>e.stopPropagation(),i=!$.isWechat||$.isNewMpApp||$.isPcWechat&&!Ge;i&&!$.isPcWechat||(console.log("========= cancel listenLaterDom"),e.listenLaterDom&&(e.listenLaterDom.style.display="none"));if(i)return re.on(e.detailArea,"click",(()=>{(window.weui||window).alert("请在手机微信内操作")})),e.listenLaterDom&&re.on(e.listenLaterDom,"touchstart",t),e.listenLaterDom&&re.on(e.listenLaterDom,"mousedown",t),re.on(e.playArea,"touchstart",t),re.on(e.playArea,"mousedown",t),!1;if($.isAndroid&&window.clientversion<"28002655"||$.isIOS&&window.clientversion<"18002725"){const i=()=>{G.invoke("confirmDialog",{title:"当前版本暂不支持，请更新至微信最新版本",confirmText:"去更新",cancelText:"取消"},(e=>{-1!==e.err_msg.indexOf(":ok")?location.href=$.isIOS?"https://itunes.apple.com/cn/app/id414478124?mt=8&ls=1":"https://support.weixin.qq.com/update/":-1!==e.err_msg.indexOf("system:")&&(window.weui||window).alert("当前版本暂不支持，请更新至微信最新版本")}))};return re.on(e.detailArea,"click",i),e.listenLaterDom&&re.on(e.listenLaterDom,"touchstart",t),e.listenLaterDom&&re.on(e.listenLaterDom,"mousedown",t),re.on(e.playArea,"touchstart",t),re.on(e.playArea,"mousedown",t),!1}return!0}(t))return void(e.style.opacity=1);await async function(e,t){const i=e.voiceid+"_"+e.posIndex;let o="";if(window.voice_in_appmsg&&window.voice_in_appmsg[e.voiceid]){const t=window.voice_in_appmsg[e.voiceid];let i=window.biz||"",n=window.mid||"",a=window.idx||"";t.bizuin&&t.appmsgid&&t.idx&&(i=t.bizuin,n=t.appmsgid,a=t.idx);o=(window.location.protocol||"https:")+"//mp.weixin.qq.com/mp/audio?_wxindex_=#_wxindex_#&scene=104&__biz=#biz#&mid=#mid#&idx=#idx#&voice_id=#voice_id#&sn=#sn##wechat_redirect".replace("#_wxindex_#",e.posIndex).replace("#biz#",i).replace("#mid#",n).replace("#idx#",a).replace("#voice_id#",e.voiceid).replace("#sn#",t.sn||"")}console.log("[Voice] init"+o),V.log("[Voice] init"+o);const n=pi.decodeStr(e.title),a=await ui(),s=await hi(),r=a?"":s||gi?window.merge_playlist_info_base64:window.category_playlist_info_base64;e.player=pi.init({wxIndex:e.posIndex,type:2,songId:e.voiceid,comment_id:"",src:e.src,jsapi2Src:e.jsapi2Src,allowPause:!0,duration:e.duration,title:n,singer:window.nickname?window.nickname+"的语音":"公众号语音",epname:"来自文章",coverImgUrl:window.__appmsgCgiData.hd_head_img,playingCss:"share_audio_playing",pauseCss:"share_audio_pause",playCssDom:e.detailArea||Ss("voice_main_"+i),playArea:e.playArea||Ss("voice_play_"+i),progress:e.progress||Ss("voice_progress_"+i),fileSize:e.fileSize,playtimeDom:e.playtimeDom||Ss("voice_playtime_"+i),bufferDom:e.bufferDom||Ss("voice_buffer_"+i),playdotDom:e.playdotDom||Ss("voice_playdot_"+i),playpercent:e.playpercent||Ss("voice_percent_"+i),playpercentDesc:e.playpercentDesc||Ss("voice_percent_desc_"+i),seekRange:e.seekRange||Ss("voice_seekRange_"+i),seekContainer:e.detailArea||Ss("voice_main_"+i),loadingDom:e.loadingDom||Ss("voice_loading_"+i),detailArea:e.detailArea||Ss("voice_main_"+i)||"",albumDom:e.albumDom||Ss("voice_album_"+i),detailUrl:o,webUrl:window.msg_link,speedList:[.75,1,1.25,1.5,2],audioCardBody:Ss("audio_card_bd_".concat(i)),ctrlArea:Ss("audio_card_control_".concat(i)),fastBackBtn:Ss("audio_fast_back_".concat(i)),fastForwardBtn:Ss("audio_fast_forward_".concat(i)),doubleSpeedBtn:Ss("audio_double_speed_".concat(i)),isAudio:!0,isClAudio:"MP-COMMON-CLAUDIO"===t.tagName,userName:window.user_name||"",articleCoverCdnUrl1_1:window.cdn_url_1_1,tingExtInfo:{bizuin:window.biz&&1*window.atob(window.biz)||0,appmsgid:1*window.mid||0,idx:1*window.idx||0,audio_id:e.voiceid||"",is_album_page:!1},albumInfo:{albumId:e.albumid||"",albumName:e.albumTitle||"",albumUrl:e.albumLink||""},finderInfo:e.finderInfo||{},cover:e.cover||"",author:e.author||"",listenId:e.listenId||"",isTingOpen:Is.isTingOpen,isSupportListenLater:Is.isSupportListenLater,hasAddedListenLater:e.hasAddedListenLater||0,audioDurationDom:Ss("audio_duration_".concat(i)),listenLaterDom:e.listenLaterDom||Ss("audio_listen_later_".concat(i)),useNewListenLaterCgi:!0,audioRealTimeDom:Ss("audio_real_playtime_".concat(i)),audioProgressBarDom:e.audioProgressBarDom||Ss("audio_progress_bar_".concat(i)),listBase64:e.listBase64||r||"",starVersion:s,bizAudioScene:4,detailAreaClickHook:()=>{const i=e.audioPanelVue;if(i&&e.listenId){if(i.starVersion){const o=Es(e,t);i.show(o)}else i.playingListenId===e.listenId&&i.isPlaying?i.show(!1):function(e,t,i=!1){var o;const n=e.audioPanelVue;if(null==(o=null==n?void 0:n.show)||o.call(n,!0),Rs(e,t,1),wi({listenId:e.listenId||"",onSuccess:()=>{var t;return null==(t=null==n?void 0:n.getListData)?void 0:t.call(n,!0,(t=>{if(n.notifyAppListChange(),i&&!n.supportDynamicPlayList){const i=t.find((t=>t.listen_id===e.listenId));i&&(n.selectInfo=i.listen_item,n.play(i.listen_item,!1,0,!1,1105))}}))}}),i&&(null==n?void 0:n.supportDynamicPlayList)){const i=Es(e,t);n.selectInfo=i,n.play(i,!1,0,!1,1105)}}(e,t,!0);return!0}return!1},onListenLaterStart:()=>{const i=e.audioPanelVue;Rs(e,t,1),window.weui.toast("已加入稍后听",{duration:750,extClass:"weui-icon_toast_small"}),i&&G.on("onClickBottomToast",(()=>{var e;return null==(e=null==i?void 0:i.show)?void 0:e.call(i,!0)}))},onListenLaterError:()=>{Rs(e,t,0)},onCancelListenLaterStart:()=>{Rs(e,t,0),window.weui.toast("已从稍后听移除",{duration:750,extClass:"weui-icon_toast_small"})},onCancelListenLaterError:()=>{Rs(e,t,1)},onPlaySuccess:()=>{const i=e.audioPanelVue;e.listenId&&i&&!i.starVersion&&wi({listenId:e.listenId||"",onSuccess:()=>Rs(e,t,1)})}})}(t,e),e.style.opacity=1}(e,t))),Is.getListenLaterIsOpenPromise.then((async()=>{const t=1===Is.isSupportListenLater&&!window.tts_is_ban;e.setAttribute("show-listen-later",t?1:0)})),"MP-COMMON-CLAUDIO"===e.tagName)return(t={posIndex:i,voiceTag:"v"}).type=4,t.listenId=e.getAttribute("listen_id"),t.duration=1*e.getAttribute("duration"),t.cover=e.getAttribute("cover").html(!1),t.title=e.getAttribute("name"),t.author=e.getAttribute("author"),t.finderInfo={nonceId:e.getAttribute("data-nonceid"),tid:e.getAttribute("data-tid")},t.hasAddedListenLater=e.getAttribute("has-added-listen-later"),e.setAttribute("cover",t.cover),t.detailArea=e.shadowRoot.querySelector(".js_wx_claudio_card"),Is.musicList[t.listenId+"_"+t.posIndex]=t,window.musicList[t.listenId+"_"+t.posIndex]=t,void J.addClass(e,"mp_common_channel");if(1===window.is_temp_url&&window.voice_in_appmsg[t.voiceid]){const{transState:i,voiceVerifyState:o}=window.voice_in_appmsg[t.voiceid];e.removeAttribute("err_tips"),e.setAttribute("data-verify_state",void 0===o?3:o),e.setAttribute("data-trans_state",void 0===i?1:i),pi.rollStatus(t.voiceid,(t=>{Ts(e,t)}))}else pi.getVoiceStatus(t.voiceid).then((i=>{var o,n,a,s;i&&(e.removeAttribute("err_tips"),i.play_length&&parseInt((1*i.play_length||0)/1e3,10)!==1*e.getAttribute("play_length")&&(t.duration=parseInt((1*i.play_length||0)/1e3,10),e.setAttribute("duration",parseInt((1*i.play_length||0)/1e3,10)),t.play_length=parseInt(1*i.play_length||0,10),e.setAttribute("play_length",parseInt((1*i.play_length||0)/1e3,10)),t.listenId=i.listen_id||0,e.setAttribute("listen_id",i.listen_id||0),t.hasAddedListenLater=i.added_in_playlist||0,e.setAttribute("has-added-listen-later",i.added_in_playlist||0),t.player&&t.player._o&&(t.player._o.duration=t.duration,null==(n=null==(o=t.player.player)?void 0:o.setDuration)||n.call(o,t.duration),t.player._o.hasAddedListenLater=t.hasAddedListenLater,t.player._o.listenId=t.listenId,null==(s=null==(a=t.player.player)?void 0:a.setListenId)||s.call(a,t.listenId),setTimeout((()=>{var e;t.player.playtimeDomInnerHtml=(null==(e=t.player._o.playtimeDom)?void 0:e.innerHTML)||""})),t.audioPanelVue&&"function"==typeof t.audioPanelVue.updateCardList&&t.audioPanelVue.updateCardList())),Ts(e,i))}));t.detailArea=e.shadowRoot.querySelector(".js_wx_mpaudio_card"),Is.musicList[t.voiceid+"_"+t.posIndex]=t,window.musicList[t.voiceid+"_"+t.posIndex]=t,J.addClass(e,"mp_common_audio")}function Es(e,t){return{listen_id:e.listenId,title:pi.decodeStr(e.title||"")||"",author:e.author||"",duration:e.duration,cover:e.cover||"",type:"MP-COMMON-CLAUDIO"===t.tagName?4:3,...e.finderInfo?{finder_info:e.finderInfo}:{},author_info:{nickname:e.author||"",type:"MP-COMMON-CLAUDIO"===t.tagName?4:3,username:window.user_name||""},article_info:{audio_id:e.voiceid||"",audio_title:pi.decodeStr(e.title||"")||"",audio_url:e.src,author:e.author||"",biz_username:window.user_name||"",cover:e.cover||"",duration:e.duration,url:window.msg_link}}}function Rs(e,t,i){e.hasAddedListenLater=i,t.setAttribute("has-added-listen-later",i),e.player&&(e.player._o.hasAddedListenLater=i),e.audioPanelVue&&(e.audioPanelVue.needUpdate=!0)}function Ps(e,t){if(function(){const e=Ss("js_content");return!(!e||(Is._oElements=[...e.getElementsByTagName("mp-common-mpaudio"),...e.getElementsByTagName("mp-common-claudio")],Is._oElements.length<=0))}())try{Is.getTingIsOpenPromise=new Promise((e=>{Is.inWechat?G.invoke("getTingAudioState",{},(t=>{/:ok$/.test(t.err_msg)?Is.isTingOpen=1:-9999!==t.err_code&&-1===t.err_msg.indexOf("function_not_exist")||(Is.isTingOpen=0),e()})):e()})),Is.getListenLaterIsOpenPromise=new Promise((e=>{let t=null;t=setTimeout((()=>{Is.isSupportListenLater=0,e()}),3e3),Is.inWechat?G.invoke("handleMPPageAction",{action:"isSupportAddToTingPlayList"},(i=>{t&&clearTimeout(t),/:ok$/.test(i.err_msg)?Is.isSupportListenLater=1:Is.isSupportListenLater=0,e()})):e()})),Is.musicLen=Is._oElements.length,As(e,t)}catch(i){console.error(i)}}window.musicList={},window.musicMap=new WeakMap;const js='\x3c!-- 发表留言 --\x3e\n<#if(window.new_appmsg){#>\n  <div id="js_cmt_mine" class="discuss_container_wrp" style="display:none;">\n    <div class="discuss_container editing access">\n        <div class="discuss_container_inner">\n          <div class="discuss_container_hd">\n            <h2 class="rich_media_title">\n                <#if(window.item_show_type == 10){#>\n                    <#=textPageTitle#>\n                <#}else{#>\n                    <#=window.msg_title.html(1)#>\n                <#}#>\n            </h2>\x3c!-- 标题要转义 --\x3e\n            <span id="log"></span>\n            <div class="frm_textarea_box_wrp">\n                <span class="frm_textarea_box">\n                    <#if(window.friend_comment_enabled == 1){#>\n                    \x3c!-- <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言对朋友可见，被公众号筛选后，将对所有人可见。"></textarea> --\x3e\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>\n                    <#}else{#>\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>\n                    <#}#>\n                    <div class="emotion_tool">\n                        <span class="emotion_switch" style="display:none;"></span>\n                        <span id="js_emotion_switch" class="pic_emotion_switch_wrp">\n                            <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n                            <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n                            <img class="pic_default_primary" src="<#=window.icon_emotion_switch_primary#>" alt="">\n                            <img class="pic_active_primary" src="<#=window.icon_emotion_switch_active_primary#>" alt="">\n                        </span>\n                    </div>\n                </span>\n            </div>\n            <div class="emotion_panel" id="js_emotion_panel">\n                <span class="emotion_panel_arrow_wrp" id="js_emotion_panel_arrow_wrp">\n                    <i class="emotion_panel_arrow arrow_out"></i>\n                    <i class="emotion_panel_arrow arrow_in"></i>\n                </span>\n                <div class="emotion_list_wrp" id="js_slide_wrapper">\n                    \x3c!--<ul class="emotion_list"></ul>--\x3e\n                    \x3c!--<li class="emotion_item"><i class="icon_emotion"></i></li>--\x3e\n                </div>\n                <ul class="emotion_navs" id="js_navbar">\n                    \x3c!--<li class="emotion_nav"></li>--\x3e\n                </ul>\n            </div>\n            <div class="discuss_btn_wrp"><a id="js_cmt_submit" class="btn btn_primary btn_discuss btn_disabled" href="##">留言</a></div>\n          </div>\n          <div class="discuss_container_bd">\n            <div class="" style="display:none">\n                <div class="mod_title_context">\n                    <strong class="mod_title">我的留言</strong>\n                </div>\n                <ul class="discuss_list" id="js_cmt_mylist"></ul>\n            </div>\n            <div class="weui-loadmore" id="js_mycmt_loading">\n                <i class="weui-loading"></i>\n                <span class="weui-loadmore__tips">正在加载</span>\n            </div>\n            <div id="js_cmt_toast" style="display: none;">\n                <div class="weui-mask_transparent"></div>\n                <div class="weui-toast">\n                    <i class="weui-icon-success-no-circle weui-icon_toast"></i>\n                    <p class="weui-toast__content">已留言</p>\n                </div>\n            </div>\n            <div class="weui-dialog__wrp weui-transition_opacity-hide" id="js_delete_panel_mobile">\n                <div class="weui-mask"></div>\n                <div class="weui-dialog">\n                    <div class="weui-dialog__bd">确定删除留言吗？</div>\n                    <div class="weui-dialog__ft">\n                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" id="js_delete_cancel_mobile">取消</a>\n                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_delete_confirm_mobile">删除</a>\n                    </div>\n                </div>\n            </div>\n          </div>\n        </div>\n    </div>\n  </div>\n<#}else{#>\n    <div id="js_cmt_mine" class="discuss_container editing access" style="display:none;">\n        <div class="discuss_container_inner">\n            <h2 class="rich_media_title"><#=window.msg_title.html(1)#></h2>\x3c!-- 标题要转义 --\x3e\n            <span id="log"></span>\n            <div class="frm_textarea_box_wrp">\n                <span class="frm_textarea_box">\n                    <#if(window.friend_comment_enabled == 1){#>\n                    \x3c!-- <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言对朋友可见，被公众号筛选后，将对所有人可见。"></textarea> --\x3e\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>\n                    <#}else{#>\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>\n                    <#}#>\n                    <div class="emotion_tool">\n                        <span class="emotion_switch" style="display:none;"></span>\n                        <span id="js_emotion_switch" class="pic_emotion_switch_wrp">\n                            <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n                            <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n                        </span>\n                        <div class="emotion_panel" id="js_emotion_panel">\n                            <span class="emotion_panel_arrow_wrp" id="js_emotion_panel_arrow_wrp">\n                                <i class="emotion_panel_arrow arrow_out"></i>\n                                <i class="emotion_panel_arrow arrow_in"></i>\n                            </span>\n                            <div class="emotion_list_wrp" id="js_slide_wrapper">\n                                \x3c!--<ul class="emotion_list"></ul>--\x3e\n                                \x3c!--<li class="emotion_item"><i class="icon_emotion"></i></li>--\x3e\n                            </div>\n                            <ul class="emotion_navs" id="js_navbar">\n                                \x3c!--<li class="emotion_nav"></li>--\x3e\n                            </ul>\n                        </div>\n                    </div>\n                </span>\n            </div>\n            <div class="discuss_btn_wrp"><a id="js_cmt_submit" class="btn btn_primary btn_discuss btn_disabled" href="##">留言</a></div>\n            <div class="discuss_list_wrp" style="display:none">\n                <div class="rich_tips with_line title_tips discuss_title_line">\n                    <span class="tips">我的留言</span>\n                </div>\n                <ul class="discuss_list" id="js_cmt_mylist"></ul>\n            </div>\n            <div class="rich_tips tips_global loading_tips" id="js_mycmt_loading">\n                <img src="<#=window.icon_loading_white#>" class="rich_icon icon_loading_white" alt="">\n                <span class="tips">加载中</span>\n            </div>\n            <div class="wx_poptips" id="js_cmt_toast" style="display:none;">\n                <img alt="" class="icon_toast" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABqCAYAAABUIcSXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMTUxMzkxZS1jYWVhLTRmZTMtYTY2NS0xNTRkNDJiOGQyMWIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTA3QzM2RTg3N0UwMTFFNEIzQURGMTQzNzQzMDAxQTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTA3QzM2RTc3N0UwMTFFNEIzQURGMTQzNzQzMDAxQTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NWMyOGVjZTMtNzllZS00ODlhLWIxZTYtYzNmM2RjNzg2YjI2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjIxNTEzOTFlLWNhZWEtNGZlMy1hNjY1LTE1NGQ0MmI4ZDIxYiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmvxj1gAAAVrSURBVHja7J15rF1TFMbXk74q1ZKHGlMkJVIhIgg1FH+YEpEQJCKmGBpThRoSs5jVVNrSQUvEEENIhGiiNf9BiERICCFIRbUiDa2qvudbOetF3Tzv7XWGffa55/uS7593977n3vO7e5+199p7v56BgQGh0tcmvAUERREUQVEERREUQVEERREUQVEERREUQVEERREUQVEERREUQVEERVAUQVEERVAUQbVYk+HdvZVG8b5F0xj4RvhouB+eCy8KrdzDJc1RtAX8ILxvx98V1GyCSkN98Cx4z/95/Wn4fj6j6tUEeN4wkFSnw1MJqj5NhBfAuwaUHREUg4lqNMmePVsHll/HFhVfe1t3FwpJI8DXCCquDrCWNN4B6Tb4M3Z98aTPmTvh0YHl18PXw29yZiKejoPvcUD6E74yFBJbVDk6Bb7K8aP/Hb4c/tRzEYIqprPhSxzlf4Uvhb/0Xoig8qnHAJ3lqPMzfDH8XZ4LEpRf2sVdA5/sqPO9Qfop70UJyn+/boaPddT5yrq7VUUvTIVJI7q74MMddXR8NB1eXcYvhBpZm0s2w72/o86HFoKvLau/pYaXzjLMdUJ6y0LwtWV9CIIaXtvA8+G9HHV03u5q+K+yH47U0NoRngPv7KjzHDwTLj0bS1BDazfJJlcnOOostC6ysnCT+q80G/sIvFVgeW09D8FPVT0uoP7VfvAD8NjA8pqmuAN+OcYAjso0RbIZ8DGB5TVNcRO8JMaHY9SXSdfa3eeANJimWBLrA7JFiZwIXye+NMUV8CcxP2SRFjXefok7NRjSGZJlWUPvw2/wtNiQirSoXWyMsR28wR7AzzYM0oXw+Y7yK+CLJGeaoqjyrJSdZJD6Ov4+z5y6NJc0Az7NUecHydIUy+v60KNyQHoM3nKI1y7YCFiq0i7uBvgER52vDdKqWn9djhY1Dn4G3n6Ecqm2rF74dvgoR53S0hQxW9RJAZAGW5bSn58QJA27dQ7uIEedjywEX5NKVxCqsY6y+qA+LxFI4+yZ6oH0trWkNan80jygtIUsc5SflgAsDXgehfdx1KkkTRE76tN+Xue2jnTU0Ru1oIbvpt30bBtKhOp5yaaRkts0lic8V1i6dPcIRx2d/l8Y8XtNNEg7OOo8bl1kmmOKnDsO88CaYzejau0hWZqiL7C83oCH4SeTHvwV2BqqsHRVztSEYOmWF80NeXZT6Hd4KflResE9vCnBOlCyGfDNAstHTVPUDWoQ1t3iW+9WNizvlhfd4aerXd+ThqiMfNR6+9LvOOro5OY5JX2H4+F7HZD+kGzlamMgldWiirQsjcwWFbjmqZJteekJLK9pisvgL6RhKvuciZiwzrWWGapfrPy30kBVcSBIrw0aD3PU0XB6cehntq7rTMf7/2iQlktDVdXJLXlg6VjmiYBn6rWSTRCH6hvJ0hQrpcGq8oidsmHpTP8t8DGO9/vcWt9qabiqPgup1yKyQwvC2tSefZ73SSpNkUJ4PlLorlHZ+446nc8f3fIyywlJhwrTuwVSjBa1ccvSxN0hjjoK5xVrYZMd9V6XbFfgBukixTwGLg8sDam3dZR/wZ6L/dJlin1en8LS+bgpFbz3Ygvzu1J1HKxYNqxGpCmaCEo12rrBorD6LRp8UbpcdR5VWhTW35KlKd6QFqjuM2XzwlpnMxTvSkuUwuG/Xlg6NtPjbT6WFimF/VG6LEvXgn8QGDjMbBukVECFwhpoS+CQatfX2Q1q6H7wENHdrfCr0lKleEB9JyxNneus+VJpsVL9TwI6W65LovWIGl3KtVJaLv7LBwYTFEERFEVQFEERFEVQFEERFEVQFEERFEVQFEERFEVQFEERFFWq/hFgADUMN4RzT6/OAAAAAElFTkSuQmCC">\n                <p class="toast_content">已留言</p>\n            </div>\n        </div>\n    </div>\n<#}#>\n<div class="weui-webview-nav" style="display:none;" id="js_fake_bar">\n    <button class="weui-webview-nav__btn_goback" id="js_cmt_goback">goback</button>\n    <button class="weui-webview-nav__btn_forward weui-webview-nav__btn_disabled" disabled="disabled">forward</button>\n</div>';const Ds={tagName:"mp-common-poi",oldTagName:"mppoi",isWechat:($.isAndroid||$.isIOS||$.isHarmonyWechat)&&($.isWechat||$.isWxWork)&&!$.isNewMpApp,screen_height:j.getInnerHeight(),commonReportData:{bizuin:1*ze(window.biz),msgid:1*window.mid,itemidx:1*window.idx,sessionidnew:window.sessionid,enterid:1*window.enterid},commonReportData35335:{BizUin:window.biz,MsgId:1*window.mid,ItemIdx:1*window.idx,ItemShowType:1*window.item_show_type,Scene:1*window.scene,Subscene:1*window.subscene,EnterIdNew:1*window.enterid,SessionId:window.sessionid},poiDom:[]},Bs=(e,t)=>{Ds.isWechat?$.isWxWork?ae():(G.invoke("openLocation",{latitude:1*e.latitude,longitude:1*e.longitude,name:e.name,address:e.address,poiCardExpand:!0,infoUrl:"",isHalfScreen:!!t,fromMpItem:{bizuin:1*window.atob(window.biz),appmsgid:1*window.mid,idx:1*window.idx}},(function(e){-1!==e.err_msg.indexOf("ok")?R.setSum(110809,53,1):R.setSum(110809,54,1)})),D.report(35335,Object.assign({},Ds.commonReportData35335,{EventType:1,Latitude:e.latitude,Longitude:e.longitude,Address:e.address,PoiId:e.poiId||"",Type:+e.poiType||0}))):$.isNewMpApp?window.open("https://apis.map.qq.com/uri/v1/marker?marker=coord:".concat(e.latitude,",").concat(e.longitude,";title:").concat(encodeURIComponent(e.name),";addr:").concat(encodeURIComponent(e.address))):new K({msg:"请使用移动端微信打开。"})},Ls=(e={})=>{const t=e.dom,i=e.poiInfo;re.on(t,"click",(function(e){e.stopPropagation(),e.preventDefault(),D.report(19937,Object.assign({},Ds.commonReportData,{type:2,actiontype:2})),R.setSum(110809,55,1),Bs(i)}),!0)},Ns=()=>{for(let e=0;e<Ds.poiDom.length;e++){const t=Ds.poiDom[e];if(1*t.getAttribute("data-hasreport")!=1){t.setAttribute("data-hasreport",1);const e=document.documentElement.scrollTop||document.body.scrollTop;if(t.clientHeight+t.offsetTop>=e+t.clientHeight/2&&t.clientHeight+t.offsetTop<=e+t.clientHeight/2+Ds.screen_height){const e={latitude:decodeURIComponent(t.getAttribute("data-latitude")||""),longitude:decodeURIComponent(t.getAttribute("data-longitude")||""),poiId:decodeURIComponent(t.getAttribute("data-poiid")||""),address:decodeURIComponent(t.getAttribute("data-address")||""),name:decodeURIComponent(t.getAttribute("data-name")||""),poiType:1==+decodeURIComponent(t.getAttribute("data-type")||"")?5:4};"A"===t.tagName?(D.report(19937,Object.assign({},Ds.commonReportData,{type:1,actiontype:1})),R.setSum(110809,58,1),D.report(35335,{...Ds.commonReportData,Latitude:e.latitude,Longitude:e.longitude,PoiId:e.poiId||"",Address:e.address,EventType:2,Type:5})):(D.report(19937,Object.assign({},Ds.commonReportData,{type:2,actiontype:1})),R.setSum(110809,56,1),D.report(35335,{...Ds.commonReportData,Latitude:e.latitude,Longitude:e.longitude,PoiId:e.poiId||"",Address:e.address,EventType:2,Type:4}))}}}},Os={oldTagName:"mpsearch",tagName:"mp-common-search",isWechat:($.isAndroid||$.isIOS)&&($.isWechat||$.isWxWork)&&!$.isNewMpApp,keywords:[],screen_height:j.getInnerHeight(),exposeHasReport:0,commonReportData:{BizUin:window.biz,MsgId:1*window.mid,ItemIdx:1*window.idx,SearchKeyWord:"",SessionId:window.sessionid,EnterId:1*window.enterid,Scene:1*window.source,SubScene:1*window.subscene}},Ms=(e={})=>{re.on(e.dom,"click",(function(){const e=Os.keywords.map((e=>e.label)).join(";");if(D.report(19453,Object.assign({},Os.commonReportData,{SearchKeyWord:e,EventType:2})),R.setSum(110809,47,1),Os.isWechat){if($.isWxWork)ae();else if(($.isIOS&&$.ltVersion("7.0.12")||$.isAndroid&&$.ltVersion("7.0.12"))&&!$.isWxWork)return void new K({msg:"当前微信版本不支持展示该内容，请升级至最新版本。"});const e=[];for(let t=0;t<Os.keywords.length;t++)e.push({hotword:Os.keywords[t].label,id:t,optype:1});G.invoke("openWXSearchPage",{query:"",thirdExtParam:JSON.stringify({data:[{items:e,title:window.nickname+"推荐搜索",type:4}],from:"mpWidget",bizUserName:window.user_name,bizNickName:window.nickname,id:"mpWidget_".concat(Os.commonReportData.BizUin,":").concat(Os.commonReportData.MsgId,":").concat(Os.commonReportData.ItemIdx)})},(function(e){-1!==e.err_msg.indexOf("ok")?R.setSum(110809,48,1):R.setSum(110809,49,1)}))}else new K({msg:"请使用移动端微信打开。"})}));const t=()=>{if(!Os.exposeHasReport){Os.exposeHasReport=1;const t=document.documentElement.scrollTop||document.body.scrollTop;if(e.dom.clientHeight+e.dom.offsetTop>=t+e.dom.clientHeight/2&&e.dom.clientHeight+e.dom.offsetTop<=t+e.dom.clientHeight/2+Os.screen_height){const e=Os.keywords.map((e=>e.label)).join(";");D.report(19453,Object.assign({},Os.commonReportData,{SearchKeyWord:e,EventType:1})),R.setSum(110809,46,1)}}};re.on(window,"scroll",t),t()};let zs={pvele:[],checkInScreenId:null,reportRandom:Math.random()};function Ws(){if(console.log("weproduct init"),"function"!=typeof document.getElementsByClassName)return;let e=document.getElementsByClassName("js_product_container");e&&e.length>0&&(!function(e){try{for(let t=0,i=e.length;t<i;t++){let i=e[t];if(i.className.indexOf("js_list_container")>=0){let e=i.querySelector("img.js_cover");if(e){let t=e.parentNode.getBoundingClientRect();e.style.setProperty("width",t.width+"px","important"),e.style.setProperty("height",t.height+"px","important"),e.style.setProperty("background-size","unset","important"),"0"==e.getAttribute("data-fail")?qs.call(e):e.getAttribute("data-fail")||(e.lazyLoadOnload=e.lazyLoadOnload||[],e.lazyLoadOnload.push(qs))}}}}catch(Pd){}}(e),Q.getAppidInfo({onSuccess:function(t){zs.data=t.data,function(e){for(let i=0,o=e.length;i<o;i++)!function(e,t){re.on(e,"click",".js_product_loop_content",(function(e){let i=e.delegatedTarget,o=i.getAttribute("data-wxaappid"),n=i.getAttribute("data-wxapath"),a=i.getAttribute("data-pid"),s=i.getAttribute("data-appid"),r=i.querySelector(".cps_inner_info_title").innerHTML;return Q.jumpUrl({privateExtraData:{cookies:"cps_package=123456; expires=1538286412; busid=mmbiz_ad_cps; domain=*"},sourceAppId:s,appid:o,path:n,scene:1091,sceneNote:[encodeURIComponent(location.href),user_name,msg_title,encodeURIComponent(a),r,n].join(":"),beforeNonWechatWarn:function(){},beforeJumpBackupPage:function(){},onJsapiCallback:function(e){if("openWeApp:ok"===e.err_msg&&a){let e=2;2==i.getAttribute("data-pidtype")&&(e=4),Hs([{wxa_appid:o,pid:a,type:e,absolute_order:t+1,appid:i.getAttribute("data-appid")||"",templateid:i.getAttribute("data-templateid")||"",relative_order:1*i.getAttribute("data-order"),packid:i.getAttribute("data-packid")||""}])}}}),!1}))}(e[i],i);let t=document.getElementsByClassName("js_product_loop_content");if(t&&t.length>0&&j.getInnerHeight()){for(let e=0;e<t.length;e++)zs.pvele.push(t[e]);Us(),re.on(window,"scroll",Us)}}(e)}})),setTimeout((function(){let e=document.getElementsByClassName("js_product_loop_content").length,t=document.getElementsByClassName("js_product_err_container").length;R.setSum("64469","15",e+t),R.setSum("64469","16",e),R.setSum("64469","18",t)}),0)}function qs(){let e=this.parentNode;if(!e)return;let t=document.createElement("span");t.className=this.className,t.style.background='url("'+this.src+'") no-repeat center',e.insertBefore(t,this),e.removeChild(this)}function Us(e){zs.checkInScreenId&&clearTimeout(zs.checkInScreenId),zs.checkInScreenId=setTimeout((function(){zs.checkInScreenId=null;let e=[];for(let t=0;t<zs.pvele.length;t++){let i=zs.pvele[t],o=i.getBoundingClientRect();if((o.height||o.bottom-o.top)>0&&o.top<j.getInnerHeight()&&o.bottom>0){let o=i.getAttribute("data-pid");if(o){let n=1;2==i.getAttribute("data-pidtype")&&(n=3),e.push({wxa_appid:i.getAttribute("data-wxaappid"),pid:o,type:n,absolute_order:t+1,appid:i.getAttribute("data-appid")||"",templateid:i.getAttribute("data-templateid")||"",relative_order:1*i.getAttribute("data-order"),packid:i.getAttribute("data-packid")||""})}zs.pvele.splice(t--,1)}}Hs(e),0==zs.pvele.length&&(re.off(window,"scroll",Us),Us=null)}),100)}function Hs(e){if(!e||0==e.length)return;let t={batch_no:B.getQuery("batch_no")||"",bizuin:window.biz||"",biz:window.biz||"",mid:window.mid||"",idx:window.idx||"",total:e.length};for(let i=0;i<e.length;i++){let o=e[i],n=i+1;for(let e in o)o.hasOwnProperty(e)&&(t[e+""+n]=o[e])}P({url:"/mp/productreport?",type:"POST",data:t,dataType:"json",async:!0})}const Fs=window.location.protocol+"//support.weixin.qq.com/update/";let Vs=[],Js=1,$s=B.getQuery("fontScale");function Gs(e){$s=e.fontScale,setTimeout((()=>{const e=document.getElementsByTagName("wx-open-subscribe")||[];for(let t=0;t<e.length;t++)e[t].setAttribute("size",Js),e[t].setAttribute("scale",$s),Js++}),50)}function Ks(){if(!document.getElementById("js_content"))return;const e=document.querySelectorAll("mpsubscribe");for(let t=0;t<e.length;t++){const i=e[t],o=document.createElement("mp-common-subscribe"),n=i.getAttribute("data-templateidlist"),a=i.getAttribute("data-index")||0;i.parentNode.appendChild(o),i.parentNode.removeChild(i),o.setAttribute("data-templateidlist",n),o.setAttribute("data-index",a)}Vs=document.getElementsByTagName("mp-common-subscribe")||[];for(let t=0;t<Vs.length;t++){const e=Vs[t],i=e.getAttribute("data-templateidlist")||[],o=e.getAttribute("data-index")||0,n=window.__is_support_wxOpen?1:0;e.setAttribute("data-scene",window.is_temp_url?3:2),e.setAttribute("data-username",window.user_name),e.setAttribute("data-supportwxopen",n),e.setAttribute("data-scale",$s),e.setAttribute("data-index",o),e.setAttribute("data-tagContent","订阅通知"),e.setAttribute("data-templateidlist",i),n||e.classList.add("js_subsc_btn")}T(Gs),function(){const e=document.getElementsByClassName("js_subsc_btn")||[];for(let t=0;t<e.length;t++){const i=e[t];re.on(i,"click",(()=>{kt({clickType:"js_subsc_btn"})||(window.uin&&window.key&&$.isWechat&&!$.isWindowsWechat&&!$.isMacWechat?document.getElementById("js_update_dialog").style.display="block":window.weui.alert("请在手机微信内操作"))}))}re.on(document.getElementById("js_update_cancel"),"click",(()=>{document.getElementById("js_update_dialog").style.display="none"})),re.on(document.getElementById("js_update_confirm"),"click",(()=>{te.jumpUrl(Fs,!0)}))}()}function Qs(){if(!networkType)return;let e=window.performance||window.msPerformance||window.webkitPerformance;if(!e||void 0===e.getEntries)return;let t,i,o=document.getElementsByTagName("img"),n=o.length,a=navigator.userAgent,s=!1;i=RegExp.$1;for(let r=0,d=o.length;r<d;r++){if(t=parseInt(100*Math.random()),t>100)continue;let d=o[r].getAttribute("src");if(!d||d.indexOf("mp.weixin.qq.com")>=0)continue;let c,l=e.getEntries();for(let e=0;e<l.length;e++)if(c=l[e],c.name==d){let e=o[r].getAttribute("data-fail"),t=0;try{a.match(/iphone/i)?t=1:a.match(/android/i)&&(t=2),D.report(11065,{Uin:parseInt(atob(window.biz))||0,IfSuccess:e?1:0,Device:t,user_agent:navigator.userAgent,net_type:networkType,url:d,delay_time:parseInt(c.duration)>0?parseInt(c.duration):0,img_size:o[r].fileSize||0,sample:n>100?100:n,user_device:navigator.userAgent,client_version:i,appmsg_id:parseInt(window.appmsgid,10)})}catch(jd){console.log(jd)}s=!0;break}if(s)break}}let Ys={"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"};const Xs='<div id="js_profile_ban" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-icon-warn weui-icon_toast"></i>\n    <p class="weui-toast__content">该账号因违规无法跳转</p>\n  </div>\n</div>';let Zs=[];const er=[];function tr(e){try{return 1*window.atob(e)}catch(Pd){}return 0}function ir(e,t,i,o){D.report(22316,{BizUin:tr(window.biz),AppMsgID:window.parseInt(window.mid,10)||0,ItemIndex:window.parseInt(window.idx,10)||0,Itemshowtype:0,SessionId:window.sessionid+"",EnterId:window.parseInt(window.enterid,10)||0,Scene:1*window.source,Subscene:1*window.subscene,ActionType:e,toBizuin:tr(t),isBizBan:1*i,isMassSend:1*window.appmsg_type,CardType:o})}function or(){if(Zs&&Zs.length&&er.length===Zs.length)re.off(window,"scroll",or);else for(let e=0;e<Zs.length;e++){const t=Zs[e],i=t.querySelector(".js_wx_profile_card");if(i&&i.getBoundingClientRect().top>0&&i.getBoundingClientRect().top+i.getBoundingClientRect().height/2<=j.getInnerHeight()){const e=i.getAttribute("data-id"),o=i.getAttribute("data-index");if(-1===er.indexOf(o)){er.push(o);ir(0,e,i.getAttribute("data-isban"),1*t.getAttribute("data-from"))}}}}function nr(e,t,i,o,n,a,s){e.addEventListener("click",(()=>{if(ir(1,i,o,a),o){const e=document.getElementById("js_profile_ban");"none"===e.style.display&&(e.style.display="block",setTimeout((()=>{e.style.display="none"}),2e3))}else Ve({dom:e,callback:e=>function(e){let o=275;e&&e.hasCover&&(o=200),We.goProfile({biz:i,scene:124},{username:t,scene:o},null,n)}(e),idkey:299174,idkeyItem:18,detectName:"profileCoverDetect",title:"即将打开公众号",contentDesc:"".concat(s)})}))}function ar(e){return window.mp_profile.find((t=>t.fakeid===e))}function sr(){!function(){if(!document.getElementById("js_content"))return;Zs=Array.from(document.getElementsByTagName("mpprofile"))||[];const e=Array.from(document.getElementsByTagName("mp-common-profile"))||[],t=Zs.concat(e);window.mp_profile.forEach((e=>{e.round_head_img&&(e.round_head_img=e.round_head_img.compressCDNImgSize(),e.round_head_img=B.addWxfrom(e.round_head_img,19))}));for(let o=0;o<t.length;o++){let e=t[o];const i=e.getAttribute("data-id"),n=1*e.getAttribute("data-from"),a=ar(i)||{},{alias:s="",fakeid:r,is_biz_ban:d,nickname:c="",original_num:l,round_head_img:p,signature:m="",username:_,biz_account_status:u,verify_status:h}=a,w=e.parentNode&&e.parentNode.querySelector('[data-preloadingid="'.concat(i,'"]'));if(w&&e.parentNode.removeChild(w),a){if("MPPROFILE"===e.tagName){const t=document.createElement("mp-common-profile");e.parentNode.appendChild(t),e.parentNode.removeChild(e),e=t}e.setAttribute("data-index",o),e.setAttribute("data-id",r),e.setAttribute("data-headimg",p),e.setAttribute("data-nickname",c.htmlDecode()),e.setAttribute("data-alias",s.htmlDecode()),e.setAttribute("data-signature",m.htmlDecode()),e.setAttribute("data-origin_num",1*l),e.setAttribute("data-is_biz_ban",1*d),e.setAttribute("data-isban",1*d),e.setAttribute("data-verify_status",1*h),e.setAttribute("data-biz_account_status",1*u),e.classList.add("js_wx_tap_highlight"),nr(e,a.username,a.fakeid,a.is_biz_ban,a.biz_account_status,n,c.htmlDecode())}else e.innerHTML=""}or();const i=document.createElement("div");i.innerHTML=Me.tmpl(Xs,{}),document.body.appendChild(i)}(),re.on(window,"scroll",or)}const rr=[],dr=document.getElementsByTagName("mp-common-sticker"),cr=new Map,lr=[],pr=[];for(const ct of dr){lr.push(ct.dataset.md5);const e=cr.get(ct.dataset.md5);e?(e.push(ct),cr.set(ct.dataset.md5,e)):(cr.set(ct.dataset.md5,[ct]),ct.dataset.buf||pr.push(ct.dataset.md5))}const mr={EXPOSE:0,CLICK:1,LONGTAP:2};function _r(e,t){const i=t.dataset.md5,o=Number(t.dataset.type),n=t.dataset.emoji_url,a=Number(t.dataset.is_ban),s=t.dataset.buf;D.report(29377,{bizuin:window.biz&&Number(window.atob(window.biz))||0,msgid:window.parseInt(window.mid,10)||0,itemidx:window.parseInt(window.idx,10)||0,SessionId:window.sessionid+"",EnterId:window.parseInt(window.enterid,10)||0,scene:1*window.source,Subscene:1*window.subscene,action:e,md5:i,type:o,url:n,isBan:a,buf:s})}function ur(){var e;!function(){for(const e of dr)re.longtap(e,(function(t){if(t.stopPropagation(),1===parseInt(e.dataset.is_ban,10))return;_r(mr.LONGTAP,e);hr(e.dataset.emoji_url,e.dataset.md5,1,e.dataset.buf||"",!0)}),!0),re.tap(e,(function(t){if(t.stopPropagation(),1===parseInt(e.dataset.is_ban,10))return;_r(mr.CLICK,e);hr(e.dataset.emoji_url,e.dataset.md5,0,e.dataset.buf||"",!0)}))}(),e=lr,P({type:"POST",url:"/mp/checkemoticon?action=checkmd5batch",data:{action:"checkmd5batch",md5ListJson:JSON.stringify({list:e})},dataType:"json",timeout:3e3,success:e=>{e&&e.base_resp&&-1!==e.base_resp.ret&&e.is_ban_list&&Array.isArray(e.is_ban_list)&&e.is_ban_list.forEach(((e,t)=>{dr[t].dataset.is_ban=e}))}}),function(e){if(0===e.length)return;P({type:"POST",url:"/mp/getemojibuf?action=getbuf",data:{action:"getbuf",md5ListJson:JSON.stringify({list:e})},dataType:"json",timeout:3e3,success:e=>{if(e&&e.base_resp&&-1!==e.base_resp.ret&&e.emoji_info&&Array.isArray(e.emoji_info)){e.emoji_info.forEach((e=>{if(e.md5){cr.get(e.md5).forEach((t=>{t.dataset.buf=e.buf}))}}))}},complete:()=>{}})}(pr),function(){let e=null;e=new IntersectionObserver((function(t,i){t.forEach((t=>{if(t.isIntersecting){const i=t.target;_r(mr.EXPOSE,i),e.unobserve(i)}}))}),{threshold:.5}),dr.forEach((t=>{e.observe(t)}))}()}function hr(e,t,i,o,n){const a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(e){const s=new Uint8Array(a.response);let r=s.length;const d=new Array(r);for(;r--;)d[r]=String.fromCharCode(s[r]);const c=d.join(""),l=window.btoa(c);if(n)G.invoke("emoticonAPICollection",{md5:t,opType:i,imageDataString:l,emojiInfoBuf:o},(function(e){}));else{if(!rr)return;rr.push({md5:t,emojiInfoBuf:o,opType:i,imgDataString:l})}return l},a.onerror=function(e){console.log("xmlHttp.onerror",e)},a.onabort=function(e){console.log("xmlHttp.onabort",e)},a.send()}const wr=e=>{var t,i,o;try{D.report(36591,{BizUin:window.biz,MsgId:1*window.mid,ItemIdx:1*window.idx,Scene:1*window.source||1*window.scene||0,Subscene:1*window.subscene||0,EnterId:1*window.enterid||0,SessionId:"".concat(window.sessionid),AlbumId:"".concat((null==(t=window.novel_album_info)?void 0:t.album_id)||""),AlbumTitle:"".concat((null==(i=window.novel_album_info)?void 0:i.novel_title)||""),AlbumUrl:"".concat((null==(o=window.novel_album_info)?void 0:o.novel_path)||""),Action:e})}catch(Pd){}};const gr={tagName:"mp-common-answer",isWechat:($.isAndroid||$.isIOS)&&$.isWechat&&!$.isWxWork&&!$.isNewMpApp,isPCWechat:$.isWindowsWechat||$.isMacWechat},fr=Array.from(document.getElementsByTagName(gr.tagName)),yr=[],vr=[];fr&&fr.length&&fr.forEach((e=>{Number(e.dataset.card_type)?yr.push(e):vr.push(e)}));const br={EXPOSE:1,CLICK:2,ANSWER:3};function xr(e){let t=[];try{if(e){const i=JSON.parse(e);i&&i.list&&Array.isArray(i.list)&&(t=i.list)}}catch(i){console.log(i)}return t}function kr(e,t){const i=window.parseInt(t.dataset.usertype,10),o=xr(t.dataset.picture_clist),n=xr(t.dataset.video_list);D.report(30376,{bizuin:window.biz&&Number(window.atob(window.biz))||0,msgid:window.parseInt(window.mid,10)||0,itemidx:window.parseInt(window.idx,10)||0,title:window.msg_title||"",accountType:1===i?2:1,accountUin:t.dataset.username,answerCardId:t.dataset.aid,questionId:t.dataset.qid,hasComment:t.dataset.comment?1:0,hasPicture:o.length>0?1:0,hasVideo:n.length>0?1:0,actionType:e,type:Number(t.dataset.card_type)||0})}function Ir(e,t,i={}){let o="";i.minVersion&&(o+="&min_version=".concat(encodeURIComponent(i.minVersion)));const n="#/".concat(e);let a="";return Object.keys(t).forEach((e=>{e&&void 0!==t[e]&&(a+="".concat(a?"&":"?").concat(encodeURIComponent(e),"=").concat(encodeURIComponent(String(t[e]))))})),"https://search.weixin.qq.com/cgi-bin/newsearchweb/userclientjump?path=page%2Fask%2Findex".concat(o).concat(n).concat(a)}function Sr(e,t=100){if(e)return e.replace(/\n|\r|\t/g," ").replace(/"|'/g,"").slice(0,t)}function Ar(e){const t=e.map((e=>{var t,i,o,n,a,s,r,d,c,l,p,m,_;const u=null==(i=null==(t=e.answer_content)?void 0:t.video_list)?void 0:i.map((e=>e.media_info?{like_count:e.media_info.like_count||0,thumb_url:e.media_info.thumb_url||""}:{}));let h="";(null==(o=e.answer_content)?void 0:o.text)&&(h=Sr(e.answer_content.text,350));let w="";if(null==(a=null==(n=e.answer_top_comment)?void 0:n.content)?void 0:a.text){const t=Sr(e.answer_top_comment.content.text,100),i=e.answer_top_comment.nickname;t&&(w="".concat(i,"：").concat(t))}return{question_text:e.question_text,state:e.answer_content.state,usertype:e.type,like_count:e.like_count||0,forward_count:e.forward_count||0,comment_count:e.comment_count||0,username:null==(s=e.user_info)?void 0:s.username,nickname:null==(r=e.user_info)?void 0:r.nickname,headimg_url:null==(d=e.user_info)?void 0:d.headimg_url,aid:null==(c=e.answer_content)?void 0:c.aid,qid:null==(l=e.answer_content)?void 0:l.qid,content_text:h,content_type:null==(p=e.answer_content)?void 0:p.type,picture_list:null==(m=e.answer_content)?void 0:m.picture_list,video_list:u,comment:w,avatar_style:null==(_=e.user_info)?void 0:_.avatar_style}}));vr.forEach(((e,i)=>{if(t[i]){const o=t[i].state;if(4!==o)2===o?e.dataset.message="回答仍在审核中":8===o?e.dataset.message="回答审核不通过":64===o&&(e.dataset.message="该回答已被删除"),e.dataset.status=2;else{e.dataset.like_count=t[i].like_count,e.dataset.forward_count=t[i].forward_count,e.dataset.comment_count=t[i].comment_count,e.dataset.avatar_style=t[i].avatar_style,e.dataset.nickname=t[i].nickname,e.dataset.headimg_url=t[i].headimg_url,t[i].comment&&t[i].comment.length&&(e.dataset.comment=t[i].comment.slice(0,100));const o=t[i].picture_list;o&&o.length&&Array.isArray(o)&&(console.log("更新图片",o.slice(0,4)),e.dataset.picture_clist=JSON.stringify({list:o.slice(0,4)}));const n=t[i].video_list;n&&(e.dataset.video_list=JSON.stringify({list:n})),e.dataset.content_text=t[i].content_text,e.classList.add("js_wx_tap_highlight")}}}))}function Tr(){if(!fr||!fr.length)return;const e={count:vr.length,type:[],username:[],aid:[],qid:[],question_id:[]};yr&&yr.length&&yr.forEach((t=>{e.question_id.push(t.dataset.qid)})),vr&&vr.length&&vr.forEach((t=>{const{usertype:i,username:o,aid:n,qid:a}=t.dataset;e.type.push(i),e.username.push(o),e.aid.push(n),e.qid.push(a)})),P({type:"POST",url:"/mp/zhuge_appmsg?action=get_qa_info",data:e,dataType:"json",timeout:3e3,success:e=>{if(console.log("====get_qa_info resp",e),e&&e.base_resp&&-1!==e.base_resp.ret){const t=e.answer_list;t&&Array.isArray(t)&&Ar(t);const i=e.question_list;i&&Array.isArray(i)&&function(e){const t=e.map((e=>{var t,i,o;return{qid:e.question_content.qid,question_text:e.question_content.text,answer_count:e.answer_count,follow_count:e.follow_count,state:e.question_content.state,nickname:null==(t=e.author)?void 0:t.nickname,picture_list:null==(i=e.question_content)?void 0:i.picture_list,like_count:e.answer_like_count,headimg_url:null==(o=e.author)?void 0:o.avatar,answer_flag:e.answer_flag}}));yr.forEach(((e,i)=>{if(t[i]){const o=t[i].state;if(4!==o)2===o?e.dataset.message="问题仍在审核中":8===o?e.dataset.message="问题审核不通过":64===o&&(e.dataset.message="该问题已被删除"),e.dataset.status=2;else{e.dataset.follow_count=t[i].follow_count,e.dataset.answer_count=t[i].answer_count,e.dataset.like_count=t[i].like_count,e.dataset.headimg_url=t[i].headimg_url,e.dataset.nickname=t[i].nickname,e.dataset.avatar_style=t[i].avatar_style,e.dataset.answer_flag=t[i].answer_flag,e.classList.add("js_wx_tap_highlight");const o=t[i].picture_list;o&&o.length&&Array.isArray(o)&&(e.dataset.picture_clist=JSON.stringify({list:o.slice(0,4)}))}}}))}(i)}},complete:()=>{vr.forEach((e=>{1===Number(e.dataset.status)&&(e.dataset.status=0)})),yr.forEach((e=>{1===Number(e.dataset.status)&&(e.dataset.status=0)}))}})}function Cr(){Tr(),function(){for(const e of fr){const t=e.shadowRoot.querySelector("button");t&&re.on(t,"touchstart",(e=>{e.stopPropagation()})),re.on(e,"click",(t=>{var i;if(2!==Number(e.dataset.status))if(gr.isWechat){const i=t.composedPath();if(i&&Array.isArray(i)){const t=i[0];!t||"BUTTON"!==t.tagName||window.zhuge_user_limit||window.is_teenager?(kr(br.CLICK,e),G.invoke("openLiteApp",{appId:"wxalite2fd372f050eecd471a4392786dfae78c",page:"pages/question/entry",query:{qid:e.dataset.qid,aid:e.dataset.aid,scene:7,sceneNote:"".concat(window.biz?window.atob(window.biz):"0","_").concat(window.mid,"_").concat(window.idx)}},(e=>{console.log("open w1w",e)}))):(kr(br.ANSWER,e),G.invoke("openLiteApp",{appId:"wxalite2fd372f050eecd471a4392786dfae78c",page:"pages/answer-editor/entry",query:{qid:e.dataset.qid,scene:7,sceneNote:"".concat(window.biz?window.atob(window.biz):0,"_").concat(window.mid,"_").concat(window.idx)}},(e=>{console.log("open w1w",e)})))}}else if(gr.isPCWechat){const t=Ir("pages/question/entry",{qid:e.dataset.qid,aid:e.dataset.aid,scene:7,sceneNote:"".concat(window.atob(window.biz),"_").concat(window.mid,"_").concat(window.idx)});window.open(t)}else i="请在手机微信端打开",setTimeout((function(){window.weui?window.weui.alert(i):window.alert(i)}),0)}))}}(),function(){let e=null;e=new IntersectionObserver((function(t,i){t.forEach((t=>{if(t.isIntersecting){const i=t.target;kr(br.EXPOSE,i),e.unobserve(i)}}))}),{threshold:0}),fr.forEach((t=>{e.observe(t)}))}()}const Er={tagName:"mp-common-product",CHANNEL_PRODUCT_DOMAIN:"https://mp.weixin.qq.com",isWechat:($.isAndroid||$.isIOS||$.isHarmony)&&$.isWechat&&!$.isWxWork&&!$.isNewMpApp,exposureInit:!1};function Rr(e,t,i){if(e){if(i&&"2"!==i.getAttribute("data-cardtype")){const e={compEle:i,compType:"channelProduct",compIdx:Array.from(document.getElementsByTagName("mp-common-product")).indexOf(i)};Ct.renderCompSilentlyPreHandler(e),xi(i,i.getAttribute("data-windowproduct")),Ct.renderCompSilently(e)}!function(){if(Er.exposureInit)return;Er.exposureInit=!0;let e=null;e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const i=e.target;try{const e=i.shadowRoot.querySelector("iframe");e&&e.contentWindow&&(Ci(e.contentWindow,"webEvent",{type:"expose"}),t.unobserve(i))}catch(jd){console.error(jd)}}}))}),{threshold:1}),Ii.forEach((t=>{e.observe(t)}))}()}}const Pr={init:function(){!function(){let e;const t=document.getElementById("js_product_dialog");re.on(document.getElementById("js_product_dialog_ok"),"click",(function(t){t.stopPropagation(),t.preventDefault();const i=document.getElementById("js_product_dialog"),o=document.querySelector("#js_article");o&&o.removeAttribute("aria-hidden"),i.style.display="none",e&&e()})),re.on(document.getElementById("js_product_dialog_cancel"),"click",(function(e){e.stopPropagation(),e.preventDefault();const t=document.getElementById("js_product_dialog"),i=document.querySelector("#js_article");i&&i.removeAttribute("aria-hidden"),t.style.display="none"})),Array.prototype.map.call(document.getElementById("js_content").getElementsByClassName("product_image_link"),(i=>{const o=document.createElement("mp-common-product");o.setAttribute("data-windowproduct",i.getAttribute("data-windowproduct")),o.setAttribute("data-cardtype",12),i.appendChild(o),re.on(o,"click",(n=>{if(n.preventDefault(),!Er.isWechat)return window.weui.alert("请在微信客户端打开");document.getElementById("js_product_dialog_head").innerText="即将打开微信小店商品",document.getElementById("js_product_dialog_body").innerText=i.getAttribute("data-title"),t.style.display="block",e=()=>{Ci(o.shadowRoot.querySelector("iframe").contentWindow,"webEvent",{type:"openShop",clickType:0})}}))}))}(),ki(Ii),Si(),Ai(),window.addEventListener("message",(e=>{const{iframeEle:t,productEle:i}=Ti(e.source);if(e.origin===Er.CHANNEL_PRODUCT_DOMAIN&&i&&t)try{const{action:o,value:n}=JSON.parse(e.data);if(!o)return;const a=t.contentWindow;switch(o){case"changeFrameStyle":!function(e,t,i){if("2"!==t.getAttribute("data-cardtype")&&e&&t&&i&&"object"==typeof i)try{const o={compEle:t,compType:"channelProduct",subCompType:"cardHeight",compIdx:Array.from(document.getElementsByTagName("mp-common-product")).indexOf(t)};for(const t of Object.keys(i))"height"===t&&Ct.renderCompSilentlyPreHandler(o),e.style[t]=i[t],"height"===t&&Ct.renderCompSilently(o)}catch(jd){console.error(jd)}}(t,i,n);break;case"onFrameReady":Rr(a,0,i)}}catch(jd){console.error(jd)}}))}},jr=window.Vue,Dr={cacheTime:6e5,networkType:"",isPc:/(WindowsNT)|(Windows NT)|(Macintosh)/i.test(navigator.userAgent),defaultErrorWording:"视频加载失败，请刷新页面再试",defaultHeadImgUrl:"http://mmbiz.qpic.cn/mmbiz/a5icZrUmbV8p5jb6RZ8aYfjfS2AVle8URwBt8QIu6XbGewB9wiaWYWkPwq4R7pfdsFibuLkic16UcxDSNYtB8HnC1Q/0",playerStatus:{formatId:null},netTypeMap:{"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"},definitionMap:{20003:4,10002:3,10003:2,10004:1,10102:3,10103:2,10104:1},resolutionNameMap:{10002:"超清",10003:"高清",10004:"流畅",10102:"超清",10103:"高清",10104:"流畅",20003:"自动"},playbackRateInfo:[{rate:.5,name:"0.5倍"},{rate:.75,name:"0.75倍"},{rate:1,name:"1.0倍"},{rate:1.5,name:"1.5倍"},{rate:2,name:"2.0倍"}],allCpsPlayersOfPage:{}},Br={NOT_IN_WECHAT:91,VIDEO_BAN:92},Lr=new L("cps_video_info"),Nr=["继续观看",""],Or=["再次观看","refresh"],Mr={1:Nr.concat("135px"),2:Or.concat("135px"),201:Nr.concat("100%"),202:Or.concat("100%"),203:Nr.concat("135px"),204:Or.concat("135px")},zr=jr.extend({components:{Intersect:be,[Bt.name]:Bt},provide:{playerScene:"cps"},data:()=>({id:Date.now()+"_"+Math.floor(Math.random()*Math.floor(Date.now())),opt:null,playerOpt:null,wrapStyle:null,videoStyle:null,posterStyle:null,topStickyExpendWhenPaused:!1,showScreenshotMask:!1,screenshot:"",toastTips:"",canLoad:!0}),computed:{...pe(["cgiData"]),...pe("mp-video-player",["errType","errCode","errMsg","fullscreenStatus","orientationStatus","refreshBtnStatus","topStickyInfoStatus","commonReportData"]),innerPlugins(){return this.opt&&this.opt.plugins&&this.opt.plugins.filter((e=>e.type===Lt.TYPE_INNER))||[]},coverPlugins(){return this.opt&&this.opt.plugins&&this.opt.plugins.filter((e=>e.type===Lt.TYPE_COVER))||[]},controlPlugins(){return this.opt&&this.opt.plugins&&this.opt.plugins.filter((e=>e.type===Lt.TYPE_CONTROL))||[]},profilePlugins(){return this.opt&&this.opt.plugins&&this.opt.plugins.filter((e=>e.type===Lt.TYPE_PROFILE))||[]},topStickyInfoWording(){const e=Mr[this.topStickyInfoStatus];return e&&e[0]||"继续观看"},topStickyInfoIconClass(){const e=Mr[this.topStickyInfoStatus];return e&&e[1]||""},topStickyInfoMaskWidth(){const e=Mr[this.topStickyInfoStatus];return e&&e[2]||"100%"},extInfo(){return this.opt&&this.opt.extInfo||{}},isDramaVideo(){return this.extInfo&&this.extInfo.dramaInfo}},watch:{orientationStatus(e){this.$emit("orientation-change",e),this.fullscreenStatus?1===e?this.showScreenshotMask=!0:setTimeout((()=>{this.showScreenshotMask=!1}),250):this.showScreenshotMask=!1}},mounted(){Dr.allCpsPlayersOfPage[this.id]=this,this.opt&&this.opt.dontAutoInit||this.init(),this.onPageResize(),this.opt&&this.opt.autoplayWhenExpose&&(this.__debouncedOnScroll=te.debounce(this.onPageScroll.bind(this),250),window.addEventListener("scroll",this.__debouncedOnScroll),this.__debouncedOnScroll()),window.addEventListener("unload",this.onPageUnload),window.addEventListener("resize",this.onPageResize),document.addEventListener("visibilitychange",this.onVisibilityChange)},beforeDestroy(){this.opt&&this.opt.autoplayWhenExpose&&this.__debouncedOnScroll&&window.removeEventListener("scroll",this.__debouncedOnScroll),window.removeEventListener("unload",this.onPageUnload),window.removeEventListener("resize",this.onPageResize),document.removeEventListener("visibilitychange",this.onVisibilityChange)},methods:{...he("mp-video-player",["setError"]),init(){this.initController(),N.addSpecificReport("native_data",(()=>({video_data:{vid:this.opt.vid,lastPlayedTime:this.getCurrentTime(),lastPlayedTimeExpiredTime:(Date.now()+Dr.cacheTime)/1e3}})))},initController(){this.opt={bizUserName:"",bizNickName:"",profileTabType:2,videoTitle:"",headImgUrl:"",preview:!1,fromid:0,oriStatus:3,isMpVideo:0,mpVideoCoverUrl:"",mpVideoTransInfo:[],showFullscreenMenu:!0,videoMd5:"",oriVid:"",vid:"",ckey:"",width:0,height:0,autoplay:!1,muted:!1,loop:!1,__biz:"",uin:"",mid:"",idx:"",comment_id:"",scene_type:0,hitBizuin:"",hitVid:"",totalRange:10,useFeFullscreen:!1,coverFit:"contain",lazyLoad:!1,blurFullscreenBackground:"all",canMute:!0,canFullscreen:!1,canChangePlaybackRate:!1,canPraiseVideo:!1,canShareVideo:!1,canLikeVideo:!1,...this.$options.opt,useWcSlPlayer:!1,useImmersiveMode:!1,isMpVideo:!0},this.opt.oriVid=this.opt.oriVid||this.opt.vid,this.opt.headImgUrl=this.opt.headImgUrl||Dr.defaultHeadImgUrl,1!=this.opt.oriStatus&&2!=this.opt.oriStatus&&(this.opt.oriStatus=3),this.__reportData=l.getVideoReportData(),this.__gWidth=this.__gWidth||this.opt.width,this.__gHeight=this.__gHeight||this.opt.height,this.__playRangeInfo=[],this.__dynamicErrMsg="",this.__isUnloaded=!1,this.__isShowTx=!1,this.__dataCount=0,this.__targetDataCount=2,this.__coverUrl="",this.__cacheStartTs=0,this.__initialData=null,this.__preventResize=Boolean(this.opt.initFullscreenStatus),this.__vInfo={status:null,coverUrl:"",dynamicData:null},this.initLazyLoad(),this.hideError(),this.initLegacyPlugins(),this.initReportData(),this.getCache(),window.__timelineInitialData&&(this.__initialData=window.__timelineInitialData,delete window.__timelineInitialData),this.getCoverUrl(),this.getAdvanceCodecSupportBeforeCallback((()=>{Dr.playerStatus&&!Dr.playerStatus.formatId?Wr((()=>this.getDynamicData())):this.getDynamicData()}))},reinit(e){this.opt&&"object"==typeof this.opt&&(this.$options.opt=e),delete this.__gWidth,delete this.__gHeight,this.$nextTick(this.init)},reload(){this.playerOpt=null,this.initController(),this.triggerEvent("reload")},resetPlayer(){const e=this.$refs.player;e&&(e.__canplay=!1,e.pause(),e.preventOperating(2),e.$refs.video.currentTime=0,e.currentTime=0)},initLazyLoad(){this.canLoad=!this.opt.lazyLoad,this.opt.lazyLoad&&(this.$on("startLoadVideo",(()=>{this.canLoad=!0,this.$nextTick((()=>{this.initPlugins(),this.triggerEvent("playerReady")}))})),this.$on("hideVideo",(()=>{this.canLoad=!1})))},initLegacyPlugins(){const e=this.opt.plugins||[];this.__blockPlugin={},this.__legacyPlugins=[];const t=new Nt;t.setPlayer(this),t.init&&t.init(),this.__legacyPlugins.push(t);for(let i=0,o=e.length;i<o;i++){const t=e[i];t.prototype instanceof Lt||(t.setPlayer(this),t.init&&t.init(),this.__legacyPlugins.push(t))}},initPlugins(){this.$refs.innerPlugins&&this.$refs.innerPlugins.forEach((e=>e.initContext(this))),this.$refs.coverPlugins&&this.$refs.coverPlugins.forEach((e=>e.initContext(this))),this.$refs.controlPlugins&&this.$refs.controlPlugins.forEach((e=>e.initContext(this))),this.$refs.profilePlugins&&this.$refs.profilePlugins.forEach((e=>e.initContext(this)))},destroyPlugins(){this.opt.plugins=[],this.__legacyPlugins.forEach((e=>e.destroy&&e.destroy())),this.__legacyPlugins=[],this.__blockPlugin={}},initReportData(){let e=this.__reportData;e.mid=this.opt.mid,e.__biz=this.opt.__biz,e.idx=this.opt.idx,e.vid=this.opt.vid,e.commentid=this.opt.comment_id,e.scene_type=this.opt.scene_type,e.auto_play=this.opt.autoplay?1:0,e.fromid=this.opt.fromid,e.hit_bizuin=this.opt.hitBizuin,e.hit_vid=this.opt.hitVid,this.__monitorUid=this.triggerEvent("initMonitor",64728),this.__monitorUid2=this.triggerEvent("initMonitor",380812)},getReportTypeBySceneType(){return 0==this.opt.scene_type?1:1==this.opt.scene_type||2==this.opt.scene_type?2:4==this.opt.scene_type?3:7==this.opt.scene_type?4:0},onPageScroll(){const e=this.$refs.player;if(!this.__exposing)return void(!this.opt||!this.opt.autoplayWhenExpose||e&&e.isEnd()||this.__coverNextShowing||(this.__shouldPlayAfterCanplay=!1,setTimeout((()=>this.pause()))));Object.keys(Dr.allCpsPlayersOfPage).filter((e=>Dr.allCpsPlayersOfPage[e]&&Dr.allCpsPlayersOfPage[e].__exposing)).reduce(((e,t)=>{const i=Dr.allCpsPlayersOfPage[t].$el.getBoundingClientRect();let o=0;return i.top>=0?o=Math.max(Math.min(window.innerHeight-i.top,i.height),0):i.bottom>=0&&(o=Math.max(Math.min(i.bottom,window.innerHeight),0)),e[t]=o,o>=e.max&&(e.max=o,e.maxId=t),e}),{max:0,maxId:""}).maxId===this.id?!this.opt||!this.opt.autoplayWhenExpose||e&&e.isEnd()||this.__coverNextShowing||e&&e.isPlay()||(this.__canPlay?setTimeout((()=>{const e=this.getPlayer();e&&e.resumeOperating(),this.play(),this.triggerEvent("exposeAutoPlay")})):this.__shouldPlayAfterCanplay=!0):!this.opt||!this.opt.autoplayWhenExpose||e&&e.isEnd()||this.__coverNextShowing||(this.__shouldPlayAfterCanplay=!1,setTimeout((()=>this.pause())))},onPageUnload(e){if(this.__isUnloaded)return;this.__isUnloaded=!0;let t=this.__reportData;if(0===t.videoerror?this.cacheData():this.clearCache(),e&&"leaveReport"===e.type){const e=[];for(let i in t)t.hasOwnProperty(i)&&e.push(i+"="+encodeURIComponent(t[i]));return{reportUrl:"/mp/videoreport?",method:"POST",reportData:e.join("&")}}l.videoreport({data:t,async:!1})},onVisibilityChange(){document.hidden&&this.cacheData()},onPageResize(){this.__preventResize||(this.$refs.player&&this.$refs.player.isWcSlPlayer?this.fullscreenStatus||setTimeout((()=>{const e=this.$el.parentNode,t=e&&e.getBoundingClientRect(),i=t&&t.width||0;0!==i&&this.setVideoSize({width:i})}),0):this.opt.height&&this.opt.width&&(this.__isShowTx&&this.__txPlayer?setTimeout((()=>{try{const e=this.$el.parentNode,t=e&&e.getBoundingClientRect(),i=this.opt.width/this.opt.height,o=t&&t.width||0,n=Math.floor(o/i);0!==o&&(e.style.height=n+"px",this.__gWidth=o,this.__gHeight=n,this.__txPlayer.resize({width:o,height:n}))}catch(Pd){}}),0):setTimeout((()=>{const e=this.$el.parentNode,t=e&&e.getBoundingClientRect(),i=t.width,o=t.height;0!==i&&(this.__gWidth=i,this.__gHeight=o,this.setVideoSize({width:i,height:o}))}),250)))},getCache(){const e=function(e,t,i,o,n){let a=Lr.get(o||n);if(!a)return null;try{if(a=JSON.parse(a)||{},!a.time||Date.now()-Dr.cacheTime>1*a.time)return Ur(o||n),a.videoInfo={status:qr(e,t,i,o||n)},a}catch(Pd){return Ur(o||n),null}return a=a.videoInfo?a:{videoInfo:{}},a.videoInfo.status=qr(e,t,i,o||n),a.videoInfo?a:null}(this.opt.__biz,this.opt.mid,this.opt.idx,this.opt.vid||this.opt.playUrl);if(e){const t=this.__vInfo;t.dynamicData=e.videoInfo.dynamicData||null,t.coverUrl=e.videoInfo.coverUrl||"",t.status=e.videoInfo.status||null,this.__cacheStartTs=e.time||null}},cacheData(){const e=this.$refs.player,t=this.__vInfo;e&&(t.status||(t.status={}),"function"==typeof e.isEnd&&(t.status.isEnd=e.isEnd()),"function"==typeof e.getCurTime&&(t.status.playTime=e.getCurTime()),"function"==typeof e.getPlaybackRate&&(t.status.playbackRate=e.getPlaybackRate()),!this.__initialData&&this.__coverUrl&&(t.coverUrl=this.__coverUrl),function(e,t,i,o,n,a){let s={dynamicData:n.dynamicData||null,coverUrl:n.coverUrl||""};const r=Date.now()+864e5;Lr.set(o,JSON.stringify({time:a||Date.now(),videoInfo:s}),r),n.status&&Lr.set(e+t+i+o,JSON.stringify(n.status),r)}(this.opt.__biz,this.opt.mid,this.opt.idx,this.opt.vid||this.opt.playUrl,this.__vInfo,this.__cacheStartTs))},clearCache(){Ur(this.opt.vid||this.opt.playUrl)},getCoverUrl(){this.__coverUrl=this.opt.cover,this.__dataCount++,this.videoDataReady(),this.getFloatCoverBase64(this.__coverUrl)},getDynamicData(){if(window.cgiData.is_teenager||window.is_teenager)return this.__dynamicErrMsg="未成年人模式下暂不支持观看视频",this.__reportData.duration_ms=0,this.__vInfo.dynamicData=null,this.__dataCount=this.__targetDataCount,void setTimeout((()=>this.videoDataReady()),0);if(this.isDramaVideo){if(!$.isWechat)return this.__dynamicErrMsg="请在微信客户端打开",this.__reportData.videoerror=Br.NOT_IN_WECHAT,this.__reportData.duration_ms=0,this.__vInfo.dynamicData=null,this.__dataCount=this.__targetDataCount,void setTimeout((()=>this.videoDataReady()),0);if(this.extInfo&&this.extInfo.dramaInfo&&this.extInfo.dramaInfo.ban)return this.__dynamicErrMsg="视频暂时无法播放",this.__reportData.videoerror=Br.VIDEO_BAN,this.__reportData.duration_ms=0,this.__vInfo.dynamicData=null,this.__dataCount=this.__targetDataCount,setTimeout((()=>this.videoDataReady()),0),void V.error("cps player controller: failed to play drama video: dramaBan")}this.__vInfo.dynamicData={data:{formatid:10003,time:this.opt.duration,title:"",width:this.opt.videoWidth,height:this.opt.videoHeight,file_size:0,totalUrl:this.opt.playUrl,rate:0,ori_url_info:[{format_id:10003,url:this.opt.playUrl}]}},this.__dataCount++,this.videoDataReady()},videoDataReady(){this.__dataCount===this.__targetDataCount&&(this.__isShowTx?this.removeLoading():this.__vInfo.dynamicData?this.createPlayer():(this.removeLoading(),V.error("cps player controller: failed to create player because no dynamic data")))},createPlayer(){let e=this.__vInfo,t=this.__reportData,i=e.dynamicData.data;this.__reportData.duration_ms=parseInt(1e3*i.time),this.initPlayRangeInfo({durationMs:this.__reportData.duration_ms}),t.vtitle=this.opt.vtitle||i.title||"";const o=this.getReportTypeBySceneType();let n,a;if(i.ori_url_info){const e=function(e){const t={};return e.url_info.forEach((i=>{let o;const n=i.format_id;switch(1*n){case 20003:case 10002:case 10003:case 10004:t[Dr.definitionMap[n]]||(o=Dr.definitionMap[n]);break;case 10102:case 10103:case 10104:e.h265&&(o=Dr.definitionMap[n])}o&&(t[o]=i)})),t}({h265:this.__supportH256,url_info:i.ori_url_info});n=i.ori_url_info.find((e=>10004===e.format_id)),a=Object.keys(e).filter((e=>1*e!==Dr.definitionMap[20003]||this.opt.useWcSlPlayer&&$.isWechat&&$.isAndroid&&$.gtVersion("7.0.16",1))).sort(((e,t)=>t-e)).map((t=>{const i=e[t];return{name:i.video_quality_wording||Dr.resolutionNameMap[i.format_id],formatId:i.format_id,height:i.height,width:i.width,src:i.url}}))}const s=B.getQuery("play_time");let r=0;this.__initialData?r=this.__initialData.initialTime||0:""!==s?r=1*s||0:e.status&&!e.status.isEnd&&(r=e.status.playTime||0),console.info("[CPS Video Info]",i),V.info("cps player controller: begin to create player",JSON.stringify(i)),this.playerOpt={...this.opt,__biz:this.opt.__biz,mid:this.opt.mid,idx:this.opt.idx,bizUserName:this.opt.bizUserName,bizNickName:this.opt.bizNickName,profileTabType:this.opt.profileTabType,videoTitle:t.vtitle,videoReportType:o,coverFit:this.opt.coverFit,cover:this.__coverUrl,width:this.__gWidth,height:this.__gHeight,videoWidth:i.width,videoHeight:i.height,duration:i.time,autoplay:this.opt.autoplay,flowNotice:this.opt.flowNotice,flow:i.flow,loop:this.opt.loop,muted:this.opt.muted,src:i.totalUrl,formatId:i.formatid,headImgUrl:this.opt.headImgUrl,useWcSlPlayer:this.opt.useWcSlPlayer,useImmersiveMode:this.opt.useImmersiveMode,useFeFullscreen:this.opt.useFeFullscreen,oriStatus:this.opt.oriStatus,initialTime:r,resolutionInfo:a,retryResolution:n,playbackRateInfo:Dr.playbackRateInfo,playbackRateBtnInfoDefaultId:2,showFullscreenMenu:this.opt.showFullscreenMenu,videoMd5:this.opt.videoMd5,extinfo:{hit_bizuin:this.opt.hitBizuin,hit_vid:this.opt.hitVid,vid:this.opt.vid,preview:this.opt.preview,pageplayer:this},fileSize:i.file_size,checkPlayAuthority:this.checkPlayAuthority,readNum:this.__immersiveData&&this.__immersiveData.view_num&&this.__immersiveData.view_num.pv||0,praiseNum:this.__immersiveData&&this.__immersiveData.like_num&&this.__immersiveData.like_num.pv||0,likeNum:this.__immersiveData&&this.__immersiveData.seen_num&&this.__immersiveData.seen_num.pv||0,isPraised:this.__immersiveData&&this.__immersiveData.like_num&&this.__immersiveData.like_num.liked||0,isLiked:this.__immersiveData&&this.__immersiveData.seen_num&&this.__immersiveData.seen_num.seen||0,disableBorderRadius:!0,alwaysShowControl:this.opt.alwaysShowControl,hideDuration:this.opt.hideDuration||!1},this.$nextTick((()=>{this.initPlugins(),this.triggerEvent("playerReady")}))},removeLoading(){this.afterRemoveLoading()},afterRemoveLoading(){if(!this.__isShowTx&&!this.__vInfo.dynamicData)if(this.opt.isMpVideo){let e=1;(-1!==[72,73].indexOf(this.__reportData.videoerror)||window.cgiData.is_teenager||window.is_teenager||-1!==Object.values(Br).indexOf(this.__reportData.videoerror))&&(e=2),this.showError(this.__dynamicErrMsg,e)}else this.showError(this.__dynamicErrMsg||"",window.cgiData.is_teenager||window.is_teenager?2:void 0);const e=this.getVideoData();this.triggerEvent("videoReady",{formatId:e&&e.formatid})},showError(e,t){e=e||Dr.defaultErrorWording,this.setError({type:t||1,code:this.__reportData.videoerror,msg:e,refresh:e===Dr.defaultErrorWording?1:0})},hideError(){this.setError({type:0,code:0,msg:"",refresh:0})},checkPlayAuthority(e){this.opt.checkNoPaid?P({type:"GET",dataType:"json",timeout:3e4,url:"/mp/videoplayer?action=check_video_paid_status&__biz=".concat(this.opt.__biz,"&mid=").concat(this.opt.mid,"&idx=").concat(this.opt.idx),success:t=>{1==!t.can_play?window.weui.confirm("此视频来自于付费内容，在原文付费后才可播放",{buttons:[{type:"default",label:"取消"},{label:"前往原文",onClick:()=>{this.opt.openArticle()}}]}):"function"==typeof e.allowPlay&&e.allowPlay()}}):"function"==typeof e.allowPlay&&e.allowPlay()},onExpose(){this.__exposing=!0,this.triggerEvent("playerExpose")},onExposeLeave(){this.$refs.player,this.__exposing=!1,this.triggerEvent("playerExposeLeave")},onLoaded(){setTimeout((()=>{this.removeLoading()}),0),V.info("cps player controller: succ created player")},onTimeupdate(e){if(!this.__reportedTimeupdate){this.__reportedTimeupdate=!0;this.$refs.player.getLog().loadwait}if(!this.__reportedPv){this.__reportedPv=!0;const e=this.__monitorUid,t=this.__monitorUid2;this.triggerEvent("clearMonitor",e),this.triggerEvent("clearMonitor",t),this.opt.isMpVideo?(this.triggerEvent("setMonitor",t,{12:1,13:1}),this.triggerEvent("sendMonitor",t)):(this.triggerEvent("setMonitor",e,{0:1,1:1}),this.triggerEvent("sendMonitor",e))}this.__reportData.last_ms=parseInt(1e3*e.currentTime),this.__reportData.video_play_time=parseInt(1e3*e.currentTime),this.triggerEvent("timeupdate",e)},onBeginPlay(){const e=this.__reportData;e.client_time_when_play=Math.round(Date.now()/1e3),e.click_play_button=1,!this.$refs.player.autoplay&&this.recoverPlaybackRate(),this.triggerEvent("beginPlay")},onDurationchange(){this.$refs.player.autoplay&&this.recoverPlaybackRate()},onTouchVideo(){this.triggerEvent("touchVideo")},onOpenSourcePage(){this.triggerEvent("openSourcePage")},onFastForward(){this.triggerEvent("fastForward")},onReplay(){this.triggerEvent("replay")},onStatusChange(e){const t=this.__reportData;"loading"!==e.status||"seeked"!==e.subStatus&&"seeking"!==e.subStatus||this.initPlayRangeInfo({durationMs:t.duration_ms}),"pause"===e.status?this.computePlayTotalTimeForKyk(e):"play"===e.status||e.status,"loading"===e.status&&"waiting"===e.subStatus&&("play"===e.preStatus||"loading"===e.preStatus&&"seeked"===e.preSubStatus||"loading"===e.preStatus&&e.preSubStatus),this.triggerEvent("statusChange",e)},onAfterReplay(){this.triggerEvent("afterReplay")},onHandDragComplete(e){this.triggerEvent("handDragComplete",e)},onBarDragComplete(e){this.triggerEvent("barDragComplete",e)},onEnd(){const e=this.__vInfo,t=this.__reportData;e.dynamicData.data,this.getReportTypeBySceneType(),t.hasended=1,this.triggerEvent("beforeEnd",this.playerOpt.loop),this.playerOpt.loop?(this.__reportedPv=!1,this.__reportData.replay=1):this.triggerEvent("resetVideo"),this.triggerEvent("end",this.playerOpt.loop),this.initPlayRangeInfo({durationMs:t.duration_ms})},onError(e){const t=this.__reportData;this.__monitorUid;const i=this.__monitorUid2;switch(!e||!e.errorcode||e.errorcode>5||e.errorcode<=0?t.videoerror=46:t.videoerror=e.errorcode+40,this.__reportedPv||(this.__reportedPv=!0,this.triggerEvent("setMonitor",i,{12:1})),this.triggerEvent("setMonitor",i,{14:1}),1*e.errorcode){case 1:this.triggerEvent("setMonitor",i,{15:1});break;case 2:this.triggerEvent("setMonitor",i,{16:1});break;case 3:this.triggerEvent("setMonitor",i,{17:1});break;case 4:this.triggerEvent("setMonitor",i,{18:1});break;case 5:this.triggerEvent("setMonitor",i,{19:1});break;case 6:this.triggerEvent("setMonitor",i,{39:1});break;default:this.triggerEvent("setMonitor",i,{20:1})}this.triggerEvent("sendMonitor",i),t.v_err_code=e.errorcode,this.showError(),this.initPlayRangeInfo({durationMs:t.duration_ms})},onErrorRetry(){const e=this.__monitorUid2;this.triggerEvent("setMonitor",e,{64:1}),this.triggerEvent("sendMonitor",e)},onFirstBufferingTime(e){var t;if(this.__hasFirstPlayed||this.$refs.player.autoplay,this.opt.isMpVideo){this.$store.state.cgiData;const e=this.getVideoData();null==(t=e.ori_url_info)||t.some((e=>1*e.format_id%1e3>100)),e.formatid,e.formatid}this.__hasFirstPlayed||(this.__hasFirstPlayed=!0),this.triggerEvent("firstBufferingTime",e)},onPlayingBufferingTime(e){this.triggerEvent("playingBufferingTime",e)},onUserplay(e){this.triggerEvent("userplay",e),1===e.tapType||e.tapType},onUserpause(e){this.triggerEvent("userpause",{curTime:this.getCurrentTime(),...e});const t=this.__reportData;t.pause_num=(t.pause_num||0)+1,1===e.tapType||e.tapType},onWaiting(e){this.triggerEvent("waiting",e)},onPlay(e){this.__pauseTimestamp&&delete this.__pauseTimestamp,this.triggerEvent("play",e)},onPause(e){this.triggerEvent("pause",e),this.__pauseTimestamp=Date.now()},onMidPlayClick(){},onAfterCheckVideoFit(e){let t={97:1};!0===e.needToFit&&(t[98]=1,t[100]=1,e.os.ios&&(t[103]=1),e.os.android&&(t[106]=1),!0===e.supportObjectFit&&(t[101]=1,e.os.ios&&(t[104]=1),e.os.android&&(t[107]=1)));const i=this.__monitorUid;this.triggerEvent("setMonitor",i,t),this.triggerEvent("sendMonitor",i)},onBindError(e){this.triggerEvent("bindError",e)},onRateChange(e){this.triggerEvent("rateChange",e),"changed"===e.action&&this.cacheData()},onResolutionChange(e){"changed"===e.action&&(Dr.playerStatus.formatId=e.infoAfter&&e.infoAfter.formatId||null,Lr.set("playerStatus",JSON.stringify({playerStatus:Dr.playerStatus}),Date.now()+6048e5),G.invoke("handleMPPageAction",{action:"setLocalData",key:"formatId",data:String(Dr.playerStatus.formatId),url:location.href},(e=>{console.log("setLocalData"+JSON.stringify(e))})),V.info("player controller: set player status cache "+JSON.stringify(Dr.playerStatus))),this.triggerEvent("resolutionChange",e)},onBrightnessChange(e){this.triggerEvent("brightnessChange",e)},onVolumeChange(e){this.triggerEvent("volumeChange",e)},onLoadedMetaData(){if(this.getAndUpdateVideoInfo(),this.__canPlay=!0,this.__shouldPlayAfterCanplay){const e=this.getPlayer();e&&e.resumeOperating(),this.play(),this.triggerEvent("exposeAutoPlay"),this.__shouldPlayAfterCanplay=!1}this.triggerEvent("loadedmetadata")},onProfileJump(e){this.triggerEvent("profileJump",e)},onProcessStateChange(e){this.triggerEvent("processStateChange",e)},onCanplay(e){this.getAndUpdateVideoInfo(),this.triggerEvent("canplay",e)},onAfterFirstLoaded(e){this.triggerEvent("afterfirstloaded",e)},onShowControlBar(e){this.triggerEvent("showControlBar",e)},onHideControlBar(e){this.triggerEvent("hideControlBar",e)},triggerEvent(e,...t){const i=[].concat(this.$refs.innerPlugins||[],this.$refs.coverPlugins||[],this.$refs.controlPlugins||[],this.$refs.profilePlugins||[],this.__legacyPlugins),o=this.__blockPlugin[e]||this.__blockPlugin.all;let n,a,s=0;if(o&&"function"==typeof o.recv&&(n=o.recv(e,...t),"[object Object]"===Object.prototype.toString.call(n)?(s|=n.code,a=n.data):s|=n,1&s))return a;for(let d=0,c=i.length;d<c;++d){try{n=i[d].recv(e,...t)}catch(r){console.error("player controller plugin error:",r,e,t)}if("[object Object]"===Object.prototype.toString.call(n)?(s|=n.code,a=n.data):s|=n,2&s)break}if(!(this._blockInnerHandler||4&s)){const i=this[e+"InnerHandler"];i&&(n=i.apply(this,[e,...t]),"[object Object]"===Object.prototype.toString.call(n)&&(a=n.data))}return 8&s||this.emitEvent(e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),...t),a},emitEvent(e,...t){e&&this.$emit(e,...t)},getAndUpdateVideoInfo(){const e=this.getPlayer();if(e&&e.$refs.video){const t=Math.round(e.$refs.video.duration),i=e.$refs.video.videoWidth,o=e.$refs.video.videoHeight;t!==this.playerOpt.duration&&0!==t&&this.$set(this.playerOpt,"duration",t),i!==this.playerOpt.videoWidth&&0!==i&&this.$set(this.playerOpt,"videoWidth",i),o!==this.playerOpt.videoHeight&&0!==o&&this.$set(this.playerOpt,"videoHeight",o)}},setBlockPlugin(e,t){this.__blockPlugin[e]=t},getPlayer(){return this.$refs.player},supportWcSlPlayer(){return!!this.$refs.player&&this.$refs.player.supportWcSlPlayer()},getAdvanceCodecSupportBeforeCallback(e){this.checkH265Support(e)},checkH265Support(e){if(this.opt.useWcSlPlayer&&q.os.iphone)this.__supportH256=!0,"function"==typeof e&&e();else if(this.opt.useWcSlPlayer&&q.os.android)$.gtVersion("8.0.14",1)?G.invoke("handleVideoAction",{action:"supportCodec",codecId:172,height:1920,width:1080,frameRate:60},(t=>{const i=-1!==t.err_msg.indexOf(":ok");this.__supportH256=i,"function"==typeof e&&e()})):(this.__supportH256=!1,"function"==typeof e&&e());else{let t=!1;t=$.isIOS&&q.os.getNumVersion()>=11?!q.isLockdownMode():$.isAndroid?this.checkH5VideoCanPlayType('video/mp4; codecs="hvc1"'):this.checkH5VideoCanPlayType('video/mp4; codecs="hevc"'),this.__supportH256=t,"function"==typeof e&&e()}},checkH5VideoCanPlayType(e){const t=document.createElement("video");if("function"==typeof t.canPlayType){const i=t.canPlayType(e);if("maybe"==i.toLowerCase()||"probably"==i.toLowerCase())return!0}return!1},initPlayRangeInfo(e){if(e.durationMs<=0)return;const t=this.opt.totalRange;function i(e,t){const i=[{start:0,end:e,hasReport:!1}];for(;;){let o=i[i.length-1];if(o.end>=t)break;i.push({start:o.end,end:o.end+e,hasReport:!1})}return i}1e3*t>=e.durationMs?this.__playRangeInfo=i(1e3,e.durationMs):this.__playRangeInfo=i(Math.ceil(e.durationMs/t),e.durationMs)},getTraceId:()=>0,getOrderid:()=>0,getOriStatus(){return this.opt.oriStatus},getFromid(){return this.opt.fromid},resetVideoInnerHandler(){this.$refs.player.isWcSlPlayer?this.$refs.player.showCover():this.$refs.player.resetVideo()},coverNextShowStatusChangeInnerHandler(e){this.__coverNextShowing=e},pause(){this.$refs.player&&this.$refs.player.pause4outer()},play(){this.$refs.player&&this.$refs.player.play4outer()},getRealPlayTime(){let e=0,t=this.$refs.player;return t&&(e=Math.round(1e3*t.getPlayTotalTime())),e},getCurrentTime(){let e=0,t=this.$refs.player;return t&&(e=t.getCurTime()),e},getCurrentTimeMs(){return Math.round(1e3*this.getCurrentTime())},getVideoData(){return this.__vInfo&&this.__vInfo.dynamicData&&this.__vInfo.dynamicData.data?this.__vInfo.dynamicData.data:null},getReportData(){return this.__reportData},extendMpReportData(e){Object.assign(this.__reportData,e)},getMpReportData(){return this.__reportData},recoverPlaybackRate(){const e=this.__vInfo.status,t=e&&e.playbackRate||1;this.$refs.player.setPlaybackRate(t),this.$refs.player.isWcSlPlayer&&setTimeout((()=>{this.$refs.player&&this.$refs.player.setPlaybackRate(t)}),250)},setLoop(e){this.playerOpt&&(this.playerOpt.loop=e)},setMuted(e){this.playerOpt&&(this.playerOpt.muted=e)},setAutoplay(e){this.$refs.player&&(this.$refs.player.autoplay=e)},setVideoSize(e){this.playerOpt&&("number"==typeof e.width&&(this.playerOpt.width=e.width),"number"==typeof e.height&&(this.playerOpt.height=e.height))},getVideoDuration(){return this.playerOpt&&this.playerOpt.duration||0},getFloatCoverBase64(e){const t=new Image;t.crossOrigin="anonymous",t.onload=()=>{t.onload=null,t.onerror=null;try{const e=t.naturalWidth||t.width,i=t.naturalHeight||t.height,o=document.createElement("canvas"),n=o.getContext("2d"),a=640,s=1280;o.width=a,o.height=s,o.style.width=a+"px",o.style.height=s+"px";const r=function(e="cover",t,i,o,n){let a=1,s=0,r=0,d=o,c=n,l=0,p=0,m=t,_=i,u=t/i,h=o/n;"cover"===e?h>=u?(a=i/n,s=(o-t/a)/2,d=t/a,c=n):(a=t/o,r=(n-i/a)/2,d=o,c=i/a):"contain"===e&&(h>=u?(a=t/o,p=(i-n*a)/2,_=n*a):(a=i/n,l=(t-o*a)/2,m=o*a));return[s,r,d,c,l,p,m,_]}("contain",a,s,e,i);n.drawImage(t,...r),n.beginPath(),n.moveTo(a/2-50,s/2-60),n.lineTo(a/2-50,s/2+60),n.lineTo(a/2+50,s/2),n.fillStyle="rgba(255,255,255,0.8)",n.strokeStyle="rgba(255,255,255,0.8)",n.shadowBlur=100,n.shadowColor="rgba(0,0,0,0.5)",n.fill(),n.closePath(),n.stroke(),this.__floatCoverBase64=o.toDataURL("image/jpeg",0),this.__floatCoverBase64=this.__floatCoverBase64.replace("data:image/jpeg;base64,","")}catch(Pd){this.__floatCoverBase64="",console.error(Pd)}},t.onerror=()=>{this.__floatCoverBase64="",t.onload=null,t.onerror=null},t.src=e},showToast(e){this.__toastTimeoutId&&clearTimeout(this.__toastTimeoutId),this.toastTips=e,this.__toastTimeoutId=setTimeout((()=>{this.__toastTimeoutId=null,this.toastTips=""}),1e3)},computePlayTotalTimeForKyk(e){},getCurrentDefinition(){return Dr.playerStatus.formatId?Dr.definitionMap[Dr.playerStatus.formatId]:this.__vInfo.dynamicData?Dr.definitionMap[this.__vInfo.dynamicData.data.formatid]:0},onTouchMoveHorizontally(e){this.triggerEvent("touchMoveHorizontally",e)},onPlayerTouchEnd(e){this.triggerEvent("playerTouchEnd",e)},onSeekingStatusChange(e){this.triggerEvent("seekingStatusChange",e)},onSwipeBack(e){this.triggerEvent("swipeBack",e)},onMuteChange(e){Object.keys(Dr.allCpsPlayersOfPage).forEach((t=>{const i=Dr.allCpsPlayersOfPage[t],o=i&&i.$refs.player,n=o&&o.$refs.video;n&&(n.muted=e,o.$set(o.opt,"muted",e))})),this.triggerEvent("muteChange",e)},onClickPlaySwitch(e){this.triggerEvent("clickPlaySwitch",e)}}});function Wr(e){!Dr.networkType&&$.isWechat&&($.isIOS||$.isAndroid)?G.invoke("getNetworkType",{},(t=>{Dr.networkType=Dr.netTypeMap[t.err_msg]||"fail","network_type:edge"!=t.err_msg&&"network_type:wwan"!=t.err_msg||(t.detailtype||t.subtype)&&(Dr.networkType=t.detailtype||t.subtype),"function"==typeof e&&e()})):"function"==typeof e&&e()}function qr(e,t,i,o){let n=Lr.get(e+t+i+o);if(!n)return null;try{n=JSON.parse(n)||{}}catch(Pd){return function(e,t,i,o){Lr.remove(e+t+i+o)}(e,t,i,o),null}return n}function Ur(e){Lr.remove(e)}Wr(),function(){let e=Lr.get("playerStatus");if(e){try{e=JSON.parse(e)||{}}catch(Pd){return void Ur("playerStatus")}e.playerStatus&&(Dr.playerStatus=e.playerStatus,V.info("cps player controller: get player status cache "+JSON.stringify(Dr.playerStatus)))}}();const Hr=zr;Bt._getFormatTime,Bt._getAllPlayersOfPage;const Fr=ht(Hr,(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("intersect",{attrs:{threshold:[.5]},on:{enter:e.onExpose,leave:e.onExposeLeave}},[t("div",{staticClass:"mp-video-player",style:{height:e.fullscreenStatus?"100vh":"100%"}},[0===e.errType&&e.playerOpt?t("mp-video-player",{ref:"player",class:101===e.fullscreenStatus?"opr_fade_out":"",attrs:{opt:e.playerOpt,"can-load":e.canLoad,"wrap-style":e.wrapStyle,"video-style":e.videoStyle,"poster-style":e.posterStyle},on:{loaded:e.onLoaded,timeupdate:e.onTimeupdate,"begin-play":e.onBeginPlay,durationchange:e.onDurationchange,"status-change":e.onStatusChange,"after-replay":e.onAfterReplay,"hand-drag-complete":e.onHandDragComplete,"bar-drag-complete":e.onBarDragComplete,end:e.onEnd,error:e.onError,"error-retry":e.onErrorRetry,"first-buffering-time":e.onFirstBufferingTime,"playing-buffering-time":e.onPlayingBufferingTime,userplay:e.onUserplay,userpause:e.onUserpause,waiting:e.onWaiting,play:e.onPlay,pause:e.onPause,"mid-play-click":e.onMidPlayClick,"after-check-video-fit":e.onAfterCheckVideoFit,"bind-error":e.onBindError,"rate-change":e.onRateChange,"resolution-change":e.onResolutionChange,"brightness-change":e.onBrightnessChange,"volume-change":e.onVolumeChange,"profile-jump":e.onProfileJump,"process-state-change":e.onProcessStateChange,canplay:e.onCanplay,"show-control-bar":e.onShowControlBar,"hide-control-bar":e.onHideControlBar,replay:e.onReplay,"touch-video":e.onTouchVideo,"open-source-page":e.onOpenSourcePage,"fast-forward":e.onFastForward,loadedmetadata:e.onLoadedMetaData,"touch-move-horizontally":e.onTouchMoveHorizontally,"player-touch-end":e.onPlayerTouchEnd,"seeking-status-change":e.onSeekingStatusChange,"swipe-back":e.onSwipeBack,afterfirstloaded:e.onAfterFirstLoaded,"mute-change":e.onMuteChange,"click-play-switch":e.onClickPlaySwitch},scopedSlots:e._u([{key:"poster",fn:function({cover:i,coverStatus:o,videoSnapshot:n,withoutCover:a}){return[t("div",{directives:[{name:"show",rawName:"v-show",value:(i&&0!==o||n)&&!a,expression:"(cover && coverStatus !== 0 || videoSnapshot) && !withoutCover"}],staticClass:"poster_cover_wrp",style:e.posterStyle},[t("div",{staticClass:"poster_cover",style:"background-image: url(".concat(n||i.imgChange640(),"); background-size: contain; background-color: transparent;")}),t("div",{staticClass:"poster_cover_blur_wrp"},[t("div",{staticClass:"poster_cover_blur"}),t("div",{staticClass:"poster_cover",style:"background-image: url(".concat(n||i.imgChange640(),"); background-size: cover;")})])])]}},{key:"video_background",fn:function({cover:e}){return[t("div",{staticClass:"poster_cover_blur_wrp"},[t("div",{staticClass:"poster_cover_blur"}),t("div",{staticClass:"poster_cover",style:"background-image: url(".concat(e.imgChange640(),"); background-size: cover;")})])]}},{key:"inner",fn:function(){return e._l(e.innerPlugins,(function(e,i){return t(e,{key:i,ref:"innerPlugins",refInFor:!0,tag:"component"})}))},proxy:!0},{key:"cover",fn:function(){return e._l(e.coverPlugins,(function(e,i){return t(e,{key:i,ref:"coverPlugins",refInFor:!0,tag:"component"})}))},proxy:!0},{key:"control",fn:function(){return e._l(e.controlPlugins,(function(e,i){return t(e,{key:i,ref:"controlPlugins",refInFor:!0,tag:"component"})}))},proxy:!0},{key:"profile",fn:function(){return e._l(e.profilePlugins,(function(e,i){return t(e,{key:i,ref:"profilePlugins",refInFor:!0,tag:"component"})}))},proxy:!0}],null,!1,4255383019)}):1===e.errType?t("div",{staticClass:"wrp_pop_tips wx_video_error_box js_error_box"},[t("div",{staticClass:"wx_video_error_msg js_error_area"},[t("p",{attrs:{role:"heading"}},[e._v(e._s(e.errMsg))]),t("i",{staticClass:"wx_video_error_code"},[e._v("错误码："+e._s(e.errCode))]),0!==e.refreshBtnStatus?t("a",{staticClass:"wx_video_error_msg_btn js_video_errormsg_btn",attrs:{role:"button",href:"javascript:void(0);"},on:{click:e.reload}},[t("img",{staticClass:"wx_video_error_refresh",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAqCAMAAADhynmdAAAAQlBMVEUAAACcnJycnJycnJyoqKicnJycnJycnJycnJycnJyfn5+cnJydnZ2enp6kpKSdnZ2cnJyenp6cnJycnJycnJybm5t8KrXMAAAAFXRSTlMAyeb3CNp3tJRvHIEtJhBgqztWRJ+p5TqGAAABCklEQVQ4y5WTi27DIAxFAUMhgTzX8/+/urB2pdKI0x0pSoRuruyLbf7gF3PBaDE6X44LyY0D1SJQsfd9PpMM/CJx60v8SmV1HMSi1lKyA1n0jnwWSO08l04uJbxpBmTrpDtbGB6fmxC6Tc4BHv9aZDJdJsHW9w43Jez9x8T5M4l31WZsJn2bsYY+nUum2lQkGIVANPZ4FCLWOJImSTgjZE2SkU9crmu57mj9JBc93Qzj9R1d3HSG5bN5MRsnUzcGKK8Ns02z+Da7rYQE4bUE2PG1C6kVnkCyf0pwX8/jwbyxCLhcHpKTFkvkwK3pRmXtRrVFoTGYLvN+t0EUl0qrRaF1pFBz0anp/ptvNB4SY1XDAVMAAAAASUVORK5CYII=",alt:""}}),e._v(" 刷新 ")]):e._e()]),t("img",{staticClass:"wx_video_error_loading js_video_errormsg_loading",staticStyle:{display:"none"},attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAA5CAMAAAC7xnO3AAAAY1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+aRQ2gAAAAIXRSTlMAOx20pMJbzBQNTDGTh2ohLCZmeUF2hEmXCFdxUquef4yHE17nAAACnklEQVRIx9WW2xqiIBSFRc1AUATJU1a+/1MOm0NYKvnNXM260ZLftRcbqCQinOLI0yiY/iXKuUZPjx5Fk+6RhF1yHiVF0wC6IZfr9fqIkpRqdNyQ9AoiUU8g+YZ8Xn96YmNKvkhkLMskKgEo/yJzaxkXeZsGsjeWKEIFU/FBZgA+D5yEwGtTgR0J18lYUvdcLZ1YkUjLf+a0saYYSG/J3Hury+WSkTCjCETtF6Mvd8QGJMZSWIfsAlKhWGRl5zQ1ZNBDgy/zzvvFavWUK7SyTRs+rsiUZS/4LHIHyo8VgBx7vDkKx2WhPS7dD1Q6cNlu2dTa0gMys4bz/vJR6ph8ADgcVcSVUkfnhzJTc6gRj8fbCOHk30UI2KC+V4gKjskJQqC5frFHli0kafogFIfFkAXVCSqdAFVR8pmtVCWiXCtaarbWpGtQAYx7sjf2GCbfjFRQpH7lTLucveSMBE7+Z6VqViT2/PVs0d7hPk9TUcTaUuVaT8k/f/v6SXOgyG7InZaSvM8vj/309LrbvpSAORDH2/kWGyHhm/u5AYUc8qdFBRRrsV749bRv6I5x1OY50GZUUxQz9aGplAXZcOQ1DL3vwsTyvHQ2YWgjZV2rDTmxYRjUuoBvcQDr7QRLBiiNzJ4BawG3FLtTmEMGBigTRyC2oIKht1vbwLWrKmXKBZal+yApDGhm4q5JCVdNdrZeQBe8B44WnE2NGmxrR1bCvMugHdkhSwMWI9wjIGeosnPlJmNrst6PQrpeFkBSyAmkdD016DYqAVC6HHcNtnCPgazcuytAd5IqB/qYtq4bkP7vnEaL3W4KH9/HhKBAKl8XFUlMIWYIek4hZgh6UtjHBLVA4pPkCKRf9jOQ5Kwp1UvPDyb3qkPJaRG8Ln7f8Q8Bki/Kj5IYnQAAAABJRU5ErkJggg=="}})]):2===e.errType?t("div",{staticClass:"wrp_pop_tips wx_video_msg_primary js_error_box",style:{height:e.fullscreenStatus?"100%":"calc(100% - 12px)"}},[t("div",{staticClass:"wx_video_msg_primary_inner"},[t("p",{staticClass:"wx_video_msg_primary_text"},[e._v(e._s(e.errMsg))])])]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toastTips,expression:"toastTips"}]},[t("div",{staticClass:"weui-mask_transparent"}),t("div",{staticClass:"weui-toast",style:{top:0===e.orientationStatus?"45%":"50%",position:"absolute"}},[t("i",{staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t("p",{staticClass:"weui-toast__content"},[e._v(e._s(e.toastTips))])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showScreenshotMask,expression:"showScreenshotMask"}],staticClass:"fullscreen-screenshot__layer",staticStyle:{"background-color":"#000"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.screenshot,expression:"screenshot"}],staticClass:"fullscreen-screenshot__layer",style:"z-index: -1; background-image: url("+e.screenshot+")"})],1)])}),[],!1,null,"5a6638fc",null,null).exports;window.Vue.use(Ce);const Vr=()=>{const e=new Ce.Store({modules:{[Ee.name]:Ee},state:Re(),mutations:Pe()});return e.commit(Be.SET_CGI_DATA,Le(window.cgiData)),e.commit(Be.SET_URL_PARAMS,Ne()),[Oe].forEach((t=>e.registerModule([Ee.name,t.name],t))),e};const Jr=()=>{let e=0;const t=q.os.version;let i="unknown";return q.os.ios&&(e=1,i="IOS ".concat(t)),q.os.android&&(e=2,i="Android ".concat(t)),{os:e,os_ver:i}},$r=e=>{let t="";try{e||(fe.report312728(2),fe.report309906(82),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("cpsProductData",JSON.stringify(e),{mid:"mmbizwap:cps_product_data",view:"wap_business"}));const i=JSON.parse(e).kvs;for(const e of i)"js_version"===e.key&&(t=e.value)}catch(jd){fe.report312728(3)}return t||(fe.report312728(1),t="v112"),t};async function Gr(){try{const e=await function(){const e=B.getQuery("environment"),t="/mp/cps_product_info?action=GetCpsVersion&kol_uin_c=".concat(window.biz).concat(e?"&environment=1":"");return new Promise(((e,i)=>{P({url:t,dataType:"json",async:!0,success(t){e(t)},error(e){i(e)}})}))}();if(e.cps_version){let t;const i=$r(e.cps_version),o=B.getQuery("environment");return t=B.getQuery("forcecpsversion")||i,o&&(t="test/".concat(t)),t}}catch(jd){console.error("getCpsFinalVersion error",jd)}}async function Kr({traceId:e,appId:t,openid:i}){var o,n,a,s,r,d;try{const c=await function({appId:e,traceId:t,openid:i}){const o={uin:0,kol_uin:window.biz,cps_detail:JSON.stringify({user_info:{media_specified_id:i},device_info:Jr(),kol_uin:window.biz,req_infos:[{select_trace_id:t||Date.now().toString(),sku_id:"498_".concat(e),game_info:{app_id:e}}],extinfo:JSON.stringify({article:{mid:window.mid,idx:window.idx,mode:303}})})};return new Promise(((e,t)=>{P({url:"/mp/cps_product_info?action=Detail",type:"POST",dataType:"json",async:!0,data:o,success(t){e(t)},error(e){t(e)}})}))}({traceId:e,appId:t,openid:i}),l=JSON.parse(null==c?void 0:c.detailrsp);if(0===(null==l?void 0:l.ret)){const e=await(d=null==(s=null==(a=null==(n=null==(o=null==l?void 0:l.detail_info)?void 0:o[0])?void 0:n.game_info)?void 0:a.video_info)?void 0:s.video_uid,new Promise(((e,t)=>{P({url:"/mp/cps_product_info?action=minigame_vid&vid=".concat(d),type:"GET",dataType:"json",success(t){e(t)},error(e){t(e)}})})));0===(null==(r=null==e?void 0:e.base_resp)?void 0:r.ret)&&(l.video_url=null==e?void 0:e.video_url)}return l}catch(jd){console.error("getAllMiniGameData error: ",jd)}}async function Qr({srcAppid:e,dramaId:t,planId:i,playAppid:o,traceId:n,mode:a,openid:s}){return new Promise(((r,d)=>{P({type:"POST",url:"/mp/mini_drama_info?action=link",data:{kol_uin:window.biz,uin:0,cps_detail:JSON.stringify({device_info:Jr(),extinfo:JSON.stringify({article:{mid:window.mid,idx:window.idx,mode:a}}),kol_uin:window.biz,req_infos:[{app_id:o,drama_info:{drama_id:t,src_appid:e},plan_id:i,promoter_id:window.biz,select_trace_id:n||Date.now().toString()}],user_info:{media_specified_id:s}})},success(e){var t;0===(null==(t=null==(e=JSON.parse(e))?void 0:e.base_resp)?void 0:t.ret)?r(e.data):(d("fail get mini_drama_info"),fe.report312728(13))},error(e){fe.report312728(14),d(e)}})}))}async function Yr({playAppid:e,srcAppid:t,mediaNo:i,dramaId:o}){return new Promise(((n,a)=>{P({type:"POST",url:"/mp/mini_drama_info?action=play_info",data:{appid:e,src_appid:t,media_no:i,drama_id:o},success(e){n(e)},error(e){a(e)}})}))}function Xr({dramaInfo:e,cover:t,playUrl:i,width:o,height:n,duration:a,cpsReportId:s,wrpWidth:r,wrpHeight:d,canFullscreen:c,customFullscreenAction:l,alwaysShowControl:p,cpsCardType:m=1,hideDuration:_=!1}){const u=document.createElement("div");u.setAttribute("class","video_cps_wrp"),u.setAttribute("style","width: ".concat(r,"px;height: ").concat(d,"px;")),u.setAttribute("slot","cps-video-component");const h=document.createElement("div");h.id="js_cps_video",u.appendChild(h);const w=function(e){const t=(e.el instanceof Element?e.el:document.querySelector(e.el)).parentNode;return new Fr({el:e.el,opt:{cover:e.cover,playUrl:e.playUrl,plugins:e.plugins||[],width:+e.wrpWidth||t.offsetWidth,height:+e.wrpHeight||t.offsetHeight,videoWidth:e.width||0,videoHeight:e.height||0,duration:e.duration||0,muted:e.muted||!1,extInfo:e.extInfo,autoplayWhenExpose:e.autoplayWhenExpose,canFullscreen:e.canFullscreen||!1,customFullscreenAction:e.customFullscreenAction,alwaysShowControl:e.alwaysShowControl,hideDuration:e.hideDuration||!1,cgiData:window.cgiData,preview:!(1*window.is_temp_url!=1),__biz:window.cgiData.biz,uin:window.cgiData.uin||window.user_uin,mid:window.cgiData.mid,idx:window.cgiData.idx,loop:!0,scene_type:6,autoplay:!1,flowNotice:!1,useFeFullscreen:!0},store:Vr()})}({el:h,width:o,height:n,wrpWidth:r,wrpHeight:d,duration:a,cover:t,playUrl:i,plugins:[Ot],muted:!0,autoplayWhenExpose:!0,extInfo:{dramaInfo:e},canFullscreen:c,customFullscreenAction:l,alwaysShowControl:p,hideDuration:_}),g=e=>({BizUin:window.biz,MsgId:+window.mid,Idx:+window.idx,PlayletCpsIdStr:s,SessionId:window.sessionid,EnterId:+window.enterid,EventTime:parseInt(1e3*w.getCurrentTime(),10),PlayTime:w.getRealPlayTime(),Duration:parseInt(1e3*w.getVideoDuration(),10),PageUrl:window.location.href,IsFans:window.isFans+1,CpsCardType:m,...e}),f=e=>{const t=g(e);console.log("cps video report 32253",e.EventType,t),D.report(32253,t)};return w.$on("player-expose",(()=>{w.__hasReportExpose||(f({EventType:1}),w.__hasReportExpose=!0)})),w.$on("click-play-switch",(e=>{f({EventType:e?3:2}),e&&f({EventType:10})})),w.$on("end",(()=>f({EventType:4}))),w.$on("replay",(()=>f({EventType:5}))),w.$on("seeking-status-change",(e=>!e&&f({EventType:6}))),w.$on("mute-change",(e=>f({EventType:e?8:7}))),w.$on("expose-auto-play",(()=>f({EventType:9}))),w.$on("cover-next-show-status-change",(e=>e&&f({EventType:13}))),w.$on("cover-next-click",(e=>e&&f({EventType:14}))),D.leaveReport(32253,(()=>g({EventType:16}))),{videoPlayer:w,dom:u,report32253:f}}const Zr=(e,t)=>{const i=document.createElement(t);Array.from(e.attributes).forEach((e=>i.setAttribute(e.name,e.value)));const{parentNode:o}=e;return o&&o.replaceChild(i,e),i};function ed(e,t,i=(()=>{})){if(e&&!kt({clickType:"mp-common-cpsad"})){if(!$.isOnlyWechat)return fe.report312728(19),void alert("请在微信内打开小程序");t.sceneNote?t.sceneNote+=":".concat(window.source_appid):t.sceneNote=window.source_appid,t.sourceAppId=window.source_appid,G.invoke("openWeApp",t,i),sd(At.CLICK_AD_ACTION,"",e.shadowRoot.querySelector("iframe"))}}function td(e,t){var i;const o=null==(i=e.shadowRoot)?void 0:i.querySelector(".cps_video_footer"),n=new IntersectionObserver(((e,i)=>{e.forEach((e=>{e.isIntersecting&&(t&&t(),i.unobserve(e.target))}))}));o&&n.observe(o)}const id={LIST:"list",CARD:"card",MP_VIDEO_PLAY:"video-play"};function od(e,t){return"".concat(e," | ").concat(t)}function nd(e,t,i){sd(At.PROXY_CALLBACK_ACTION,{aid:e.aid,proxyId:e.proxyId,proxyData:t},i)}function ad(e,t,i){if(-1===[At.CPS_AD_FRAME_DOMAIN].indexOf(e.origin))return;const{iframeEle:o,aid:n}=function(e,t){let i,o;for(const n in t)if(Object.hasOwnProperty.call(t,n)&&(i=t[n].shadowRoot.querySelector("iframe"),i&&i.contentWindow===e)){o=Number(n);break}return{aid:o,iframeEle:i}}(e.source,i);if(!o)return;const{action:a}=t,s=t.value||{};switch(a){case At.FRAME_READY:!function(e,t,i){const o=e[i],n=function(e){const{dataset:t}=e,i=t.adtype,o={};if(i===At.CPS_GOODS_TYPE.SHORT_PLAY){const{dramaid:n,srcappid:a,templateid:s,playappid:r,planid:d,defaultpath:c,traceid:l}=t,p=c?decodeURIComponent(c):"";s===id.MP_VIDEO_PLAY&&(o.respInfo=e.shortPlayDataResp),Object.assign(o,{adType:i,dramaId:n,srcAppid:a,templateId:s,playAppid:r,planId:d,defaultPath:p,selectTraceId:l})}else if(i===At.CPS_GOODS_TYPE.MINI_GAME){const{appid:n,traceid:a,templateid:s,imgurl:r}=t;s===id.MP_VIDEO_PLAY&&(o.respInfo=e.miniGameDataResp),Object.assign(o,{adType:i,appId:n,selectTraceId:a,templateId:s,selectedImg:r?decodeURIComponent(r):""})}else{const{pid:e,traceid:i,extinfo:n,templateid:a}=t;Object.assign(o,{traceId:i,goodsId:e,extInfo:n,templateId:a||"list"})}return o}(o);Object.assign(n,{aid:i,cpsVersion:o.getAttribute("data-cpsversion"),type:At.CPS_GOODS_TYPE.NEW_GOODS}),sd(At.SET_PAGE_DATA_ACTION_NAME,{biz:window.biz,uin:window.uin,scene:window.scene,source:window.source,idx:window.idx,mid:window.mid,isSg:window.isSg,userUin:window.user_uin,sn:window.sn,appmsgid:window.appmsgid,sendTime:window.send_time||"",passTicket:decodeURIComponent(window.pass_ticket),itemShowType:window.item_show_type,bodyScrollTop:j.getScrollTop(),screenHeight:j.getInnerHeight(),adOffsetTop:ce.getOffset(t).offsetTop,createIframeTime:Date.now(),pageUrl:location.href,heightWidthRate:9/16,boundingClientRect:t.getBoundingClientRect(),type:At.CPS_GOODS_TYPE.NEW_GOODS,skin:B.getQuery("color_scheme"),wx_traceid:B.getQuery("wx_traceid"),openid:window.open_id||""},t),sd(At.SET_AD_DATA_ACTION_NAME,{goodsInfo:n,type:At.CPS_GOODS_TYPE.NEW_GOODS,hideAdMark:window.hideAdMarkOnCps},t)}(i,o,n);break;case At.PROXY_ACTION:!function(e,t,i){var o,n;if("jsapi"===e.proxyType)return void function(e,t){const i=e.proxyData||{},o=function(e){const t=e.proxyData||{},{methodName:i}=t;if(-1===At.AD_JSAPI_WHITE_LIST.indexOf(i))return od(At.INVALID_METHOD_NAME_MSG_PREFIX,i);return!0}(e);if("string"==typeof o)return void nd(e,{err_msg:o},t);const n=o=>{nd(e,o,t),"openUrlWithExtraWebview"===i.methodName&&-1===o.err_msg.indexOf("ok")&&(location.href=i.args.url)};try{if("on"===i.methodType)G[i.methodType](i.methodName,n);else{if("openWeApp"===i.methodName||"openEmbeddedWeApp"===i.methodName){let{sceneNote:e}=i.args;if(e?e+=":".concat(window.source_appid):e=window.source_appid,i.args.sceneNote=e,i.args.sourceAppId=window.source_appid,kt({clickType:"mp-common-cpsad"}))return}"openEmbeddedWeApp"===i.methodName&&($.isIOS&&$.gtVersion("8.0.42",!0)||$.isAndroid&&$.gtVersion("8.0.42",!0))?G[i.methodType]("openEmbeddedWeApp",Object.assign({modalHeightRatio:.8,allowFullScreen:!0,blurMask:!1},i.args),(e=>{e&&e.err_msg&&-1!==e.err_msg.indexOf(":ok")?n(e):G[i.methodType]("openWeApp",i.args,n)})):("openEmbeddedWeApp"===i.methodName&&(i.methodName="openWeApp"),G[i.methodType](i.methodName,i.args,n))}}catch(a){console.error(a),nd(e,{err_msg:od(At.INVALID_METHOD_TYPE_MSG_PREFIX,i.methodType)},t)}"adDataReport"===i.methodName&&1===i.args.need_record_page_operation&&fe.report115849(41)}(e,t);const a=e.proxyData||{};if("bizapi"===e.proxyType){if("request"===a.methodName)return void function(e,t){const i=e.proxyData||{},o=i.args||{};if(-1===At.AD_REQ_PATH_WHITE_LIST.indexOf(o.path))return void nd(e,{err_msg:od(At.INVALID_REQ_PATH_MSG_PREFIX,o.path)},t);P({type:o.requestType,url:"".concat(o.path,"?").concat(o.requestQuery||""),data:o.requestBody||{},mayAbort:!0,success:i=>{nd(e,{err_msg:"request:success",response:i},t)},error:(i,o)=>{nd(e,{err_msg:"request:error",xhr:i,err_info:o},t)}})}(e,t);if("addIdKeyReport"===a.methodName)return void R.setSum(a.args.id,a.args.key,a.args.val);if("addBadJsReport"===a.methodName)null==(n=null==(o=window.WX_BJ_REPORT)?void 0:o.BadJs)||n.report("AdFrameError:".concat(a.args.id),a.args.msg)}}(s,o,i[n]);break;case At.CHANGE_FRAME_STYLE:!function(e,t,i){!1===e.display&&(i.style.display="none");if(e.height){const o=e.height.slice&&"px"===e.height.slice(-2)||"number"==typeof e.height?"".concat(Math.ceil(parseFloat(e.height,10)),"px"):e.height;t.style.height=o,function(e){const t=e.getAttribute("data-planid"),i=e.getAttribute("data-pid"),o=e.getAttribute("data-traceid"),n={compEle:e,compType:"mp-common-cpsad",compIdx:Array.from(document.querySelectorAll("mp-common-cpsad")).indexOf(e)};Ct.renderCompSilentlyPreHandler(n),xi(e,t||i||o||""),Ct.renderCompSilently(n)}(i)}if(e.width){const i=e.width.slice&&"px"===e.width.slice(-2)||"number"==typeof e.width?"".concat(Math.ceil(parseFloat(e.width,10)),"px"):e.width;t.style.width=i}}(s,o,i[n]);break;case At.PROXY_CONSOLE:!function(e){const{method:t,data:i}=e;if("function"==typeof console[t]){const e=[].concat(i);console[t](...e)}}(s)}}function sd(e,t,i){const o=i.contentWindow;o&&fe.postMessage(o,e,t,At.CPS_AD_FRAME_DOMAIN)}const rd={tagName:"mp-common-cpsad",oldTagName:"mpcps",cpsVersion:"",iframeMap:{}},dd=document.getElementById("js_article"),cd=document.getElementById("content_bottom_interaction"),ld=!!window.is_login;function pd(){const e=document.querySelectorAll("".concat(rd.oldTagName,",").concat(rd.tagName));0!==e.length&&Gr().then((t=>{t&&(e.forEach((e=>{e.tagName.toLowerCase()===rd.oldTagName&&(e=Zr(e,rd.tagName));const i=Math.ceil(1e4*Math.random());rd.iframeMap[i]=e;const{templateid:o,adtype:n}=e.dataset;o===id.MP_VIDEO_PLAY?n===At.CPS_GOODS_TYPE.SHORT_PLAY?function(e,t){const{dramaid:i,srcappid:o,planid:n,parentwidth:a,playappid:s,mediano:r,defaultpath:d,traceid:c=""}=e.dataset;(async function({srcAppid:e,dramaId:t,playAppid:i,mediaNo:o,planId:n,traceId:a,openid:s}){try{let r,d=203;if(o){const[c,l]=await Promise.all([Yr({srcAppid:e,dramaId:t,playAppid:i,mediaNo:o}),Qr({dramaId:t,srcAppid:e,playAppid:i,planId:n,traceId:a,mode:d,openid:s})]);r={shortPlayDataResp:JSON.parse(l),videoResp:JSON.parse(c)},fe.report312728(16)}else{d=205;const o=await Qr({dramaId:t,srcAppid:e,playAppid:i,planId:n,traceId:a,mode:d,openid:s});r={shortPlayDataResp:JSON.parse(o)},fe.report312728(17)}return r}catch(jd){console.error("getAllShortPlayData error: ",jd)}})({dramaId:i,srcAppid:o,playAppid:s,mediaNo:r,planId:n,traceId:c,openid:window.open_id||""}).then((i=>{var o;const{shortPlayDataResp:c,videoResp:l}=i;let p,m;0===(null==c?void 0:c.ret)?(p=function(e){var t,i,o;const n=(null==(t=e.detail_info[0])?void 0:t.drama_info)||{},{cover_url:a,drama_name:s,media_count:r,theme:d,ext:{hot_degree:c},status:l}=n,p=(null==(i=e.detail_info[0])?void 0:i.wx_miniprogram_link)||"",m=(null==(o=e.detail_info[0])?void 0:o.wx_miniprogram_app_username)||"",_={dramaCoverUrl:a,dramaName:s,dramaNum:r,categoryName:d.replace(/、/g,"/"),hotView:c,status:l,path:p,userName:m};return p||fe.report312728(14),_}(c),e.shortPlayDataResp=c,m=r&&0===(null==(o=null==l?void 0:l.base_resp)?void 0:o.ret)?function(e){const{coverurl:t,duration:i,jump_appid:o,video_url:n,height:a,width:s}=e;return{videoCoverUrl:t,duration:i,jumpAppid:o,videoPlayUrl:n,videoWidth:s,videoHeight:a}}(l):{videoCoverUrl:e.getAttribute("data-materialcoverurl"),videoPlayUrl:e.getAttribute("data-materialurl")}):fe.report312728(18),p.path||fe.report312728(20);const _={relativeURL:decodeURIComponent(p.path||d),appId:s,scene:1091,userName:p.userName},u=e=>{var t,i,o;-1===(null==(t=null==e?void 0:e.err_msg)?void 0:t.indexOf("ok"))?(R.setSum(309906,41,1),null==(o=null==(i=window.WX_BJ_REPORT)?void 0:i.BadJs)||o.report("AdFrameError:PROXY_ID_JUMP_SHORT_PLAY","errMsg:".concat(JSON.stringify(e.err_msg)))):R.setSum(309906,42,1)},h={drama_name:p.dramaName,total_num:p.dramaNum,cover_url:p.dramaCoverUrl,drama_class:p.categoryName,hot_view:p.hotView,appid:s,jump_path:p.path||decodeURIComponent(d),ban:2===p.status};if(2===p.status)return void e.setAttribute("data-banvideo",1);const{dom:w,report32253:g,videoPlayer:f}=Xr({cpsReportId:n,dramaInfo:h,cover:m.videoCoverUrl,playUrl:m.videoPlayUrl,duration:m.duration||0,width:m.videoWidth||0,height:m.videoHeight||0,wrpWidth:a,wrpHeight:a,canFullscreen:!0,alwaysShowControl:!1,hideDuration:!0,customFullscreenAction:()=>{ed(e,_,u),g({EventType:15})}});f&&f.$on("cover-next-click",(()=>{sd(At.CLICK_AD_ACTION,"",e.shadowRoot.querySelector("iframe"))})),e.setAttribute("data-videocarddata",JSON.stringify({videoCoverUrl:p.dramaCoverUrl,name:p.dramaName,categoryInfo:"".concat(p.dramaNum,"集"),categoryName:p.categoryName})),e.addEventListener("click",(t=>{(t.composedPath()||[]).some((e=>{var t;return null==(t=e.classList)?void 0:t.contains("cps_video_footer")}))&&(ed(e,_,u),g({EventType:12}))})),td(e,(()=>{g({EventType:11})})),e.appendChild(w),e.setAttribute("data-cpsversion",t),e.setAttribute("data-ready",1)})).catch((e=>{console.error("getShortPlayData err: ",e)}))}(e,t):n===At.CPS_GOODS_TYPE.MINI_GAME&&function(e,t){const{appid:i,traceid:o,parentwidth:n,videorate:a}=e.dataset;Kr({traceId:o,appId:i,openid:window.open_id||""}).then((s=>{var r,d,c,l,p,m,_,u,h,w,g,f,y,v;e.miniGameDataResp=s;const b=null==(r=null==s?void 0:s.detail_info)?void 0:r[0],x={relativeURL:(null==b?void 0:b.wx_miniprogram_link)||"",appId:i,scene:1311,userName:(null==b?void 0:b.wx_miniprogram_app_username)||"",sceneNote:"".concat(window.biz,":").concat(window.mid,":").concat(window.idx)},k={drama_name:null==(d=null==b?void 0:b.game_info)?void 0:d.name,cover_url:null==(c=null==b?void 0:b.game_info)?void 0:c.logo,drama_class:(null==(l=null==b?void 0:b.game_info)?void 0:l.brief_intro)||(null==(p=null==b?void 0:b.game_info)?void 0:p.description),appid:null==(m=null==b?void 0:b.game_info)?void 0:m.app_id,jump_path:x.relativeURL,banStatue:0,cover_style:{width:"48px",height:"48px",margin:"16px 0 16px 16px"},cover_next_info_style:{borderRadius:"8px"},ban:2===(null==(_=null==b?void 0:b.game_info)?void 0:_.status)};if(2===(null==(u=null==b?void 0:b.game_info)?void 0:u.status))return void e.setAttribute("data-banvideo",1);const I=function(e){return Math.max(1,Math.min(16/9,e))}(a)||16/9,{dom:S,videoPlayer:A,report32253:T}=Xr({cpsReportId:o,dramaInfo:k,cover:null==(w=null==(h=null==b?void 0:b.game_info)?void 0:h.video_info)?void 0:w.cover_img_url,playUrl:null==s?void 0:s.video_url,duration:0,width:0,height:0,wrpWidth:n,wrpHeight:I>1?n/I:n,canFullscreen:!0,cpsCardType:2,hideDuration:!0,customFullscreenAction:()=>{ed(e,x),T({EventType:15})}});A&&A.$on("cover-next-click",(()=>{sd(At.CLICK_AD_ACTION,"",e.shadowRoot.querySelector("iframe"))})),e.setAttribute("data-videocarddata",JSON.stringify({videoCoverUrl:null==(f=null==(g=null==b?void 0:b.game_info)?void 0:g.video_info)?void 0:f.cover_img_url,name:null==(y=null==b?void 0:b.game_info)?void 0:y.name,categoryInfo:null==(v=null==b?void 0:b.game_info)?void 0:v.category_3_name,categoryName:"小游戏"})),e.addEventListener("click",(t=>{(t.composedPath()||[]).some((e=>{var t;return null==(t=e.classList)?void 0:t.contains("cps_video_footer")}))&&(ed(e,x),T({EventType:12}))})),td(e,(()=>{T({EventType:11})})),e.appendChild(S),e.setAttribute("data-cpsversion",t),e.setAttribute("data-ready",1)})).catch((e=>{console.error("getAllMiniGameData err: ",e)}))}(e,t):(e.setAttribute("data-cpsversion",t),e.setAttribute("data-ready",1))})),function(e,t,i,...o){const n=e=>{let n;if(!t||e.origin===t){if("object"!=typeof e.data)try{n=JSON.parse(e.data)}catch(a){return}else n=e.data;"function"==typeof i&&i(e,n,...o)}};e.addEventListener("message",n)}(window,At.CPS_AD_FRAME_DOMAIN,ad,rd.iframeMap))})).catch((e=>{console.error("initArticleCps error:",e)}))}function md(){window.addEventListener&&window.addEventListener("load",(function(){window.__moonsafe_mutation_report_keys||(window.__moonsafe_mutation_report_keys={});const e=window.moon&&window.moon.moonsafe_id||29715,t=window.moon&&window.moon.moonsafe_key||0;let i=[],o={};const n=function(e,t,n){n=n||1,o[e]||(o[e]=0),o[e]+=n,t&&(!function(e){return"[object Array]"==Object.prototype.toString.call(e)}(t)?i.push(t):i=i.concat(t)),setTimeout((function(){a()}),1500)},a=function(){const n=[],s=i.length,r=["r="+Math.random()];for(const i in o)o.hasOwnProperty(i)&&n.push(e+"_"+(1*i+1*t)+"_"+o[i]);for(let e=0;e<s&&!(e>=10);++e)r.push("log"+e+"="+encodeURIComponent(i[e]));if(0==n.length&&r.length<=1)return;const d="idkey="+n.join(";")+"&lc="+(r.length-1)+"&"+r.join("&");let c;if(window.ActiveXObject)try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(Pd){try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(l){c=!1}}else window.XMLHttpRequest&&(c=new XMLHttpRequest);c&&(c.open("POST",location.protocol+"//mp.weixin.qq.com/mp/jsmonitor?",!0),c.setRequestHeader("cache-control","no-cache"),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.onreadystatechange=function(){4===c.readyState&&(i.length>10?(i=i.slice(10),a()):(i=[],o={}))},i=[],o={},c.send(d))};try{if(!window.__observer)return;const e=window.__observer_data;if(window.__observer.takeRecords){const t=window.__observer.takeRecords();if(t&&t.length){e.count++;const i=new Date;t.forEach((function(t){const i=t.addedNodes;for(let o=0;o<i.length;o++){const t=i[o];if("SCRIPT"===t.tagName){const i=t.src;!i||/qq\.com/.test(i)||/weishi\.com/.test(i)||e.list.push(i)}}})),e.exec_time+=new Date-i}}window.__observer.disconnect();const t=window.__moonsafe_mutation_report_keys.observer||2,i=window.__moonsafe_mutation_report_keys.script_src||8,o=window.__moonsafe_mutation_report_keys.setattribute||9,a=window.__moonsafe_mutation_report_keys.ajax||10,s=25;for(let d=0;d<e.list.length;d++){const i=e.list[d],o=["[moonsafe][observer][url]:"+location.href,"[moonsafe][observer][src]:"+i,"[moonsafe][observer][ua]:"+navigator.userAgent];e.list.length==d+1&&(o.push("[moonsafe][observer][count]:"+e.count),o.push("[moonsafe][observer][exec_time]:"+e.exec_time+"ms")),n(t,o),"inlinescript_without_nonce"==i&&n(s,o)}const r=window.__danger_src;if(r){const e=[{key:"xmlhttprequest",idkey:a},{key:"script_src",idkey:i},{key:"script_setAttribute",idkey:o}];for(let t=0;t<e.length;t++){const i=e[t].key,o=r[i];if(o&&o.length)for(let a=0;a<o.length;a++){const s=["[moonsafe]["+i+"][url]:"+location.href,"[moonsafe]["+i+"][src]:"+o[a],"[moonsafe]["+i+"][ua]:"+navigator.userAgent];n(e[t].idkey,s)}}}}catch(Pd){n(3,["[moonsafe][observer][exception]:"+Pd])}}),!1)}if(dd&&dd.addEventListener("click",(()=>{for(const e in rd.iframeMap)sd(At.CLICK_OUTSIDE_ACTION,"",rd.iframeMap[e])})),j.bindDebounceScrollEvent((()=>{const e=j.getScrollTop();let t=j.getInnerHeight();if(ld&&cd){const e=Math.floor(null==cd?void 0:cd.getBoundingClientRect().height)||0;t=j.getInnerHeight()-e}for(const i in rd.iframeMap){const o=rd.iframeMap[i].shadowRoot.querySelector("iframe");if(!o)continue;const n=ce.getOffset(o).offsetTop;sd(At.PAGE_SCROLL_ACTION,{bodyScrollTop:e,adOffsetTop:n,screenHeight:t,boundingClientRect:o.getBoundingClientRect()},o)}})),window.localStorage&&window.localStorage.getItem){const e=4500,t="loadSec-"+window.biz+"-"+window.mid+"-"+window.idx;let i=window.localStorage.getItem(t);i&&window.write_sceen_time-parseInt(i,10)>e&&(D.report(20801,{Bizuin:window.biz,MsgId:1*window.mid,ItemIdx:1*window.idx,Url:window.msg_source_url||"",Title:window.msg_title||""}),window.localStorage.removeItem(t))}const _d=function(){let e=window.location.href.split("?")[1];if(e){let t=e.split("&");for(let e=0;e<t.length;e++){const[i,o]=t[e].split("=");if("imageIndex"===i)return parseInt(o,10)}return""}return""}();function ud(e){return e&&e.getBoundingClientRect?e.getBoundingClientRect().top+function(){let e=0;return void 0!==window.pageXOffset?e=window.pageXOffset:void 0!==document.compatMode&&"BackCompat"!==document.compatMode?e=document.documentElement.scrollTop:void 0!==document.body&&(e=document.body.scrollTop),e}():0}function hd(){if(""===_d)return;const e=function(){const e=[],t=document.getElementsByTagName("img");for(let i=0,o=t.length;i<o;i++){const o=t.item(i);o.getAttribute("data-src")&&e.push(o)}return e}();if(_d>e.length)return;const t=ud(e[_d]);window.scroll(0,t)}function wd(){let e=!1,t=window.performance||window.msPerformance||window.webkitPerformance;if(!(t&&t.timing&&t.timing.navigationStart))return!1;e=t.timing.navigationStart,function(){let t=window.performance&&window.performance.timing,i=window.write_sceen_time-e,o=window.first_sceen__time-e,n=window.page_endtime-e,a=(window.onload_endtime||+new Date)-e;-1!=navigator.userAgent.indexOf("MicroMessenger")&&(i=real_show_page_time-e,o=real_show_page_time-e);let s=window.logs.jsapi_ready_time?window.logs.jsapi_ready_time-e:void 0,r=window.logs.a8key_ready_time?window.logs.a8key_ready_time-e:void 0,d=t&&t.connectEnd-t.connectStart,c=t&&t.secureConnectionStart&&t.connectEnd-t.secureConnectionStart,l=t&&t.domainLookupEnd&&t.domainLookupStart&&t.domainLookupEnd-t.domainLookupStart;if(window.logs.pagetime.wtime=i,window.logs.pagetime.ftime=o,window.logs.pagetime.ptime=n,window.logs.pagetime.onload_time=a,window.logs.pagetime.jsapi_ready_time=s,window.logs.pagetime.a8key_ready_time=r,need_report_cost?P({url:"/mp/report_cost",type:"post",data:{id_key_list:["1|1|"+n,"1|2|"+o,"1|3|"+a,"1|4|"+s,"1|5|"+r,"1|6|"+d,"1|7|"+c,"1|8|"+l].join(";")}}):Math.random()<.01&&P({url:"/mp/report_cost",type:"post",data:{id_key_list:["#1|1|"+n,"1|2|"+o,"1|3|"+a,"1|4|"+s,"1|5|"+r,"1|6|"+d,"1|7|"+c,"1|8|"+l].join(";")}}),need_report_cost&&o>3e3){let e=new Image,t=(new Date).getTime();e.onload=function(){let e=(new Date).getTime()-t,i=(new Date).getTime(),o=new Image;o.onload=function(){let t=(new Date).getTime()-i;P({url:"/mp/report_cost",type:"post",data:{id_key_list:["^2|1|"+e,"2|2|"+t].join(";")}})},o.src="http://ugc.qpic.cn/adapt/0/7d8963bb-aace-df23-0569-f8a4e388eacb/100?r="+Math.random()},e.src="http://ugc.qpic.cn/adapt/0/7d8963bb-aace-df23-0569-f8a4e388eacb/100?r="+Math.random()}function p(){if(-1==navigator.userAgent.indexOf("NetType/"))return!1;let e=["2G","cmwap","cmnet","uninet","uniwap","ctwap","ctnet"];for(let t=0,i=e.length;t<i;++t)if(-1!=navigator.userAgent.indexOf(e[t]))return!0;return!1}Math.random()>.2||a<0||i<0||o<0||n<0||(s&&R.setAvg(27822,15,s),r&&R.setAvg(27822,17,r),n>=15e3?R.setAvg(27822,29,n):(R.setAvg(27822,1,n).setAvg(27822,3,a).setAvg(27822,5,o),window.isWeixinCached&&R.setAvg(27822,19,n),p()?(R.setAvg(27822,9,n),window.isWeixinCached&&R.setAvg(27822,23,n)):"wifi"==networkType?(R.setAvg(27822,7,n),window.isWeixinCached&&R.setAvg(27822,21,n)):"2g/3g"==networkType?(R.setAvg(27822,11,n),window.isWeixinCached&&R.setAvg(27822,25,n)):"4g"==networkType?(R.setAvg(27822,14,n),window.isWeixinCached&&R.setAvg(27822,26,n)):(R.setAvg(27822,13,n),window.isWeixinCached&&R.setAvg(27822,28,n)),window.moon&&moon.clearSample&&(R.setAvg(27822,71,n),p()?R.setAvg(27822,73,n):"wifi"==networkType?R.setAvg(27822,75,n):"2g/3g"==networkType?R.setAvg(27822,77,n):"4g"==networkType?R.setAvg(27822,78,n):R.setAvg(27822,79,n)),d&&R.setAvg(27822,65,d),c&&R.setAvg(27822,67,c),l&&R.setAvg(27822,69,l)))}(),window.logs.jsapi_ready_fail&&R.setSum(24729,55,window.logs.jsapi_ready_fail),function(){const e=document.getElementById("page-content");if(!e||Math.random()>.1)return;const i=function(){const o=document.getElementById("js_content_end"),n=window.pageYOffset||document.documentElement.scrollTop,a=o.offsetTop;if(n+j.getInnerHeight()>=a){let o,n,a=e.getElementsByTagName("img"),s={},r=[],d=0,c=0,l=0;for(let e=0,t=a.length;e<t;++e){let t=a[e];o=t.getAttribute("data-src")||t.getAttribute("src"),n=t.getAttribute("src"),o&&(o.isCDN()?c++:l++,d++,s[n]={})}if(r.push("1="+1e3*d),r.push("2="+1e3*c),r.push("3="+1e3*l),t.getEntries){let e=t.getEntries(),i=window.logs&&window.logs.img&&window.logs.img.download;if(!i)return;let o=[0,0,0],n=[0,0,0];d=c=0;for(let t=0,r=e.length;t<r;++t){let i=e[t],a=i.name;a&&"img"==i.initiatorType&&s[a]&&(a.isCDN()&&(n[0]+=i.duration,c++),o[0]+=i.duration,d++,s[a]={startTime:i.startTime,responseEnd:i.responseEnd})}o[0]>0&&d>0&&(o[2]=o[0]/d),n[0]>0&&c>0&&(n[2]=n[0]/c);for(let t in i)if(i.hasOwnProperty(t)){let e=i[t],a=0,r=0,d=0,c=0;for(let t=0,i=e.length;t<i;++t){let i=e[t];if(s[i]&&s[i].startTime&&s[i].responseEnd){let e=s[i].startTime,t=s[i].responseEnd;a=Math.max(a,t),r=r?Math.min(r,e):e,i.isCDN()&&(d=Math.max(a,t),c=r?Math.min(r,e):e)}}o[1]+=Math.round(a-r),n[1]+=Math.round(d-c)}let a=4,l=7;for(let t=0;t<3;t++)o[t]=Math.round(o[t]),n[t]=Math.round(n[t]),o[t]>0&&(r.push(a+t+"="+o[t]),"wifi"==networkType?r.push(a+t+6+"="+o[t]):"2g/3g"!=networkType&&"4g"!=networkType||r.push(a+t+12+"="+o[t])),n[t]>0&&(r.push(l+t+"="+n[t]),"wifi"==networkType?r.push(l+t+6+"="+n[t]):"2g/3g"!=networkType&&"4g"!=networkType||r.push(l+t+12+"="+n[t]))}re.off(window,"scroll",i,!1)}};re.on(window,"scroll",i,!1)}(),function(){if(Math.random()>.001)return;const e=document.createElement("iframe"),t=Math.ceil(10*Math.random())-1,i=uin+mid+idx+Math.ceil(1e3*Math.random())+(new Date).getTime();e.style.display="none",e.id="js_ajax",e.setAttribute("data-time",t),e.src="/mp/iframetest?action=page&traceid="+i+"&devicetype="+devicetype+"&timeout="+[600,800,1e3,1200,1500,2e3,3e3,5e3,1e4,18e3][t];document.getElementById("js_article").appendChild(e)}()}""!==_d&&"scrollRestoration"in history&&(history.scrollRestoration="manual"),"loading"!==document.readyState?hd():window.addEventListener("DOMContentLoaded",(function(){hd()})),re.on(window,"load",(function(){if(""==networkType&&window.isInWeixinApp()){let e={"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"};JSAPI.invoke("getNetworkType",{},(function(t){networkType=e[t.err_msg],"network_type:edge"!=t.err_msg&&"network_type:wwan"!=t.err_msg||(t.detailtype&&"4g"==t.detailtype||t.subtype&&"4g"==t.subtype)&&(networkType="4g"),wd()}))}else wd()}),!1),window.page_endtime=+new Date;const gd="https://mp.weixin.qq.com/s/bpYquVzmjFzY_IrmCsxniQ",fd=$.isWp||$.isIOS||$.isAndroid;const yd=ht({components:{[we.name]:we},data:()=>({isNavShow:!0}),mounted(){document.addEventListener("visibilitychange",(()=>{var e;!this.isNavShow&&!document.hidden&&(null==(e=this.secControl)?void 0:e.ad_violation_middle_page)>0&&(this.isNavShow=!0,xe.hide(),xe.show({alpha:.6}))}))},computed:{...pe({secControl:e=>e.extRes.sec_control})},watch:{secControl:{handler(e){(null==e?void 0:e.ad_violation_middle_page)>0&&this.$nextTick((()=>{fd?this.show():(document.body.parentNode.style.overflow="hidden",window.weui.dialog({content:"当前内容可能存在未经审核的第三方商业营销信息，请确认是否继续访问。",buttons:[{label:"继续访问",type:"default",onClick:()=>{this.report(1),document.body.parentNode.style.overflow="auto"}},{label:"取消",type:"primary",onClick:()=>{this.closePage()}}],isAndroid:$.isAndroid}))}))},immediate:!0}},methods:{show(){this.$refs.bottomModal.show()},hide(){this.report(1),this.$refs.bottomModal.hide(),this.isNavShow&&xe.hide()},closePage(){this.report(2),$.isWechat?G.invoke("closeWindow",(e=>{-1===e.err_msg.indexOf("ok")&&(window.close(),window.open("about:blank","_top").close())})):(window.close(),window.open("about:blank","_top").close())},onTermClick(e){e.preventDefault(),"A"===e.target.tagName&&($.isWechat?G.invoke("openUrlWithExtraWebview",{url:gd,openType:1},(e=>{-1===e.err_msg.indexOf("ok")?location.href=gd:this.isNavShow=!1})):location.href=gd)},report(e){D.report(30608,{action:e,scene:1,url:location.href,mid:1*window.mid||0,idx:1*window.idx||0,bizuin:window.biz&&1*window.atob(window.biz)||0})}}},(function(){var e=this,t=e._self._c;return t("mp-bottom-modal",{ref:"bottomModal",attrs:{"auto-height":"","has-header":!1,"hide-when-mask-click":!1},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"weui-half-screen-dialog__btn-area"},[t("a",{staticClass:"weui-btn weui-btn_default",attrs:{href:"javascript:","wah-hotarea":"click"},on:{click:e.hide}},[e._v("继续访问")]),t("a",{staticClass:"weui-btn weui-btn_primary",attrs:{href:"javascript:","wah-hotarea":"click"},on:{click:e.closePage}},[e._v("取消")])]),t("div",{staticClass:"weui-half-screen-dialog__attachment-area",on:{click:e.onTermClick}},[t("a",{staticClass:"weui-link",attrs:{href:"javacript:;"}},[e._v("微信公众平台广告规范指引")])])]},proxy:!0}])},[t("p",{staticClass:"ad_control-tips"},[e._v("当前内容可能存在未经审核的第三方商业营销信息，请确认是否继续访问。")])])}),[],!1,null,"dc5d0372",null,null).exports;let vd,bd="";function xd(){try{if(!window.ad_keywords||"true"!==window.show_ad_keyword)return;const e=window.ad_keywords,t=document.querySelectorAll(".".concat(wt)).length,o=e.map((e=>e.keyword)).join(";");bd=o,vd=0;if(at({adKeywordsList:e,maxRenderNum:1,existingCount:t})){const t=st(e,{groupId:vd,msgKeyWords:o});document.querySelectorAll(".".concat(wt)).forEach((e=>{var o;(null==(o=e._adinfo)?void 0:o.data)&&(t.observe(e),function(e,t){e.addEventListener("click",(e=>{e.stopPropagation(),nt({keyword:t.keyword,eventType:2,msgKeyWords:bd,groupId:vd}),i.commit("mp-adv-keyword/setAdKeywordItem",t),i.commit("mp-adv-keyword/setReportData",{groupId:vd,msgKeyWords:bd}),i.commit("mp-adv-keyword/setShow",!0)}),!0)}(e,e._adinfo.data))})),nt({keyword:"",eventType:0,groupId:vd,msgKeyWords:o})}}catch(jd){console.error("initAdvKeywords",jd)}}const kd={bizuin:"1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,699115,1034280761,1240574601,1431142721,1444391061,1593467941,1791575621,1952208001,2095329301,2276745981,2390216734,2390281185,2390553873,2390609440,2390870601,2391039495,2391246920,2391496567,2391844653,2392031944,2392040960,2392049500,2392068072,2392082080,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2394032960,2394134267,2394260794,2394595381,2395111601,2395212841,2396456681,2396892002,2397343481,2397755480,2398177561,2398342156,2399178100,2399179801,2399272251,2399488342,2399587742,2399590682,2399627020,2399828201,2399899102,2399984042,3000521703,3001008593,3002542227,3003116648,3003310516,3004961517,3007158068,3009401635,3014000347,3014836707,3015508367,3070024236,3070365200,3071396719,3071712628,3072501450,3073731004,3075409771,3076292503,3076802329,3077322513,3080796821,3081915473,3082416430,3082539519,3084276724,3084639036,3086263435,3089474939,3090321411,3093258134,3093635076,3096421576,3097079126,3098741504,3099311533,3200455571,3208460593,3237753356,3239033926,3239235368,3239724132,3240168687,3242247792,3251670823,3256388201,3258413158,3262231420,3265775647,3271158630,3271436617,3271443368,3271638842,3274590163,3283053842,3284089266,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3537480573,3557594538,3559619275,3560409763,3564573611,3568878114,3569830872,3570795545,3572699929,3578502418,3588055360,3589897120,3591941043,3597585164,3861638209,3863661346,3864086737,3867740377,3871854925,3881127782,3885902745,3890744878,3893597889,3898741980,3902301003,3907694243,3911517477,3918223942,3922186273,1212133741,1275451641,1375135921,2390204122,2390302080,2390428640,2390642694,2390856064,2390957431,2391150242,2391199416,2391247334,2391375304,2391567054,2392014380,2392135301,2392727558,2393688720,2393698380,2393702823,2393896961,2394131000,2394349740,2394889101,2394892111,2395056175,2395124745,2395155740,2396006101,2396123612,2396639940,2396829423,2396942001,2397165860,2397224253,2397274880,2397491920,2398089220,2398112841,2398299140,2398330323,2398377244,2398694681,2398847601,2398982052,2399230362,2399354541,2399865442,2399903782,2940696320,3001648390,3003037429,3009185121,3009790978,3010170184,3010540601,3012272362,3012326877,3012558019,3012729257,3014173967,3016277592,3017159050,3019157166,3070494630,3071373728,3073249188,3073254928,3074001907,3075193232,3078365435,3078852525,3080543482,3080580668,3080976631,3081200029,3081448106,3082493215,3083282110,3085157003,3087036607,3089340324,3089461010,3090044084,3090136400,3092876047,3093232206,3093286307,3094358118,3095301145,3095437037,3095693511,3096111432,3096422132,3097498138,3099068632,3200251369,3207173165,3220101605,3235111899,3243884694,3255030554,3255036745,3255918706,3259480365,3263009825,3268117899,3269176942,3270637292,3272710521,3280796249,3288495941,3288868675,3292158393,3294233713,3518062346,3548031541,3553935523,3558818400,3559352214,3562893285,3563068977,3564760843,3584493905,3588502049,3592823583,3598836122,3869559570,3872851260,3889147671,3890467628,3891717967,3899903346,3902206426,3910251662,3922691457,3925310299,3931289542,4393255,962494081,1559284381,1628309301,1643294701,2390095621,2390185980,2390287897,2390403755,2390471121,2390731784,2391111309,2391164500,2391771880,2391844323,2392154590,2392213146,2392458732,2392718635,2392856453,2392897401,2393278785,2393306340,2394291820,2395148767,2395159421,2395164392,2395347320,2395462792,2395771800,2396268083,2396283012,2396356952,2396388401,2396676120,2396822627,2397251641,2397329668,2397341623,2397372552,2397526740,2397536160,2397783483,2398191832,2398264303,2398285141,2398339600,2398539040,2398552775,2398632600,2398838963,2399112600,2399311780,2399585921,2399593722,2399777220,2399991836,2560685080,2786833600,3008522239,3012249769,3012301452,3013338725,3016397069,3016752164,3070196162,3071782930,3072030302,3072107639,3073674128,3074502309,3075325238,3076392209,3077316430,3077423712,3077572710,3078245224,3079351773,3079423800,3079476127,3079958145,3079981327,3080043700,3080464616,3082446799,3083052239,3084405827,3084418087,3084917558,3086716937,3087030803,3088308533,3089222529,3090060408,3090588715,3092634507,3093197108,3093485357,3094160674,3097189780,3098395705,3099000336,3203815843,3204674323,3209033201,3212096040,3214041112,3215656497,3217555405,3222004532,3236088154,3236259213,3244599030,3269032708,3269523047,3274292289,3286126582,3294751423,3521090753,3525800276,3556007534,3563439857,3567698492,3572825035,3590745740,3862092748,3864811637,3865848828,3866756856,3870597774,3875092925,3879808364,3886703252,3890135424,3890769148,3890964029,3892555190,3893127105,3894866322,3898707519,3898909364,3902720236,3907314219,3909716943,3912441527,3914274522,3926241941,3926248961,3928602515,3944000110,3948180278,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,699115,1034280761,1240574601,1431142721,1444391061,1593467941,1791575621,1952208001,2095329301,2276745981,2390216734,2390281185,2390553873,2390609440,2390870601,2391039495,2391246920,2391496567,2391844653,2392031944,2392040960,2392049500,2392068072,2392082080,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2394032960,2394134267,2394260794,2394595381,2395111601,2395212841,2396456681,2396892002,2397343481,2397755480,2398177561,2398342156,2399178100,2399179801,2399272251,2399488342,2399587742,2399590682,2399627020,2399828201,2399899102,2399984042,3000521703,3001008593,3002542227,3003116648,3003310516,3004961517,3007158068,3009401635,3014000347,3014836707,3015508367,3070024236,3070365200,3071396719,3071712628,3072501450,3073731004,3075409771,3076292503,3076802329,3077322513,3080796821,3081915473,3082416430,3082539519,3084276724,3084639036,3086263435,3089474939,3090321411,3093258134,3093635076,3096421576,3097079126,3098741504,3099311533,3200455571,3208460593,3237753356,3239033926,3239235368,3239724132,3240168687,3242247792,3251670823,3256388201,3258413158,3262231420,3265775647,3271158630,3271436617,3271443368,3271638842,3274590163,3283053842,3284089266,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3537480573,3557594538,3559619275,3560409763,3564573611,3568878114,3569830872,3570795545,3572699929,3578502418,3588055360,3589897120,3591941043,3597585164,3861638209,3863661346,3864086737,3867740377,3871854925,3881127782,3885902745,3890744878,3893597889,3898741980,3902301003,3907694243,3911517477,3918223942,3922186273,1212133741,1275451641,1375135921,2390204122,2390302080,2390428640,2390642694,2390856064,2390957431,2391150242,2391199416,2391247334,2391375304,2391375304,2391567054,2392014380,2392135301,2392727558,2393688720,2393698380,2393702823,2393896961,2394131000,2394349740,2394889101,2394892111,2395056175,2395124745,2395155740,2396006101,2396123612,2396639940,2396829423,2396942001,2397165860,2397224253,2397274880,2397491920,2398089220,2398112841,2398299140,2398330323,2398377244,2398694681,2398847601,2398982052,2399230362,2399354541,2399865442,2399903782,2940696320,3001648390,3003037429,3009185121,3009790978,3010170184,3010540601,3012272362,3012326877,3012558019,3012729257,3014173967,3016277592,3017159050,3019157166,3070494630,3071373728,3073249188,3073254928,3074001907,3075193232,3078365435,3078852525,3080543482,3080580668,3080976631,3081200029,3081448106,3082493215,3083282110,3085157003,3087036607,3089340324,3089461010,3090044084,3090136400,3092876047,3093232206,3093286307,3094358118,3095301145,3095437037,3095693511,3096111432,3096422132,3097498138,3099068632,3200251369,3207173165,3220101605,3235111899,3243884694,3255030554,3255036745,3255918706,3259480365,3263009825,3268117899,3269176942,3270637292,3272710521,3280796249,3288495941,3288868675,3292158393,3294233713,3518062346,3548031541,3553935523,3558818400,3559352214,3562893285,3563068977,3564760843,3584493905,3588502049,3592823583,3598836122,3869559570,3872851260,3889147671,3890467628,3891717967,3899903346,3902206426,3910251662,3922691457,3925310299,3931289542,4393255,962494081,1559284381,1628309301,1643294701,2390095621,2390185980,2390287897,2390403755,2390471121,2390731784,2391111309,2391164500,2391771880,2391844323,2392154590,2392213146,2392458732,2392718635,2392856453,2392897401,2393278785,2393306340,2394291820,2395148767,2395159421,2395164392,2395347320,2395462792,2395771800,2396268083,2396283012,2396356952,2396388401,2396676120,2396822627,2397251641,2397329668,2397341623,2397372552,2397526740,2397536160,2397783483,2398191832,2398264303,2398285141,2398339600,2398539040,2398552775,2398632600,2398838963,2399112600,2399311780,2399585921,2399593722,2399777220,2399991836,2560685080,2786833600,3008522239,3012249769,3012301452,3013338725,3016397069,3016752164,3070196162,3071782930,3072030302,3072107639,3073674128,3074502309,3075325238,3076392209,3077316430,3077423712,3077572710,3078245224,3079351773,3079423800,3079476127,3079958145,3079981327,3080043700,3080464616,3082446799,3083052239,3084405827,3084418087,3084917558,3086716937,3087030803,3088308533,3089222529,3090060408,3090588715,3092634507,3093197108,3093485357,3094160674,3097189780,3098395705,3099000336,3203815843,3204674323,3209033201,3212096040,3214041112,3215656497,3217555405,3222004532,3236088154,3236259213,3244599030,3269032708,3269523047,3274292289,3286126582,3294751423,3521090753,3525800276,3556007534,3563439857,3567698492,3572825035,3590745740,3862092748,3864811637,3865848828,3866756856,3870597774,3875092925,3879808364,3886703252,3890135424,3890769148,3890964029,3892555190,3893127105,3894866322,3898707519,3898909364,3902720236,3907314219,3909716943,3912441527,3914274522,3926241941,3926248961,3928602515,3944000110,3948180278"};setTimeout((()=>{const e=document.getElementById("js_content");if(!e)return;[{name:"mp-common-miniprogram",idkey:2,detectName:"miniprogramCoverDetect"},{name:"mp-common-profile",idkey:3,detectName:"profileCoverDetect"},{name:"mp-common-videosnap",idkey:4,detectName:"videoSnapCoverDetect"},{name:"mp-common-search",idkey:5,detectName:"searchCoverDetect"},{name:"mp-common-subscribe",idkey:6,detectName:"subscribeCoverDetect"},{name:"mp-common-sticker",idkey:7,detectName:"stickerCoverDetect"},{name:"mp-common-poi",idkey:8,detectName:"poiCoverDetect"},{name:"mp-common-redpacket",idkey:9,detectName:"redpacketCoverDetect"},{name:"mp-common-cpslink",idkey:10,detectName:"cpslinkCoverDetect"},{name:"mp-common-cpsad",idkey:11,detectName:"cpsadCoverDetect"},{name:"mp-common-claudio",idkey:12,detectName:"claudioCoverDetect"},{name:"mp-common-mpaudio",idkey:13,detectName:"mpaudioCoverDetect"},{name:"mp-common-vote",idkey:14,detectName:"voteCoverDetect"},{name:"mp-common-qqmusic",idkey:15,detectName:"qqmusicCoverDetect"},{name:"mp-common-clmusic",idkey:16,detectName:"clmusicCoverDetect"},{name:"mp-common-answer",idkey:17,detectName:"answerCoverDetect"}].forEach((t=>{const{name:i,idkey:o,detectName:n}=t;Array.from(document.getElementsByTagName(i)).forEach((t=>{const i=S({startElem:t,endElem:e},{rules:["CSS[Opacity<1]","CSS[Height=0]"]});if(i.length>0){R.setSum(299174,o,1);const e="biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx);window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("".concat(n),"".concat(e),{mid:"mmbizwap:appmsg_covertest",view:"wap_business",_info:{url:location.href,hitArr:i}})}}))}))}),1e4);const Id=window.Vue;ji(i,{initShareListen:fn,initAsyncCompt:ds,updateCurrentMpInfo:e=>{f({bizNickName:e.nick_name,title:e.title}),y()}}),p(i),Yt(i),m(i);const{isIOS:Sd,isAndroid:Ad}=$,Td=!!window.is_login,Cd=W("disable_share");!Cd&&fn(),Ri(0),(window.user_uin||xt)&&Ut(i,wn);try{q.os.ios&&q.os.getNumVersion()>=16&&(R.setSum(110809,78,1),q.isLockdownMode()&&R.setSum(110809,79,1)),window.customElements?R.setSum(110809,70,1):R.setSum(110809,71,1),document.head.createShadowRoot||document.head.attachShadow?R.setSum(110809,72,1):R.setSum(110809,73,1)}catch(Dd){console.log(Dd)}window.canUseStar=Sd&&$.compareHexVersion("18003623")||Ad&&$.compareHexVersion("28003630"),setTimeout((()=>{window.canUseStar&&G.invoke("operateStar",{opType:"getSwitch"},(e=>{console.info("handleMPPageAction getOperateStar11111",e),window.getSwitchRes=e,/:ok$/.test(e.err_msg)&&e.switch?localStorage.setItem("mp_star_switch",!0):localStorage.setItem("mp_star_switch",!1)})),G.invoke("currentMpInfo",{interaction_url:window.interaction_url,underline_url:window.underline_url}),console.info("[currentMpInfo]set url",{interaction_url:window.interaction_url,underline_url:window.underline_url})})),function(){const e=112287,t=document.getElementById("js_content"),i=document.getElementsByTagName("tbody");if(t.innerHTML.length>1048576&&(R.setSum(e,44,1),t.innerText.length<5e3&&t.scrollHeight<1e4)){R.setSum(e,45,1);const t={Url:location.href,Reason:3,Title:window.msg_title,Createtime:window.create_time,SendTime:window.svr_time};if(D.report(31768,t),0===i.length){R.setSum(e,46,1);const t={Url:location.href,Reason:4,Title:window.msg_title,Createtime:window.create_time,SendTime:window.svr_time};D.report(31768,t)}}}(),function(){const e=112287,t=parseInt(window.atob(window.biz)),i=kd.bizuin.includes(t),o=document.getElementById("js_content").innerHTML;let n="mpEditor";if(o){o.match(/powered-by="(\S*)"/)?n=o.match(/powered-by="(\S*)"/)[1]:o.match(/data-tools="(\S*)"/)?n=o.match(/data-tools="(\S*)"/)[1]:0==o.indexOf("西瓜插件")?n="西瓜插件":o.match(/[P|p]owered by "(\S*)"/)?n=o.match(/[P|p]owered by "(\S*)"/)[1]:o.includes("_mbEditor")&&(n="美编助手");.5<Math.random()<.6&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("type: ".concat(n," | url: ").concat(location.href),"type: ".concat(n),{mid:"mmbizwap:editor_report",view:"wap_business"}),i&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("type: ".concat(n," | url: ").concat(location.href),"type: ".concat(n),{mid:"mmbizwap:editor_media_report",view:"wap_business"})}o&&(o.match(/powered-by="(\S*)"/)||o.match(/data-tools="(\S*)"/)||0==o.indexOf("西瓜插件")||o.match(/[P|p]owered by "(\S*)"/)||o.includes("_mbEditor")?(i&&R.setSum(e,49,1),R.setSum(e,47,1)):(i&&R.setSum(e,50,1),R.setSum(e,48,1)))}(),ot.setGvar({payType:0,pageType:0,albumId:(null==(e=window.target_album_info)?void 0:e.id)||""}),Id.config.errorHandler=(e,t,i)=>{e._info=i,window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.onError(e),console.error("Vue errorHandler",i,e)},console.info("[图文信息] 三元组:",window.biz,window.mid,window.idx),console.info("[用户信息] 设备信息: 是否安卓",q.os.android,"是否IOS",q.os.ios,"是否秒开场景",window.__second_open__,"系统版本",q.os.version,"用户uin",window.user_uin,"是否小程序内打开",$.isInMiniProgram),window.__immersiveListMode&&G.invoke("disableBounceScroll",{place:["top","bottom"]}),!$.isIPad&&$.isWechat&&(G.invoke("handleDeviceInfo",{action:"setOrientation",orientation:0,lock:!0}),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("force portrait screen report","screen: ".concat(window.screen.width,"x").concat(window.screen.height," | url: ").concat(location.href),{mid:"mmbizwap:horizontal_screen",view:"wap_business"})),I.initHtmlMinHeight(),window.__second_open__||window.ext_complete||A.setExtLoadDom(),se.on("ext-complete",(()=>{window.requestAnimationFrame(A.removeExtLoadDom)})),se.on("interact-ext-complete",(()=>{window.requestAnimationFrame(A.removeExtLoadDom)}));let Ed=-1,Rd=!1;if(window.logs.pagetime.jsapi_ready_time=+new Date,window.logs.idkeys={},V.log("[Appmsg] start run index.js init"),function(){const e=(new Date).getHours(),t=function(e,t){t=t||"",window.isSg?(t=["uin:sougou","resp:".concat(t)].join("|"),R.setLogs({id:24729,key:e,value:1,log:t})):(t=["uin:".concat(window.user_uin),"resp:".concat(t)].join("|"),R.setLogs({id:24729,key:e,value:1,log:t}))},i=e>=11&&e<=17&&Math.random()<1;window.__report=t,window.__commonVideoReport=function(e,o){i&&t(e,o)},window.__addIdKeyReport=function(e,t,i){const o=e+"_"+t;i=i||1,window.logs.idkeys[o]||(window.logs.idkeys[o]={val:0}),window.logs.idkeys[o].val+=i}}(),j.initWebCompt(["wxOpen"],(e=>{window.__is_support_wxOpen=e.err_msg&&e.err_msg.indexOf(":ok")>-1,(document.getElementsByTagName("mpsubscribe")&&document.getElementsByTagName("mpsubscribe").length||document.getElementsByTagName("mp-common-subscribe")&&document.getElementsByTagName("mp-common-subscribe").length)&&Ks()})),function(){setTimeout((()=>{let e=document.getElementsByClassName("wx-edui-video_source_link");e=Array.prototype.slice.call(e),e.forEach((e=>{e&&e.addEventListener("click",(()=>{const t=e.dataset.hitUsername,i=e.dataset.hitBiz;te.goProfile({biz:i},{username:t})}))}))}),500);let e=!1;if((()=>{try{const t=j.getParam("anchor_list");let i=!1;if(t&&2!==window.copyright_stat){e=!0;const o=document.getElementById("js_content"),n=gt(o,{ignoreNotWriteableChildren:!0});let a=decodeURIComponent(t).split("#");for(let e=0;e<a.length;e++){let t=a[e].split(",");if(t&&3===t.length){let e=n[t[0]],o=1*t[1],a=1*t[2];window.__addIdKeyReport("306353","3");const s=ft(e,o,a);!i&&s&&(window.__addIdKeyReport("306353","1"),setTimeout((()=>{window.scrollTo(0,s.getBoundingClientRect().top+j.getScrollTop()-110)})),i=!0)}}}}catch(jd){window.__addIdKeyReport("306353","2"),console.error(jd)}})(),function(){window.is_teenager?R.setSum(286024,0,1):pd()}(),Pr.init(),Je(),window.is_new_msg&&-1!=navigator.userAgent.indexOf("MicroMessenger")){window.title&&(window.title=window.title.replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),window.msg_title&&(window.msg_title=window.msg_title.replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),hd_head_img||de.jsmonitor({id:115849,key:26,value:1}),Td&&!window.show_comment_bar&&g(!1);const e=document.querySelectorAll("mp-common-product, mp-common-videosnap"),t={userName:window.user_name,bizNickName:window.nickname,bizNickNameBackup:window.title,cover:"",title:window.msg_title,headImg:window.hd_head_img,roundHeadImg:window.round_head_img,digest:window.msg_desc,reportData:{BizUin:window.biz,AppMsgID:1*window.mid,ItemIndex:1*window.idx,Scene:1*window.source,SubScene:1*window.subscene,EnterId:1*window.enterid,SessionId:window.sessionid,ItemShowType:1*window.item_show_type},hasFinderElement:e.length>0?1:0,canReadArticle:Boolean(!window.tempkey&&window.tts_is_show)&&!($.isPcWechat&&!Ge)};if(!Cd)if($.isAndroid){t.cover="",_.init(t);const e=window.cdn_url_1_1||window.cdn_url_235_1||"",i=new Image;e&&(i.src=e,i.onload=()=>{i.width<2048&&i.height<2048&&(t.cover=e,_.init(t)),window.topbarInited=!0},i.onerror=()=>{window.topbarInited=!0})}else t.cover=window.cdn_url_1_1||window.cdn_url_235_1||window.msg_cdn_url,_.init(t);re.on(window,"scroll",(()=>{Rd||$.isAndroid&&!window.topbarInited||(lt(0),Rd=!0)})),G.invoke("createWebViewForFastLoad",{scene:1},(e=>{console.log(e)}))}let t=document.getElementsByTagName("body");if(!t||!t[0])return!1;t=t[0];(function(){const e=[],t=document.getElementById("js_content").getElementsByTagName("a");for(let s=0;s<t.length;s++)null!==t[s].getAttribute("data-itemshowtype")&&e.push(t[s]);const i=[];Array.prototype.map.call(document.getElementById("js_content").getElementsByClassName("h5_image_link"),(e=>{e.parentNode.getAttribute("href")&&e.parentNode.getAttribute("href").length>0&&i.push(e)}));const o=[];Array.prototype.map.call(document.getElementById("js_content").getElementsByClassName("weapp_image_link"),(e=>{o.push(e)}));const n=window.innerHeight||document.documentElement.clientHeight;function a(){!function(){if(e.length){const t=document.documentElement.scrollTop||document.body.scrollTop;for(let i=0;i<e.length;i++)if(1!=e[i].getAttribute("hasload")){const o=e[i].getBoundingClientRect();(o.top<n+t&&o.top>t||o.top+o.height>t&&o.top+o.height<n+t)&&e[i].getAttribute("href").length>0&&(e[i].setAttribute("hasload",1),G.invoke("downloadPageDataForFastLoad",{itemList:[{item_show_type:e[i].getAttribute("data-itemshowtype"),url:e[i].getAttribute("href")}]},(e=>{console.log(e)})),e.splice(i,1),i--)}}}(),function(){for(let e=0;e<i.length;e++){const t=i[e],o=t.getBoundingClientRect();(o.top<=0&&o.top+o.height>=0||o.top>0&&o.top<n)&&(i.splice(e,1),e--,ee.report([1,ee.getRedirectType(t.parentNode.getAttribute("href")),"",window.img_popup?1:0,window.source,ee.getUrlData(t.parentNode.getAttribute("href"))],!0))}for(let e=0;e<o.length;e++){const t=o[e],i=t.getBoundingClientRect();(i.top<=0&&i.top+i.height>=0||i.top>0&&i.top<n)&&(o.splice(e,1),e--,ee.report([1,1,"",window.img_popup?1:0,window.source,t.getAttribute("data-miniprogram-appid")],!0))}}()}re.on(window,"scroll",a),a()})(),(async()=>{let e=null;const t=document.querySelector("#js_ting_heard");if(t){const i=fi();i&&(R.setSum(293511,18,1),2===i&&R.setSum(293511,23,1),3===i&&R.setSum(293511,24,1),e=await yi("#audio_panel_area",i));let o=!1,n=!1;new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(n||(n=!0,_.topbarReport(4),R.setSum(293511,4,1)))}))}),{threshold:.5}).observe(t);const a=(t=!0)=>{if(t&&(_.topbarReport(5),R.setSum(293511,5,1),D.report(32561,{BizUin:window.biz,MsgId:+window.mid,Idx:+window.idx,ListenId:"",ListenType:0,Scene:1*window.source,SubScene:1*window.subscene,Pos:0,EventType:13,EventTime:parseInt(Date.now()/1e3,10),SessionId:"".concat(window.sessionid),EnterId:+window.enterid,ExpVersion:"".concat(i||0),PlayRate:0,ListenTime:0,ShutDownType:"",ShutDownLeftTime:0,ListBase64:""})),e&&i){t&&D.report(32561,{BizUin:window.biz,MsgId:+window.mid,Idx:+window.idx,Scene:1*window.source,SubScene:1*window.subscene,ListenId:"",ListenType:0,Pos:0,EventType:13,EventTime:parseInt(Date.now()/1e3,10),SessionId:"".concat(window.sessionid),EnterId:+window.enterid,ExpVersion:"".concat(i||0),PlayRate:0,ListenTime:0,ShutDownType:"",ShutDownLeftTime:0,ListBase64:""});if(!1!==e.show())return;t&&R.setSum(293511,22,1)}const n={bizAudioScene:1,openPlayerUI:o,listenId:window.appmsg_listen_id||"",playMode:0,itemList:[{type:2,duration:123,srcId:location.href,listenId:window.appmsg_listen_id||"",title:window.msg_title||"",webUrl:window.msg_link||location.href,author:window.nickname||window.cgiData.nick_name||"",cover:window.cdn_url_1_1||window.__appmsgCgiData.hd_head_img||"",mpInfo:{username:window.user_name||"",name:window.nickname||window.cgiData.nick_name||"",bizUin:window.biz?parseInt(window.atob(window.biz),10):0,webUrl:window.msg_link||location.href},categoryPlaylistInfoBuffer:window.merge_playlist_info_base64||""}]};console.log("+++++++++++++++ tingReadOpt",n),Ke(n,void 0,Qe.TING).then((e=>{e.success?G.invoke("vibrateShort",{style:"medium"}):(console.log("+++++++++++++++ fail",e),window.weui.alert("暂无法朗读，请重试"),R.setSum(293511,6,1),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("t1t read fail","res: ".concat(JSON.stringify(e)," | url: ").concat(location.href),{mid:"mmbizwap:t1t_read_fail",view:"wap_business"}))})).catch((e=>{console.log("+++++++++++++++ tingReadErr",e)}))};window.__hasClickedAudioPanelHandler&&t.removeEventListener("click",window.__hasClickedAudioPanelHandler),window.__hasClickedAudioPanel&&(a(),window.__hasClickedAudioPanel=!1),re.on(t,"click",(()=>a())),G.on("onTingEntryClick",(()=>{a(!1),R.setSum(293511,34,1),D.report(32561,{BizUin:window.biz,MsgId:+window.mid,Idx:+window.idx,ListenId:"".concat(window.appmsg_listen_id||""),ListenType:0,Scene:1*window.source,SubScene:1*window.subscene,Pos:0,EventType:22,EventTime:parseInt(Date.now()/1e3,10),SessionId:"".concat(window.sessionid),EnterId:+window.enterid,ExpVersion:"".concat(i||0),PlayRate:0,ListenTime:0,ShutDownType:"",ShutDownLeftTime:0,ListBase64:""})}))}let i=[];voiceList&&voiceList.voice_in_appmsg&&voiceList.voice_in_appmsg.length>0&&(i=voiceList.voice_in_appmsg),Ps(i,e)})(),function(){if(![1,2,3].includes(window.reprint_style))return;const e=document.getElementById("js_share_content"),t=document.getElementById("js_share_source");if(!e||!t)return;const i=t.getAttribute("data-url");function o(e){var t;e.stopPropagation(),e.preventDefault(),$.isWechat?(t=i,$.isOnlyWechat&&!$.isMpapp?G.invoke("openWebViewUseFastLoad",{url:t,item_show_type:0,openType:0,scene:0},(e=>{var i;console.log("handleReprintCard openWebViewUseFastLoad:",e),-1===(null==(i=null==e?void 0:e.err_msg)?void 0:i.indexOf("ok"))&&qe(t)})):qe(t)):location.href=i}i&&(G.invoke("downloadPageDataForFastLoad",{itemList:[{url:i,item_show_type:0}]},(e=>{console.log("handleReprintCard downloadPageDataForFastLoad:",e)})),e.onclick=o,t.onclick=o)}();const o=/^http(s)?:\/\/mp\.weixin\.qq\.com\//g;try{if(top!=window&&(!top||top&&location.href&&o.test(location.href))&&!window.isSg)throw new Error("in iframe")}catch(Pd){const t="";R.setLogs({id:24729,key:4,value:1,log:"biz:".concat(biz,",mid:").concat(mid,",uin:").concat(uin,",[key4]").concat(t).substring(0,1024)})}if(window.isInWeixinApp()&&/#rd$/.test(location.href)&&!window.isWeixinCached&&!window.__second_open__&&!$.isWxWork){const e=-1!=location.href.indexOf("?")?"&":"?";location.replace(location.href.replace(/#rd$/,e+"rd2werd=1#wechat_redirect"))}const n=!$.isWp&&-1==navigator.userAgent.indexOf("MicroMessenger"),a=$.isMpapp&&$.cpVersion("2.25.0",1,!0,"mpapp");if(function(){const e=document.getElementById("js_content");let t=!1;const i=e.getElementsByTagName("img");for(let o=0,n=i.length;o<n;o++){const e=i[o].getAttribute("data-src");if(e){if(e.indexOf("imgIndex")>-1)continue;i[o].setAttribute("data-src",O(e,"imgIndex=".concat(o)))}}for(let o=0,n=i.length;o<n;o++){const e=i[o].getAttribute("data-src");if(e&&e.canHevc()){t=!0;break}}if(!t){const i=e.querySelectorAll("[data-lazy-bgimg]");for(let e=0,o=i.length;e<o;e++){const o=i[e].getAttribute("data-lazy-bgimg");if(o&&o.canHevc()){t=!0;break}}}t?oi((e=>{ni((t=>{ws(e,t)}))})):ni((e=>{ws(!1,e)}))}(),window.__review_image__=!n||a||/wxwork\/([\d.]+)/i.test(navigator.userAgent)?new tt({isHttpsRes:is_https_res}):null,it().catch((()=>{null==window||window.__addIdKeyReport(326818,79)})),window.__review_image__){const e=document.getElementById("js_cover");window.__review_image__.add({container:document.getElementById("js_content"),imgs:e?[e]:[]})}ds(),new Zn({store:i,render:e=>e(Xn)}).$mount("#content_bottom_area"),new ga({store:i,render:e=>e(wa)}).$mount("#page_bottom_area"),Va(),new Id({store:i,render:e=>e(yd)}).$mount("#js_ad_control"),function(){const e=document.getElementById("profileBt"),t=document.getElementById("copyright_info"),i=[];if(e){let t="57";"28"==window.source&&(t="96"),"31"===window.source&&(t="103"),"30"===window.source&&(t="102"),"29"==window.source&&(t="39"),"15"==window.source&&(t="121"),i.push({dom:e,username:user_name,profileReportInfo:window.profileReportInfo||"",scene:t})}t&&source_encode_biz&&i.push({dom:t,source_encode_biz:source_encode_biz,scene:"161"});for(let o=0,n=i.length;o<n;o++)!function(e){re.on(e.dom,"click",(t=>{if("copyright_info"==e.dom.id&&source_encode_biz)Go.card_click_report({scene:"0"}),te.goProfile({biz:e.source_encode_biz,scene:e.scene},{username:source_username,scene:e.scene+""});else{if(V.log("[Appmsg] profile_click_before_loadprofile: username:"+e.username+", scene:"+e.scene),ie.profileReport({hotspotjson:JSON.stringify({hotspotinfolist:window.hotspotInfoList})}),profileReportInfo){const e=String(profileReportInfo).split("_");3==e.length&&P({url:"/mp/ad_biz_info?action=report&__biz="+window.biz+"&report_type=2&aid="+e[1]+"&tid="+e[2],type:"GET",dataType:"json",async:!0,success(e){}})}$.isWxWork&&($.isIOS||$.isAndroid)?ae():1==isprofileblock?G.invoke("openUrlWithExtraWebview",{url:"https://mp.weixin.qq.com/mp/profileblock?__biz="+window.biz+"#wechat_redirect",openType:1},(e=>{-1==e.err_msg.indexOf("ok")&&(location.href="https://mp.weixin.qq.com/mp/profileblock?__biz="+window.biz+"#wechat_redirect")})):te.goProfile({biz:window.biz},{username:e.username,profileReportInfo:e.profileReportInfo||"",scene:e.scene+"",bizuin:window.biz&&1*window.atob(window.biz)||0},(t=>{window.__addIdKeyReport("28307","1"),V.log("[Appmsg] profile_click_after_loadprofile: username:"+e.username+", scene:"+e.scene+", profileReportInfo:"+e.profileReportInfo+", res.err_msg:"+t.err_msg)}))}t.preventDefault()})),$.isWp&&e.dom.setAttribute("href","weixin://profile/"+e.username)}(i[o])}(),function(){function e(){const e=function(){if("hidden"in document)return"hidden";const e=["webkit","moz","ms","o"];for(let t=0;t<e.length;t++)return e[t]+"Hidden";return null}();return!!e&&document[e]}function t(t){if(e())for(let e=0;e<window.originalVideoAdFrames.length;e++)window.originalVideoAdFrames[e].contentWindow.postMessage({action:"pauseAd",value:""},"*");else window.originalVideoAdCurrentFrame&&window.originalVideoAdCurrentFrame.contentWindow.postMessage({action:"playAd"},"*")}document.webkitVisibilityState?document.addEventListener("webkitvisibilitychange",t,!1):document.msVisibilityState?document.addEventListener("msvisibilitychange",t,!1):document.visibilityState&&document.addEventListener("visibilitychange",t,!1)}();try{const e=document.getElementById("js_author_name");if(e){let t="";re.on(e,"click",(i=>!!J.hasClass(e,"rich_media_meta_link")&&(window.is_temp_url?(window.weui.alert("预览状态下不能操作"),!1):!kt({clickType:"js_author_name"})&&(!!e.getAttribute("data-rewardsn")&&(1==e.getAttribute("data-canreward")&&(t="https://mp.weixin.qq.com/mp/author?action=show&author_id="+author_id+"&rewardsn="+e.getAttribute("data-rewardsn")+"&timestamp="+e.getAttribute("data-timestamp")+"&__biz="+window.biz+"&appmsgid="+window.appmsgid+"&idx="+window.idx+"&scene=142&rscene=129&from_scene="+window.source+"&from_subscene="+window.subscene+"&from_enterid="+window.enterid+"&from_sessionid="+window.sessionid+"&is_fans="+window.isFans+"&is_paidarticle="+window.isPaySubscribe+"&author_from_scene=0#wechat_redirect",!$.isInMiniProgram&&void(-1!=navigator.userAgent.indexOf("MicroMessenger")&&($.isIOS||$.isAndroid||$.isWp)?(window.__addIdKeyReport("110809","1"),G.invoke("openUrlWithExtraWebview",{url:t,openType:1},(e=>{-1==e.err_msg.indexOf("ok")&&(location.href=t)}))):window.open(t))))))))}}catch(Pd){}new Ze({container:document.getElementById("js_content"),changeHref(e,t,i){if(e=e.trim(),1===window.ban_jump_link.block_atag)return ban_jump_link.atag_intcp_url;if(!e||0!=e.indexOf("http://mp.weixin.qq.com/")&&0!=e.indexOf("https://mp.weixin.qq.com/")){if(18==ban_scene)return"/mp/ban?action=check&__biz="+biz+"&mid="+mid+"&idx="+idx+"&scene="+ban_scene+"#wechat_redirect";if(0!=e.indexOf("http://mp.weixinbridge.com/mp/wapredirect")&&0!=e.indexOf("https://mp.weixinbridge.com/mp/wapredirect")&&0!=e.indexOf("https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket"))return"https://mp.weixinbridge.com/mp/wapredirect?url="+encodeURIComponent(e)+"&action=appmsg_redirect&uin="+uin+"&biz="+biz+"&mid="+mid+"&idx="+idx+"&type="+t+"&scene=0"}else{let t="&";-1==(e=(e=(e=e.replace(/#rd\s*$/,"")).replace(/#wechat_redirect\s*$/,"")).replace(/[\?&]scene=21/,"")).indexOf("?")&&(t="?"),e+=t+"scene=".concat(i?310:21,"#wechat_redirect")}return e}}),function(){if(window.novel_album_info&&window.novel_album_info.is_wxa_novel&&window.novel_album_info.show_novel_link){const e=document.getElementById("js_novel_card");re.on(e,"click",(()=>{$.isWechat?(wr(2),bi.jumpUrl({options:{sceneNote:encodeURIComponent(location.href),userName:window.novel_album_info.novel_author_username,relativeURL:window.novel_album_info.novel_path,scene:1406}})):window.weui&&window.weui.alert("请在微信内操作")}));const t=new IntersectionObserver((i=>{i.forEach((i=>{i.isIntersecting&&(wr(1),t.unobserve(e))}))}));t.observe(e)}}(),et({container:document.getElementById("js_content")}),function(){if(!document.getElementsByClassName)return;let e=document.getElementsByClassName("js_product_section"),t=document.getElementsByClassName("js_product_a"),i=[];function o(e){let t=window.pageYOffset||document.documentElement.scrollTop;for(let o=0;o<i.length;++o){let e=i[o];if(!e.isReport){let i=e.offsetTop;t<=i&&t+j.getInnerHeight()>=i&&(e.isReport=!0,(new Image).src="/mp/appmsgreport?action=appmsg_recom&type=1&__biz="+biz+"&ascene="+(window.ascene||-1)+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&product_id="+e.product_id+"&order="+e.order+"&r="+Math.random())}}}for(let n=0;n<e.length;++n){let t=e[n];t.dataset&&t.dataset.product_id&&t.dataset.order&&i.push({dom:t,offsetTop:t.offsetTop,product_id:t.dataset.product_id||"",order:t.dataset.order||"",isReport:!1})}i.length>0&&(re.on(window,"scroll",o),o());for(let n=0;n<t.length;++n)!function(e){re.on(e,"click",(function(t){let i=e.dataset||{};return(new Image).src="/mp/appmsgreport?action=appmsg_recom&type=2&__biz="+biz+"&ascene="+(window.ascene||-1)+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&product_id="+(i.product_id||"")+"&order="+(i.order||"")+"&r="+Math.random(),!!i.href&&(setTimeout((function(){location.href="https://mp.weixinbridge.com/mp/wapredirect?url="+encodeURIComponent(i.href)+"&action=appmsg_redirect&uin="+uin+"&biz="+biz+"&mid="+mid+"&idx="+idx+"&scene=0"}),300),!1)}),!0)}(t[n])}(),window.originalVideoAdFrames=[],window.originalVideoAdCurrentFrame=null,window.originalVideoAdFramesUnsetList=[],window.addEventListener("message",(e=>{let t="";const i=document.getElementsByTagName("iframe");if(e.data&&"originalVideoAdNeedData"==e.data.action&&e.data.vid)if(window.originalVideoAdFramesAdData){window.originalVideoAdFramesAdData&&window.originalVideoAdFramesAdData[e.data.vid]&&(t=window.originalVideoAdFramesAdData[e.data.vid]);for(let o=0;o<i.length;o++)i[o].dataset&&i[o].dataset.mpvid==e.data.vid&&i[o].contentWindow.postMessage({action:"receiveOriginalVideoData",vid:e.data.vid,adData:t},"*")}else console.log(e.data.vid," has no ad data yet"),window.originalVideoAdFramesUnsetList.push(e.data.vid)})),vi(),window.fromWeixinCached||os();r.getAdData(window.reportVid),function(){try{new xs}catch(Dd){console.error("initMusic err",Dd)}}(),xd(),Ei(),u(),(()=>{const e=document.querySelectorAll(Os.oldTagName);for(let i=0;i<e.length;i++){const t=e[i],o=document.createElement("mp-common-search"),n=t.getAttribute("data-keywords");t.parentNode.appendChild(o),t.parentNode.removeChild(t),o.setAttribute("data-nickname",window.nickname),o.setAttribute("data-headImg",window.round_head_img),o.setAttribute("data-keywords",n)}const t=document.querySelectorAll(Os.tagName);if(!(t.length<=0))for(let i=0,o=t.length;i<o;i++){const e=t[i];e.classList.add("js_wx_tap_highlight");let o=[];try{o=JSON.parse(window.decodeURIComponent(e.getAttribute("data-keywords")))}catch(Pd){R.setSum(110809,50,1)}if(o.length){const t={nickname:window.nickname,avatar:window.round_head_img,keywords:o};Os.keywords=o;const i=e.parentNode.querySelector('[data-preloadingid="mp-common-search"]');i&&i.parentNode.removeChild(i),Ms({dom:e,keywords:t.keywords})}}})(),(()=>{const e=document.querySelectorAll(Ds.oldTagName);for(const o of e){const e=document.createElement(Ds.tagName);o.parentNode.appendChild(e),o.parentNode.removeChild(o);const t=["pluginname","id","poiid","districtid","name","address","img","longitude","latitude","provice","city","hasreport","type"];for(const i of t){const t="data-".concat(i);e.setAttribute(t,o.getAttribute(t))}}const t=document.querySelectorAll(Ds.tagName);for(let o=0,n=t.length;o<n;o++){const e=t[o];e.classList.add("js_wx_tap_highlight");const i={id:decodeURIComponent(e.getAttribute("data-id")||""),name:decodeURIComponent(e.getAttribute("data-name")||""),address:decodeURIComponent(e.getAttribute("data-address")||""),img:decodeURIComponent(e.getAttribute("data-img")||""),longitude:decodeURIComponent(e.getAttribute("data-longitude")||""),latitude:decodeURIComponent(e.getAttribute("data-latitude")||""),type:decodeURIComponent(e.getAttribute("data-type")||""),style:decodeURIComponent(e.getAttribute("data-style")||0),poiType:1==+decodeURIComponent(e.getAttribute("data-type")||"")?5:4},n=e.parentNode.querySelector('[data-preloadingid="'+i.id+'"]');n&&n.parentNode.removeChild(n),Ds.poiDom.push(e),Ls({poiInfo:i,dom:e})}const i=document.getElementsByClassName("js_poi_entry");for(let o=0;o<i.length;o++)(e=>{const t=i[e];J.removeClass(t,"ct_geography_loc_tip"),J.addClass(t,"wx_poi_link"),J.addClass(t,"js_wx_tap_highlight"),J.addClass(t,"wx_tap_link"),Ds.poiDom.push(t),re.on(t,"click",(e=>{e.stopPropagation(),e.preventDefault();const i={id:decodeURIComponent(t.getAttribute("data-id")||""),poiId:decodeURIComponent(t.getAttribute("data-poiid")||""),name:decodeURIComponent(t.getAttribute("data-name")||""),address:decodeURIComponent(t.getAttribute("data-address")||""),img:decodeURIComponent(t.getAttribute("data-img")||""),longitude:decodeURIComponent(t.getAttribute("data-longitude")||""),latitude:decodeURIComponent(t.getAttribute("data-latitude")||""),type:decodeURIComponent(t.getAttribute("data-type")||""),poiType:1==+decodeURIComponent(t.getAttribute("data-type")||"")?5:4};return i.longitude&&i.latitude&&i.name&&i.address&&(D.report(19937,Object.assign({},Ds.commonReportData,{type:1,actiontype:2})),R.setSum(110809,57,1),Bs(i,!0)),!1}),!0)})(o);Ns(),re.on(window,"scroll",Ns)})(),es.initCpslink(),Y.init(),1===window.show_msg_voice&&(gs(),console.log("load voicemsg"));!window.__appmsgCgiData||1!=window.__appmsgCgiData.wxa_product&&1!=window.__appmsgCgiData.wxa_cps||Ws();h.init(),document.getElementsByTagName("mp-qa").length&&zo.renderQaCard({mid:window.mid,idx:window.idx,isLogin:!!window.is_login,userUin:window.user_uin,biz:window.biz,itemShowType:window.item_show_type,sessionId:window.sessionid,enterId:window.enterid,scene:window.source,subScene:window.subscene});const s=document.getElementsByTagName("mp-common-videosnap");(document.getElementsByTagName("mpvideosnap")&&document.getElementsByTagName("mpvideosnap").length||s&&s.length)&&$e();const d=document.getElementsByTagName("mp-common-profile");(document.getElementsByTagName("mpprofile")&&document.getElementsByTagName("mpprofile").length||d&&d.length)&&sr();document.getElementsByTagName("mp-common-sticker")&&document.getElementsByTagName("mp-common-sticker").length&&ur();if(function(){fr&&fr.length&&Cr()}(),document.getElementsByTagName("mp-wxaproduct").length){const e=window.__appmsgCgiData.minishopCardData?JSON.parse(decodeURIComponent(window.__appmsgCgiData.minishopCardData)):"";Ui({biz:window.biz,mid:window.mid,idx:window.idx,source:1*window.source,subscene:1*window.subscene,enterid:1*window.enterid,minishopCards:e})}function c(){const e=window.performance||window.msPerformance||window.webkitPerformance;if(e.timing){const t=e.timing;V.log("[Appmsg] dns:"+(t.domainLookupEnd-t.domainLookupStart)+"^^^ ssl:"+(0==t.secureConnectionStart?0:t.connectEnd-t.secureConnectionStart)+"^^^ tcp:"+(t.connectEnd-t.connectStart)+"^^^ request:"+(t.responseStart-t.requestStart)+"^^^ getPackageTime:"+(t.responseEnd-t.responseStart)+"^^^ domCententLoaded:"+(t.domContentLoadedEventStart-t.domLoading)+"^^^ domComplete:"+(t.domComplete-t.domLoading)+"^^^ firstViewTime:"+(real_show_page_time-t.navigationStart)+"^^^ interactiveTime:"+(window.page_endtime-t.navigationStart)),window.navigator.userAgent,setTimeout((()=>{t.loadEventEnd&&V.log("[Appmsg] onload:"+(t.loadEventEnd-t.loadEventStart))}),100)}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),""==document.getElementById("js_content").innerHTML.trim()&&R.setSum(24729,94,1);Math.random()<.001&&document.getElementById("js_read_area3")&&document.getElementById("js_read_area3").innerText&&document.getElementById("js_read_area3").innerText.indexOf("Pageview")>-1&&R.setSum(24729,95,1),window.__wxjs_is_wkwebview&&R.setSum(28307,67,1)}G.invoke("getNetworkType",{},(function(e){networkType=Ys[e.err_msg],"network_type:edge"!=e.err_msg&&"network_type:wwan"!=e.err_msg||(e.detailtype&&"4g"==e.detailtype||e.subtype&&"4g"==e.subtype)&&(networkType="4g"),Qs()})),void re.on(window,"load",Qs,!1),new qo({biz:window.biz,isPaySubscribe:window.isPaySubscribe,container:document.getElementById("js_content"),logid:18504,baseData:["",window.biz,window.mid,window.idx,window.location.href,window.msg_title]}),setTimeout((()=>{re.tap(document.getElementById("copyright_logo"),(()=>{const e="http://kf.qq.com/touch/sappfaq/150211YfyMVj150326iquI3e.html";window.__second_open__?G.invoke("openUrlWithExtraWebview",{url:e,openType:1},(t=>{-1==t.err_msg.indexOf("ok")&&(location.href=e)})):location.href=e})),Bi(),w.init({dom:document.getElementById("js_report_article3"),title:window.msg_title.htmlDecode(),link:window.msg_link}),function(){if(n&&!window.cps_article_data)document.title=window.msg_title.htmlDecode(),J.addClass(t,"not_in_mm");else{const e=document.getElementById("js_report_article3");e&&(e.style.display="")}}();const e=document.getElementsByTagName("map");for(let t=0,n=e.length;t<n;++t)e[t].parentNode.removeChild(e[t]);if(Go.card_pv_report(),Math.random()<.01)try{const e="https://js.aq.qq.com/js/aq_common.js",t=document.createElement("script");t.src=e;document.getElementsByTagName("head")[0].appendChild(t)}catch(Pd){}const i=document.getElementById("js_close_temp");re.on(i,"click",(()=>{i.parentNode.parentNode.removeChild(i.parentNode),J.removeClass(document.getElementById("js_article"),"preview_appmsg")})),re.on(document.getElementById("js_close_private"),"click",(()=>{document.getElementById("private_bar").remove()}));let o=0;const a=document.getElementById("js_quote_preview_switch_inner");a&&re.on(a,"click",(()=>{o=o?0:1,a.innerText=o?"预览作者视角":"预览公开发表视角",Pi(o)}))}),1e3),function(){if(!q.os.ios||!("onorientationchange"in window))return;const e=[],t="onorientationchange"in window?"orientationchange":"resize";let i=!1;const o=function(){return 90===Math.abs(window.orientation)?1:2};1!==o()||i||(ot.report110809(63),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("horizontal screen report","biz: ".concat("function"==typeof window.atob&&window.biz?window.atob(window.biz):window.biz," | mid: ").concat(window.mid," | idx: ").concat(window.idx," | url: ").concat(location.href),{mid:"mmbizwap:horizontal_screen",view:"wap_business"}),i=!0),e.push({ori:o(),scroll:window.pageYOffset||document.documentElement.scrollTop,istouchmove:!1});const n=(new Date).getHours();re.on(window,t,(()=>{const t=e.length-2,a=o();if(Ed=+new Date,t>=0){const i=e[t];e[e.length-1].istouchmove||(n>=11&&n<=17&&window.__report(63),setTimeout((()=>{window.scrollTo(0,i.scroll)}),100))}e.push({ori:a,scroll:window.pageYOffset||document.documentElement.scrollTop,istouchmove:!1}),1!==a||i||(ot.report110809(63),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("horizontal screen report","biz: ".concat("function"==typeof window.atob&&window.biz?window.atob(window.biz):window.biz," | mid: ").concat(window.mid," | idx: ").concat(window.idx," | url: ").concat(location.href),{mid:"mmbizwap:horizontal_screen",view:"wap_business"}),i=!0)})),re.on(window,"scroll",(()=>{const t=e.length-1,i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=Date.now();if(-1!=Ed){if(console.log("[横屏滚动检测]",n-Ed),n-Ed<500)return void(Ed=-1)}else Ed=-1;e[t].ori==o()&&(e[t].scroll=i,e[t].istouchmove=!0)}))}(),V.log("[Appmsg] href:"+location.href+"^^^ ua:"+window.navigator.userAgent),window.addEventListener?window.addEventListener("load",c,!1):window.attachEvent&&window.attachEvent("onload",c);void(window.addEventListener&&document.getElementsByTagName("body")[0].addEventListener("copy",(()=>{R.setSum(28307,18,1),$.isIOS&&R.setSum(28307,19,1),$.isAndroid&&R.setSum(28307,20,1)}),!1)),window.__observer&&window.__observer_data&&md();"undefined"!=typeof isSg&&function(){if(document.getElementById("js_report_article3")&&(document.getElementById("js_report_article3").style.display="none"),document.getElementById("js_content_end")&&(document.getElementById("js_content_end").style.display="none"),function(){const e=document.createElement("div");e&&(e.innerHTML=Me.tmpl(js,{}),document.body.appendChild(e))}(),new v.Emotion({emotionPanel:b("#js_emotion_panel"),inputArea:b("#js_cmt_input"),emotionPanelArrowWrp:b("#js_emotion_panel_arrow_wrp"),emotionSwitcher:b("#js_emotion_switch"),emotionSlideWrapper:b("#js_slide_wrapper"),emotionNavBar:b("#js_navbar"),submitBtn:b("#js_cmt_submit")}),navigator.userAgent.toLowerCase().match(/ios/)){const t=navigator.userAgent.toLowerCase().match(/(?:sogousearch\/ios\/)(.*)/);if(t&&t[1]){const i=t[1].replace(/\./g,"");parseInt(i)>422&&e("ios")}}else e("android");function e(e){const t=document.getElementById("js_cover"),i=[];t&&i.push(t);const o=document.getElementById("js_content");if(o){const e=o.getElementsByTagName("img")||[];for(let t=0,o=e.length;t<o;t++)i.push(e.item(t))}const n=[];for(let a=0,s=i.length;a<s;a++){const t=i[a],o=t.getAttribute("data-src")||t.getAttribute("src");o&&(n.push(o),function(i){re.on(t,"click",(function(t){return"ios"==e?window.JSInvoker&&window.JSInvoker.openImageList&&window.JSInvoker.openImageList(JSON.stringify({index:i,array:n})):window.JSInvoker&&window.JSInvoker.weixin_openImageList&&window.JSInvoker.weixin_openImageList(JSON.stringify({index:i,array:n})),!1}))}(a))}}window.onerror=function(e){R.setLogs({id:24729,key:86,value:1,log:e})}}();setTimeout((()=>{const e=function(){R.setLogs({id:28307,key:49,value:1,log:"[28307_49_appmsg_fe_filter]"+encodeURIComponent(location.href)})},t=(window.appmsg_fe_filter||"").split(","),i=function(t,i){try{if(!t)return;if(t.querySelectorAll){const o=t.querySelectorAll("*["+i+"]");if(o&&o.length>0){e();for(let e=0;e<o.length;++e)o[e]&&o[e].removeAttribute&&o[e].removeAttribute(i)}return}const o=t.childNodes;if(t.hasAttribute&&t.hasAttribute(i)&&e(),t.removeAttribute&&t.removeAttribute(i),o&&o.length)for(let e=0;e<o.length;++e)filterContenteditable(o[e])}catch(Pd){}},o=document.getElementById("js_content");for(let n=0;n<t.length;++n)t[n]&&i(o,t[n])}),0),setTimeout((()=>{const e="//mmbiz.qpic.cn/mmbiz_png/7lG1x2vpicdic0p5bBthpD9lsJcINicsSzd6uKQQJyoj5oTl8lFIs9K0fIibgxCzms0enDLTRxTHLpDPCLpSvIExiag/640",t=(new Date).getHours();if(t<11||t>16||Math.random()<.99)return;const i=new Image;i.onload=function(){const e=i.naturalWidth||i.width,t=i.naturalHeight||i.height;640===e&&407===t||window.__addIdKeyReport("28307","wifi"===window.networkType?120:123),window.__addIdKeyReport("28307","wifi"===window.networkType?121:124)},i.src="http:"+e;const o=new Image;o.onload=function(){const e=o.naturalWidth||o.width,t=o.naturalHeight||o.height;640===e&&407===t||window.__addIdKeyReport("28307",126),window.__addIdKeyReport("28307",127)},o.src="https:"+e}),3e3);if(Math.random()<2e-4)try{const e=document.getElementsByTagName("img"),t=window.screen.height,i=window.screen.width,o=window.devicePixelRatio;let n="";for(let a=0,s=e.length;a<s;a++){const s=e[a].getAttribute("data-src");if(s){const r=e[a].getBoundingClientRect();n+=i+"|"+t+"|"+r.left.toFixed(2)+"|"+(i-r.right).toFixed(2)+"|"+r.width.toFixed(2)+"|"+o.toFixed(2)+"|"+s+";"}}P({url:"/mp/wapreport?action=img_display_report",data:{key:n},type:"POST",dataType:"json",async:!0})}catch(Pd){}setTimeout((()=>{Ho&&Ho("updatePageHeight")}),2e3),$.isIOS&&location.href.match(/fontScale=\d+/)&&E&&setTimeout((()=>{if(window.ipados13_font_scale)return;const e=location.href.match(/fontScale=(\d+)/);window.ipados13_font_scale=parseFloat(e[1]),C(document.getElementsByTagName("html").item(0),window.ipados13_font_scale/100)}),500);const l=!!window.goContentId;if(V.log("[PagePos] init entry"),console.log("[PagePos] init entry"),I.init({hasSpAd:!0,disableScroll:window.isPaySubscribe&&!window.isPaid&&window.jump2pay||l||e}),window.__main_process_finish__=!0,te.elementVisibleController(),document.querySelector(".refuted_appmsg_card")){const e=document.querySelector("#rumor-video-card");if(e){let t={};try{t=JSON.parse(recursiveHtmlDecode(rumor_data_json))}catch(Pd){console.error("videoRumorCard JSON.parse error",Pd)}const{media:i,head_url:o,nickname:n,desc:a,auth_info:s,export_id:r,username:d,nonce_id:c,liveWording:l,flag:p,intro:m}=t;return e.setAttribute("data-index",1),e.setAttribute("data-headimgurl",o),e.setAttribute("data-username",d),e.setAttribute("data-nickname",n),e.setAttribute("data-desc",a),e.setAttribute("data-id",r),e.setAttribute("data-flag",p),e.setAttribute("data-authiconurl",s.auth_icon_url),e.setAttribute("data-noticeid",c),e.setAttribute("data-feedthumburl",i[0].cover_url),void e.classList.add("js_wx_tap_highlight")}const t=document.querySelector(".refuted_appmsg_card"),i=z(t.getAttribute("data-url"),"norumor",1),o=Number(t.getAttribute("data-itemshowtype"))||0;G.invoke("downloadPageDataForFastLoad",{itemList:[{item_show_type:o,url:i}]},(e=>{console.log("downloadPageDataForFastLoad",e)})),t.addEventListener("click",(()=>{$.isOnlyWechat&&!$.isMpapp?G.invoke("openWebViewUseFastLoad",{url:i,item_show_type:o,openType:0},(e=>{console.log("openWebViewUseFastLoad res: ",e),e&&e.err_msg&&-1===e.err_msg.indexOf("ok")&&qe(i)})):qe(i)}))}Zt.currentMpInfo({showForwardMp:!0})}(),!window.__second_open__){const e=window.performance||window.msPerformance||window.webkitPerformance;if(e&&e.timing){const t=window.location.protocol;de.saveSpeeds({uin:window.uin,pid:"https:"==t?462:417,speeds:{sid:34,time:Date.now()-e.timing.navigationStart}}),de.send()}rt({isPaySubscribe:window.isPaySubscribe})}export{t as __vite_legacy_guard};
