# MyCodeAgent 推文章节大纲（V3：线性迭代版）

> 写作原则：严格按时间线写“先做出来，再不断修正”，不做完成后的倒推式总结。

## 总体结构

- 建议总章节：9 章
- 建议总字数：8000-10000
- 主线：基于 Hello-Agent 做出 V0，然后围绕真实问题逐步改造成可控的 Code Agent
- 特别约束：
  - 第4章重点写 CodeAgent 工具体系（不含 Skills）
  - Skills 放在最后单开一章重点讲

---

## 第1章：为什么我要自己做一个 Code Agent（已写）

- 时间点：学完 Hello-Agent 教程，进入毕业设计阶段
- 核心内容：
  - 高强度使用 Claude Code/Codex 等产品后的启发
  - 决定亲手做一个 Code Agent，验证理解
  - 方法论开场：工程可控性 > 模型自由度
- 章节目标：立住动机与价值观

---

## 第2章：先跑起来——我如何基于 Hello-Agent 做出 V0

- 时间点：项目起步期
- 核心内容：
  - 先复用 Hello-Agent 骨架：ReAct、ToolRegistry、Message、Terminal Tool
  - 快速得到“能思考、能调用工具、能操作文件”的原型
  - 第一次正反馈：基础代码任务可以完成
- 章节目标：明确“先继承再改造”的起手策略

---

## 第3章：第一次踩坑——Terminal Tool 为什么会失控

- 时间点：进入高强度调试后
- 核心内容：
  - 模型生成复杂 bash（管道/重定向/拼接）导致链式失败
  - 命令过长、步骤合并，错误定位困难
  - 安全策略可被组合绕过，越界风险上升
- 章节目标：提出关键矛盾：“让模型自由写 shell”不等于高效

---

## 第4章：工具体系重构——把“不可控命令”拆成“可控工具”

- 时间点：调研主流 Code Agent 设计后
- 核心内容（本章重点）：
  - 借鉴 Claude Code/OpenCode/Gemini CLI 的工具化思路
  - 设计常用工具清单：LS/Glob/Grep/Read/Write/Edit/MultiEdit/Bash/Todo 等
  - 工具分级分权：常用能力工具化，Bash 保留但收敛权限
  - 统一接入 ToolRegistry，形成可管理的工具目录
  - 结果：从“一条命令做完所有事”变为“单步调用 + 单步观察”
- 章节目标：展示第一轮大改造（工具体系）

---

## 第5章：第二次踩坑——字符串 ReAct 解析不稳定

- 时间点：工具体系跑通后的压测阶段
- 核心内容：
  - Thought/Action 文本解析出现多输出、误解析、格式漂移
  - 调研后切换 Function Calling
  - 重写调用链路：工具 schema、参数约束、执行回填
- 章节目标：展示第二轮改造（调用协议与执行稳定性）

---

## 第6章：第三次踩坑——长任务里的上下文“腐烂”

- 时间点：开始测试长程复杂任务
- 核心内容：
  - 发现原上下文方案对 Code Agent 过重或不匹配
  - 学习主流设计后重做上下文工程
  - 关键改造：分层注入、历史压缩、工具输出截断与落盘
- 章节目标：展示第三轮改造（上下文可持续性）

---

## 第7章：可观测性补课——没有日志就没有迭代

- 时间点：核心功能变多后
- 核心内容：
  - 建立 Trace 日志：记录用户输入、工具调用、结果与错误位置
  - 支持复盘回查：知道“哪里错、怎么错、为何错”
  - 基于日志能力扩展会话保存/恢复（save/load）
- 章节目标：展示从“能用”到“能维护”的跨越

---

## 第8章：后续增强——MCP、Subagent、Todo 等能力如何接入

- 时间点：核心链路稳定后的增强期
- 核心内容：
  - MCP 接入策略与价值边界
  - Subagent、Todo 等能力在真实任务里的作用
  - 这些能力为什么是“增强项”而不是“基础盘”
- 章节目标：补充系统扩展能力，但不稀释主线

---

## 第9章：Skills 单章——把经验沉淀成可复用工作流

- 时间点：体系逐步稳定后
- 核心内容（单章重点）：
  - 为什么单独做 Skills：把“个人经验”变成“可调用能力”
  - Skills 的结构、触发方式、在项目中的协同价值
  - 实战示例：一个 Skill 如何降低重复决策成本
  - 对生态的意义：这也是你对 Hello-Agent 学习路径的反哺
- 结尾 CTA：
  - 主 CTA：引导读者查看并 Star MyCodeAgent
  - 次 CTA：引导读者先学 Hello-Agent，再按你的路线做二开

---

## 每章统一叙事模板（写作时复用）

- 本章时间点
- 当时遇到的具体问题
- 为什么旧方案不够
- 我调研了哪些思路
- 我具体改了什么
- 改完后的结果与证据
- 下一章过渡
